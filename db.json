{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/clientHeight.png","path":"images/clientHeight.png","modified":1,"renderable":0},{"_id":"source/images/offsetHeight.png","path":"images/offsetHeight.png","modified":1,"renderable":0},{"_id":"source/images/iv.png","path":"images/iv.png","modified":1,"renderable":0},{"_id":"source/images/scollHeight.png","path":"images/scollHeight.png","modified":1,"renderable":0},{"_id":"source/images/scrollTop.png","path":"images/scrollTop.png","modified":1,"renderable":0},{"_id":"source/images/HHKB.jpeg","path":"images/HHKB.jpeg","modified":1,"renderable":0},{"_id":"source/images/encrypt.png","path":"images/encrypt.png","modified":1,"renderable":0},{"_id":"source/images/login.png","path":"images/login.png","modified":1,"renderable":0},{"_id":"source/images/success.png","path":"images/success.png","modified":1,"renderable":0},{"_id":"source/images/weekend.jpeg","path":"images/weekend.jpeg","modified":1,"renderable":0},{"_id":"themes/archer/source/assets/algolia_logo.svg","path":"assets/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/archer/source/assets/loading.svg","path":"assets/loading.svg","modified":1,"renderable":1},{"_id":"themes/archer/source/assets/Home.svg","path":"assets/Home.svg","modified":1,"renderable":1},{"_id":"themes/archer/source/assets/favicon.ico","path":"assets/favicon.ico","modified":1,"renderable":1},{"_id":"themes/archer/source/assets/qr.png","path":"assets/qr.png","modified":1,"renderable":1},{"_id":"themes/archer/source/css/mobile.css","path":"css/mobile.css","modified":1,"renderable":1},{"_id":"themes/archer/source/avatar/logo.jpg","path":"avatar/logo.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/css/style.css","path":"css/style.css","modified":1,"renderable":1},{"_id":"themes/archer/source/font/Source Sans Pro.woff","path":"font/Source Sans Pro.woff","modified":1,"renderable":1},{"_id":"themes/archer/source/font/Source Sans Pro.woff2","path":"font/Source Sans Pro.woff2","modified":1,"renderable":1},{"_id":"themes/archer/source/lib/webfontloader.min.js","path":"lib/webfontloader.min.js","modified":1,"renderable":1},{"_id":"themes/archer/source/scripts/main.js","path":"scripts/main.js","modified":1,"renderable":1},{"_id":"themes/archer/source/scripts/search.js","path":"scripts/search.js","modified":1,"renderable":1},{"_id":"themes/archer/source/scripts/share.js","path":"scripts/share.js","modified":1,"renderable":1},{"_id":"source/images/travis.png","path":"images/travis.png","modified":1,"renderable":0},{"_id":"themes/archer/source/font/Oswald-Regular.ttf","path":"font/Oswald-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff","path":"font/SourceCodePro-Regular.ttf.woff","modified":1,"renderable":1},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff2","path":"font/SourceCodePro-Regular.ttf.woff2","modified":1,"renderable":1},{"_id":"themes/archer/source/intro/404-bg.jpg","path":"intro/404-bg.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/lib/jquery.min.js","path":"lib/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/archer/source/avatar/avtar.jpg","path":"avatar/avtar.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/intro/about-bg.jpg","path":"intro/about-bg.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/intro/post-bg.jpg","path":"intro/post-bg.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/intro/bg.jpg","path":"intro/bg.jpg","modified":1,"renderable":1},{"_id":"themes/archer/source/intro/index-bg.jpg","path":"intro/index-bg.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/archer/.gitignore","hash":"e2d7fa953bade3b94ed1cab25ffcf442c7540433","modified":1566989305196},{"_id":"themes/archer/.eslintrc.json","hash":"35eeca97fa5a2d0c6d78ef1257c58f03c42d43df","modified":1566989305195},{"_id":"themes/archer/.gitattributes","hash":"82c1a621642d5b620275ae1ed59845c3f7015a64","modified":1566989305195},{"_id":"themes/archer/.prettierrc.js","hash":"875b0b95f6eb24a23e4ea83a75709b97897135e0","modified":1566989305196},{"_id":"themes/archer/.prettierignore","hash":"58caf761f07e5df9cdc21f7f19f0670fde41089b","modified":1566989305196},{"_id":"themes/archer/LICENSE","hash":"0da0c361bf299375739c6b668a44af0f5faf37bb","modified":1566989305196},{"_id":"themes/archer/README.md","hash":"97edb54cb7aecff714f132110ed4ba8215da7136","modified":1566989305197},{"_id":"themes/archer/_config.yml","hash":"bdb870dbbc5c90e9e01f502e2428cbc81da111fb","modified":1567240624770},{"_id":"themes/archer/gulpfile.js","hash":"46dfe693b00ac4dea4d1b1af56f5ced4ee095c10","modified":1566989305199},{"_id":"themes/archer/package.json","hash":"531fe40833ca63493f62adfa249b6434310a2d0a","modified":1566989305207},{"_id":"themes/archer/webpack.config.js","hash":"d20b6350c50e2981484cb9356a3e21a2124bcd72","modified":1566989305236},{"_id":"themes/archer/webpack.prod.js","hash":"48de76cfa6274895801d3afc89ecbf04ee182a1c","modified":1566989305236},{"_id":"source/_posts/ElonAndJack.md","hash":"b656bfcf192b7a721d7e3540b80486d7f4949c3a","modified":1567909507239},{"_id":"source/_posts/Travis-CIæŒç»­é›†æˆHexoåˆ°äº‘æœåŠ¡å™¨.md","hash":"59c72d8ce7a97f35733d54890ffaef57b3c232e0","modified":1567909623487},{"_id":"source/_posts/HHKB.md","hash":"b30c810b0530244360d8154cd52fbf0f59694e6e","modified":1568111932632},{"_id":"source/_posts/node-1.md","hash":"ac470b6075f561719e779aefd91a3e8dd1f17998","modified":1569244856430},{"_id":"source/_posts/weekend.md","hash":"ad4142aaf7a06ed2cee60af4e6131de225f8f9aa","modified":1567388247401},{"_id":"source/_posts/æ–°ç½‘ç«™.md","hash":"f23ae2c0f14c6ef9d9dc224f01d9e486bc0fe0f6","modified":1567388250425},{"_id":"source/_posts/JsWidthAndHeight.md","hash":"baa429170557075e736a95be9e0e0ea343c56761","modified":1568012235756},{"_id":"source/about/index.md","hash":"31da4ed509e6c46b81eeb4b109a5ec6cb16deb3d","modified":1567159452263},{"_id":"source/_posts/sshLogin.md","hash":"fd54a7734fc1d9824fd818cf1d3e99ecdd81c0f6","modified":1567909643466},{"_id":"source/_posts/nginxé…ç½®ssl.md","hash":"216571d6ebd2812a2036be368a4565ad211e014e","modified":1567909595860},{"_id":"source/images/clientHeight.png","hash":"5a21a3c25d2a7365d091badad9a1ba1e744e56c6","modified":1568011238055},{"_id":"source/images/offsetHeight.png","hash":"cdd3708195bd5d239627cb102a01e59904ba22ea","modified":1568011234417},{"_id":"source/images/iv.png","hash":"06614226fd14f6f18c96133bfff6d3a4663c6f5f","modified":1567341098856},{"_id":"source/images/scollHeight.png","hash":"551e31ada5f37fcbd51ca49b6b1687b9fcb1b4b8","modified":1568011788453},{"_id":"source/images/scrollTop.png","hash":"514d96fffb254b1a785204f66e9acb37ba45087e","modified":1568012085732},{"_id":"source/tags/index.md","hash":"594f738b83fedfa653d5c96da20510c8ea8b0de4","modified":1566911678021},{"_id":"themes/archer/docs/README-en.md","hash":"f325565c0bb94501fd046268659c7752709895d1","modified":1566989305197},{"_id":"themes/archer/docs/develop-guide-en.md","hash":"0bb09c3c9d5f56820cb84e3316f60352b731d70c","modified":1566989305197},{"_id":"themes/archer/docs/develop-guide-zh.md","hash":"effc2bc9e0cecfd228b19283337ff29649ea5985","modified":1566989305197},{"_id":"themes/archer/dev/archer.sh","hash":"4065c4e55462d5ecf016464adea0d1db967ef4b4","modified":1566989305197},{"_id":"themes/archer/languages/default.yml","hash":"d56b6923c70efdef09cd1f0270d7adc9cc338f6b","modified":1566989305199},{"_id":"themes/archer/languages/en.yml","hash":"ad75d3e5f7f5f0463d3077e1b5a26f40938a1faa","modified":1566989305199},{"_id":"themes/archer/layout/404.ejs","hash":"879641b1b5e49c43f2e096cad281f7d74df05127","modified":1566989305200},{"_id":"themes/archer/layout/about.ejs","hash":"06019d835c0a51fed8aa086d1dfcf368f9921b42","modified":1566989305204},{"_id":"themes/archer/layout/index.ejs","hash":"716ba4a30860e36077dfdfffa02c1cd60301d8a3","modified":1566989305204},{"_id":"themes/archer/layout/layout.ejs","hash":"08ebd10c1b2bfc11be8f5115a836a98e6c6ba13c","modified":1566989305204},{"_id":"themes/archer/layout/post.ejs","hash":"b61156aff41641a14d5e4e45d9fd776309f2801a","modified":1566989305204},{"_id":"themes/archer/layout/site-meta.ejs","hash":"d866aa1a892d4bfe3368f6dbd0f1baa8c5831947","modified":1566989305205},{"_id":"themes/archer/source/.DS_Store","hash":"930c6508268f48a80018d8abc30d3bec638b3a99","modified":1566994101548},{"_id":"source/images/HHKB.jpeg","hash":"6289b7afd3c66c9790ff04c012092c18e90028bd","modified":1568107105381},{"_id":"source/images/encrypt.png","hash":"fd22fcba73ccc1eadade3e1323e4a240beea8913","modified":1567340650980},{"_id":"source/images/login.png","hash":"c2813d57bd6a01800858baf8ee561f5b366f3837","modified":1567340645957},{"_id":"themes/archer/.github/ISSUE_TEMPLATE/-----------bug--help-wanted-or-bug-report-.md","hash":"012bd3afea5565204f75d8c89048ad33b9c2f948","modified":1566989305195},{"_id":"source/images/success.png","hash":"926c35dbd53f5354611b28eaf84b605f682d1698","modified":1567353433317},{"_id":"themes/archer/.github/ISSUE_TEMPLATE/-----feature-request-.md","hash":"886fb1252702d46c89536b579d35ce49e53ec54d","modified":1566989305196},{"_id":"themes/archer/.github/ISSUE_TEMPLATE/-----other-issue-.md","hash":"4bf3c8ebef14a81bb55e8e0468d816e83c4133ac","modified":1566989305196},{"_id":"source/images/weekend.jpeg","hash":"e27bd6ad7cabf0957104cc143c209e8fdef5c428","modified":1567306494349},{"_id":"themes/archer/layout/_partial/algolia.ejs","hash":"2f5f9073378f628a9124792b5301c1540bc5a264","modified":1566989305200},{"_id":"themes/archer/layout/_partial/base-background-image.ejs","hash":"82203d9a1c6e16ef2d37b8b587f56bf6d16edaf2","modified":1566989305200},{"_id":"themes/archer/layout/_partial/base-header.ejs","hash":"34ea3178ad7e363297e4372bf9501d7de9f3f8be","modified":1568954035715},{"_id":"themes/archer/layout/_partial/base-preload-polyfill.ejs","hash":"2aea84cb43f4479131620b3c3dfd7cebe9be36ba","modified":1566989305200},{"_id":"themes/archer/layout/_partial/base-footer.ejs","hash":"3a526d495f3380faf85892e42d59a87ac19d32db","modified":1568606156153},{"_id":"themes/archer/layout/_partial/base-social.ejs","hash":"2d068432031b3bebf9438c775370a2d1b4492d6b","modified":1566989305201},{"_id":"themes/archer/layout/_partial/base-title-tags.ejs","hash":"418559ab11726f69621c3a58cd21903adff1e48e","modified":1566989305201},{"_id":"themes/archer/layout/_partial/base-head.ejs","hash":"f2e8d4dfd11d879491a4b10f74f8c886cd392240","modified":1568949307693},{"_id":"themes/archer/layout/_partial/base-profile.ejs","hash":"c5b34e7edd135f0c3970cd746263ed1679f41af4","modified":1567059592519},{"_id":"themes/archer/layout/_partial/intro-height.ejs","hash":"cd0d34a811dc4666980d57c00d70dd82bd5450eb","modified":1566989305202},{"_id":"themes/archer/source/assets/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1566989305208},{"_id":"themes/archer/source/assets/loading.svg","hash":"45be17d07697d604d8981890eb21e308530c7a38","modified":1566989305208},{"_id":"themes/archer/source/assets/Home.svg","hash":"6c172208dd4e5b4c997c4ea830c0f340a3d0e267","modified":1568953628631},{"_id":"themes/archer/source/assets/favicon.ico","hash":"f46fc2c74d1eca053022ce404ea79ee7b0ffb7af","modified":1567155394087},{"_id":"themes/archer/source/assets/qr.png","hash":"cfe2c27eeee47b5b25072167b19b56dd5f0134f3","modified":1566991188244},{"_id":"themes/archer/source/css/mobile.css","hash":"51d7b5cf26c8f82a3daad4bc55518673fdf281f5","modified":1566989305209},{"_id":"themes/archer/source/avatar/logo.jpg","hash":"38450b286f7ec1a526fec5e557f58106e127eec9","modified":1567155568021},{"_id":"themes/archer/source/css/style.css","hash":"c5c4148e5041afafd1fabdebd80d156379e7b7a6","modified":1568606432330},{"_id":"themes/archer/source/font/Source Sans Pro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1566989305211},{"_id":"themes/archer/source/font/Source Sans Pro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1566989305211},{"_id":"themes/archer/source/intro/.DS_Store","hash":"f2e2b1d02471a3df83adf04897c9afdb9b1d49b5","modified":1566994101546},{"_id":"themes/archer/source/lib/webfontloader.min.js","hash":"bc6ffe9c0d8b3285564619a445c6ca575eb9d0f5","modified":1566989305221},{"_id":"themes/archer/source/scripts/main.js","hash":"e89a9651131684204118fa74bd19cb781d76a372","modified":1566989305221},{"_id":"themes/archer/source/scripts/search.js","hash":"d5f739e261e8ce74f993c6157b248663bda122bf","modified":1566989305222},{"_id":"themes/archer/src/js/browser.js","hash":"ce061db99db5b880db0ddb768246352ca885b13c","modified":1566989305224},{"_id":"themes/archer/src/js/fancybox.js","hash":"0daf0e83deca055102268e3bd95cb1962acc2264","modified":1566989305225},{"_id":"themes/archer/source/scripts/share.js","hash":"bb5bb37ce7f47f8c084b232df3e5fe2378d7ca01","modified":1566989305223},{"_id":"themes/archer/src/js/init.js","hash":"346c6ef75ae85e4350c1b0811985172fdaa0d3a5","modified":1566989305225},{"_id":"themes/archer/src/js/initSidebar.js","hash":"b25615ff254913db83e2a20263d445f35083843b","modified":1566989305225},{"_id":"themes/archer/src/js/main.js","hash":"e1a48d5822326792e38d44efee86e01473549eba","modified":1566989305226},{"_id":"themes/archer/src/js/mobile.js","hash":"228a68d851517b5e47d2132f1d499cb812a64171","modified":1566989305226},{"_id":"themes/archer/src/js/scroll.js","hash":"aa2315a80daaa183a7e462c7e879ff9d2f050933","modified":1566989305226},{"_id":"themes/archer/src/js/search.js","hash":"2e59ac745da7c22801d9029cf9904a4fc3c384f1","modified":1566989305227},{"_id":"themes/archer/src/js/share.js","hash":"1314b19a852e291e35d6809f7f58652d3e7c524c","modified":1566989305227},{"_id":"themes/archer/src/js/sidebar.js","hash":"68d5fe0ee5e86df810d304e5efe11e5e1fddc46d","modified":1566989305227},{"_id":"themes/archer/src/js/tag.js","hash":"e0f0a914c02922e42977d78dc4993b3855167cd8","modified":1566989305228},{"_id":"themes/archer/src/js/toc.js","hash":"b3482031e4c8728535d480bfaec76229469e3aba","modified":1566989305228},{"_id":"themes/archer/src/js/util.js","hash":"27de6446892bcf399430dd5776df0b8759ca0eea","modified":1566989305228},{"_id":"themes/archer/src/scss/_common.scss","hash":"dedc313b082e0a16daf87213badd21b13be11af8","modified":1566989305228},{"_id":"themes/archer/src/scss/_mixin.scss","hash":"e7deb20a16868ae9d3e35ba3c5693de71fdf6999","modified":1566989305229},{"_id":"themes/archer/src/scss/_normalize.scss","hash":"a2dbeb38ad08bb8975856d75954cc697bf8e5ff7","modified":1566989305229},{"_id":"themes/archer/src/scss/_variables.scss","hash":"136e5d990c4f8eadf6cabdfa5a053941e90bcd20","modified":1566989305235},{"_id":"themes/archer/src/scss/style.scss","hash":"78e31370d45089b97fa91929345f1a29f2e6a0a2","modified":1566989305235},{"_id":"themes/archer/src/scss/mobile.scss","hash":"aadc2fbf37fefc2ad391d8172d5b61817f9db0c5","modified":1566989305235},{"_id":"source/images/travis.png","hash":"52333b84a76abf24152585bf0045b279ef3e0f35","modified":1567337141690},{"_id":"themes/archer/layout/_partial/comment/custom.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1566989305201},{"_id":"themes/archer/source/font/Oswald-Regular.ttf","hash":"965d729546a43a8490ad4cf33c25ac475682100c","modified":1566989305211},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff","hash":"12eef75e1ad3eca9dae42b65505010ce4464a315","modified":1566989305212},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff2","hash":"f5991289ec17884cb641da0646d278d36702a190","modified":1566989305213},{"_id":"themes/archer/source/intro/404-bg.jpg","hash":"3afb5bb26f4ff0bd0e0a28df955c8aa7d746d3c5","modified":1566989305214},{"_id":"themes/archer/source/lib/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1566989305220},{"_id":"themes/archer/package-lock.json","hash":"89a3b67d32f6916cdc21d590d87e43d8a44be8c3","modified":1566989305207},{"_id":"themes/archer/layout/_partial/comment/changyan.ejs","hash":"7691642fb9375607e0ac988a7420999e242cb2c9","modified":1566989305201},{"_id":"themes/archer/layout/_partial/comment/gitment.ejs","hash":"794647a8a4ac9e1d01d74c07717175a141b1e01c","modified":1566989305201},{"_id":"themes/archer/layout/_partial/comment/disqus.ejs","hash":"cadd97820a23d01d8b7e2f19a86e5290cef5a8a6","modified":1566989305201},{"_id":"themes/archer/layout/_partial/comment/livere.ejs","hash":"b27469f19f35ec2037c7bce736a12e9dfb5e360b","modified":1566989305202},{"_id":"themes/archer/layout/_partial/comment/valine.ejs","hash":"2154360e330dab94540e168e9d301c7b7091968e","modified":1566989305202},{"_id":"themes/archer/layout/_partial/comment/youyan.ejs","hash":"790d76f2667377db78a7d04bad8d629e47e7aab0","modified":1566989305202},{"_id":"themes/archer/layout/_partial/script/font-loader.ejs","hash":"291cc0a4a444a93b93c32e2c39383c70e36e46de","modified":1566989305202},{"_id":"themes/archer/layout/_partial/sidebar/base-sidebar.ejs","hash":"2d38af7cb5aabc0af99de239bd180c516ec4c56c","modified":1566989305203},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-archives.ejs","hash":"daa78b17a773bca569f1c8ca2c916495ca138da6","modified":1566989305203},{"_id":"themes/archer/layout/_partial/critical-css/critical-style.ejs","hash":"bbad4bf73858f50e99eb678d966cd6ee1d534408","modified":1566992802836},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-categories.ejs","hash":"147214469c4909eb94943599883f9fa0f3cc090d","modified":1566989305203},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-tags.ejs","hash":"d6e1a192cac5dcf365ce1a52df4f23feafeeb849","modified":1566989305203},{"_id":"themes/archer/source/avatar/avtar.jpg","hash":"8d693792ba6e95b9eeefcfd62cb30e4ad91af519","modified":1566993846251},{"_id":"themes/archer/src/scss/_partial/_404.scss","hash":"a2b56f441a9a44d7f5b9b41eaa8136321328d7e9","modified":1566989305229},{"_id":"themes/archer/src/scss/_partial/_algolia.scss","hash":"c679578d2feb0bd7d3f80c2f693ba58cbca4428b","modified":1566989305230},{"_id":"themes/archer/src/scss/_partial/_index-page.scss","hash":"fa993cf0bbe0086cd8ec3d9a639b2d5b28ccfa8e","modified":1566989305230},{"_id":"themes/archer/src/scss/_partial/_post-page.scss","hash":"7c557844850d53cc4fc36aaf6d59847d8f238947","modified":1566989305232},{"_id":"themes/archer/docs/snap.png","hash":"0b2a8bf016f6eed576abfdcdb7dcf8de51c12562","modified":1566989305199},{"_id":"themes/archer/source/intro/about-bg.jpg","hash":"ab388276822417cc4e703312c14e20280ec783b3","modified":1566989305216},{"_id":"themes/archer/source/intro/post-bg.jpg","hash":"525fafb2238c27754d8fa751f143ff1de9b8482d","modified":1566989305220},{"_id":"themes/archer/source/intro/bg.jpg","hash":"f028bd23507f9ef5d3aa2aec1913fccfa4e674d9","modified":1566993760559},{"_id":"themes/archer/src/scss/_partial/_partial/_footer.scss","hash":"726c543ee066e0b3222b236d9b4ef0109c0bdddf","modified":1566989305230},{"_id":"themes/archer/src/scss/_partial/_partial/_paginator.scss","hash":"67c2e697a5fbb3b8006cf358ea45eb7f75b496f8","modified":1566989305231},{"_id":"themes/archer/src/scss/_partial/_partial/_header.scss","hash":"77003ff22b1a10fae2d2768938277959b3f93a72","modified":1566989305230},{"_id":"themes/archer/src/scss/_partial/_partial/_intro.scss","hash":"a1569f39eccd64a12425d81b794c53df126a4d87","modified":1566989305231},{"_id":"themes/archer/src/scss/_partial/_partial/_scrollbar.scss","hash":"f2514031f9d7e4ed4a126694e78618ce6ff3a574","modified":1566989305232},{"_id":"themes/archer/src/scss/_partial/_post/_code.scss","hash":"9c9a4e470da8732c9a3be3d5ce0d2f80f53714fe","modified":1566989305233},{"_id":"themes/archer/src/scss/_partial/_partial/_profile.scss","hash":"0c986b52ce9083f08c37c5c9b5de045ac5e1d2fa","modified":1566989305231},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar-archive.scss","hash":"14bc42292873880c61b5fa9f47ee9d2e08d46871","modified":1566989305233},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar-tags.scss","hash":"9ab6f96d0df0c4ad4c72e2515fa2599d487d8f1a","modified":1566989305234},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar.scss","hash":"981a94978535769cb51c29e12b627f83c6fcedc5","modified":1566989305234},{"_id":"themes/archer/source/intro/index-bg.jpg","hash":"96b52e177b8bc53e64ec6ee1e10b2b6a4e13083b","modified":1566989305218}],"Category":[{"name":"daily","_id":"ck0wfvhpx0002uhox59huamsw"},{"name":"devOps","_id":"ck0wfvhq10007uhox4jnzsuk8"},{"name":"NODE","_id":"ck0wfvhq2000auhoxx391gi8r"},{"name":"JavaScript","_id":"ck0wfvhr40014uhox3l59jkwb"}],"Data":[],"Page":[{"title":"I'm Cooper","date":"2019-08-29T06:58:14.000Z","layout":"about","_content":"\n> åœ¨æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ï¼Œæˆ‘æœ‰å¥½å¤šå¥¢æœ›ã€‚\n> æˆ‘æƒ³çˆ±ï¼Œæƒ³åƒï¼Œè¿˜æƒ³åœ¨ä¸€ç¬é—´å˜æˆå¤©ä¸ŠåŠæ˜åŠæš—çš„äº‘ã€‚\n> åæ¥æˆ‘æ‰çŸ¥é“ï¼Œç”Ÿæ´»å°±æ˜¯ä¸ªç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ã€‚\n> äººä¸€å¤©å¤©è€ä¸‹å»ï¼Œå¥¢æœ›ä¹Ÿä¸€å¤©å¤©æ¶ˆå¤±ï¼Œæœ€åå˜å¾—åƒæŒ¨äº†é”¤çš„ç‰›ä¸€æ ·ã€‚\n> æˆ‘å¸Œæœ›è‡ªå·±ä¼šæ°¸è¿œç”ŸçŒ›ä¸‹å»ï¼Œä»€ä¹ˆä¹Ÿé”¤ä¸äº†æˆ‘ã€‚ \n\n## é“ä»”\n<img src=\"https://github.com/huguobo/public/blob/master/avtar.jpg?raw=true\" width=\"25%\" style=\"margin: 0\">\n\n## åŸºæœ¬ä¿¡æ¯\n- ç”·\n- æ€§æ ¼å¼€æœ—\n- 1992 å¹´ç”Ÿäºº\n\n## å­¦ä¹ ç”Ÿæ¶¯\n- å‰æ—å¤§å­¦\n- è½¯ä»¶å·¥ç¨‹\n- ç¡•å£«\n\n## èŒä¸šä¿¡æ¯\n- å‰ç«¯å·¥ç¨‹å¸ˆ(å…¨å¹²å·¥ç¨‹å¸ˆ)\n\n### å·¥ä½œç»å†\n- 2017.7 ~ 2019.7 [ç¾å›¢ç‚¹è¯„](https://about.meituan.com/home) \n- 2019.8 ~ è‡³ä»Š [è…¾è®¯ç§‘æŠ€](https://www.tencent.com/zh-cn/index.html)\n\n### æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\n- Javascriptã€Css å’Œ HTML åŸºç¡€3ä»¶å¥—\n- åŸºäº Reactã€Vue ç­‰çš„æµè¡Œå‰ç«¯æ¡†æ¶\n- webpackã€gulp ç­‰å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·\n- å‰ç«¯ CI/CD æµç¨‹ï¼ŒåŸºç¡€ devOps\n- Node\n- Koaã€Express ç­‰ node å‰ç«¯æ¡†æ¶\n- Mysql curd\n- gitã€shellã€nginx ç­‰åŸºç¡€å·¥å…·\n\n## çŠ¶æ€\n- åœ¨èŒ\n- èº«ä½“è¿˜ç®—å¥åº·\n- å¿ƒç†éå¸¸å¥åº·\n- ä»·å€¼è§‚å¾ˆæ­£\n\n## çˆ±å¥½\n- ä¸»æœºæ¸¸æˆ\n- æ—…è¡Œ\n- ğŸ€\n- å‘å‘†\n\n## å…¶ä»–\n- å°è¯­ç§å­¦ä¹ ä¸­\n\n","source":"about/index.md","raw":"---\ntitle: I'm Cooper\ndate: 2019-08-29 14:58:14\nlayout: about\n---\n\n> åœ¨æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ï¼Œæˆ‘æœ‰å¥½å¤šå¥¢æœ›ã€‚\n> æˆ‘æƒ³çˆ±ï¼Œæƒ³åƒï¼Œè¿˜æƒ³åœ¨ä¸€ç¬é—´å˜æˆå¤©ä¸ŠåŠæ˜åŠæš—çš„äº‘ã€‚\n> åæ¥æˆ‘æ‰çŸ¥é“ï¼Œç”Ÿæ´»å°±æ˜¯ä¸ªç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ã€‚\n> äººä¸€å¤©å¤©è€ä¸‹å»ï¼Œå¥¢æœ›ä¹Ÿä¸€å¤©å¤©æ¶ˆå¤±ï¼Œæœ€åå˜å¾—åƒæŒ¨äº†é”¤çš„ç‰›ä¸€æ ·ã€‚\n> æˆ‘å¸Œæœ›è‡ªå·±ä¼šæ°¸è¿œç”ŸçŒ›ä¸‹å»ï¼Œä»€ä¹ˆä¹Ÿé”¤ä¸äº†æˆ‘ã€‚ \n\n## é“ä»”\n<img src=\"https://github.com/huguobo/public/blob/master/avtar.jpg?raw=true\" width=\"25%\" style=\"margin: 0\">\n\n## åŸºæœ¬ä¿¡æ¯\n- ç”·\n- æ€§æ ¼å¼€æœ—\n- 1992 å¹´ç”Ÿäºº\n\n## å­¦ä¹ ç”Ÿæ¶¯\n- å‰æ—å¤§å­¦\n- è½¯ä»¶å·¥ç¨‹\n- ç¡•å£«\n\n## èŒä¸šä¿¡æ¯\n- å‰ç«¯å·¥ç¨‹å¸ˆ(å…¨å¹²å·¥ç¨‹å¸ˆ)\n\n### å·¥ä½œç»å†\n- 2017.7 ~ 2019.7 [ç¾å›¢ç‚¹è¯„](https://about.meituan.com/home) \n- 2019.8 ~ è‡³ä»Š [è…¾è®¯ç§‘æŠ€](https://www.tencent.com/zh-cn/index.html)\n\n### æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\n- Javascriptã€Css å’Œ HTML åŸºç¡€3ä»¶å¥—\n- åŸºäº Reactã€Vue ç­‰çš„æµè¡Œå‰ç«¯æ¡†æ¶\n- webpackã€gulp ç­‰å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·\n- å‰ç«¯ CI/CD æµç¨‹ï¼ŒåŸºç¡€ devOps\n- Node\n- Koaã€Express ç­‰ node å‰ç«¯æ¡†æ¶\n- Mysql curd\n- gitã€shellã€nginx ç­‰åŸºç¡€å·¥å…·\n\n## çŠ¶æ€\n- åœ¨èŒ\n- èº«ä½“è¿˜ç®—å¥åº·\n- å¿ƒç†éå¸¸å¥åº·\n- ä»·å€¼è§‚å¾ˆæ­£\n\n## çˆ±å¥½\n- ä¸»æœºæ¸¸æˆ\n- æ—…è¡Œ\n- ğŸ€\n- å‘å‘†\n\n## å…¶ä»–\n- å°è¯­ç§å­¦ä¹ ä¸­\n\n","updated":"2019-08-30T10:04:12.263Z","path":"about/index.html","comments":1,"_id":"ck0wfvhr0000zuhoxn54qxxhy","content":"<blockquote>\n<p>åœ¨æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ï¼Œæˆ‘æœ‰å¥½å¤šå¥¢æœ›ã€‚<br>æˆ‘æƒ³çˆ±ï¼Œæƒ³åƒï¼Œè¿˜æƒ³åœ¨ä¸€ç¬é—´å˜æˆå¤©ä¸ŠåŠæ˜åŠæš—çš„äº‘ã€‚<br>åæ¥æˆ‘æ‰çŸ¥é“ï¼Œç”Ÿæ´»å°±æ˜¯ä¸ªç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ã€‚<br>äººä¸€å¤©å¤©è€ä¸‹å»ï¼Œå¥¢æœ›ä¹Ÿä¸€å¤©å¤©æ¶ˆå¤±ï¼Œæœ€åå˜å¾—åƒæŒ¨äº†é”¤çš„ç‰›ä¸€æ ·ã€‚<br>æˆ‘å¸Œæœ›è‡ªå·±ä¼šæ°¸è¿œç”ŸçŒ›ä¸‹å»ï¼Œä»€ä¹ˆä¹Ÿé”¤ä¸äº†æˆ‘ã€‚ </p>\n</blockquote>\n<h2 id=\"é“ä»”\"><a href=\"#é“ä»”\" class=\"headerlink\" title=\"é“ä»”\"></a>é“ä»”</h2><img src=\"https://github.com/huguobo/public/blob/master/avtar.jpg?raw=true\" width=\"25%\" style=\"margin: 0\">\n\n<h2 id=\"åŸºæœ¬ä¿¡æ¯\"><a href=\"#åŸºæœ¬ä¿¡æ¯\" class=\"headerlink\" title=\"åŸºæœ¬ä¿¡æ¯\"></a>åŸºæœ¬ä¿¡æ¯</h2><ul>\n<li>ç”·</li>\n<li>æ€§æ ¼å¼€æœ—</li>\n<li>1992 å¹´ç”Ÿäºº</li>\n</ul>\n<h2 id=\"å­¦ä¹ ç”Ÿæ¶¯\"><a href=\"#å­¦ä¹ ç”Ÿæ¶¯\" class=\"headerlink\" title=\"å­¦ä¹ ç”Ÿæ¶¯\"></a>å­¦ä¹ ç”Ÿæ¶¯</h2><ul>\n<li>å‰æ—å¤§å­¦</li>\n<li>è½¯ä»¶å·¥ç¨‹</li>\n<li>ç¡•å£«</li>\n</ul>\n<h2 id=\"èŒä¸šä¿¡æ¯\"><a href=\"#èŒä¸šä¿¡æ¯\" class=\"headerlink\" title=\"èŒä¸šä¿¡æ¯\"></a>èŒä¸šä¿¡æ¯</h2><ul>\n<li>å‰ç«¯å·¥ç¨‹å¸ˆ(å…¨å¹²å·¥ç¨‹å¸ˆ)</li>\n</ul>\n<h3 id=\"å·¥ä½œç»å†\"><a href=\"#å·¥ä½œç»å†\" class=\"headerlink\" title=\"å·¥ä½œç»å†\"></a>å·¥ä½œç»å†</h3><ul>\n<li>2017.7 ~ 2019.7 <a href=\"https://about.meituan.com/home\" target=\"_blank\" rel=\"noopener\">ç¾å›¢ç‚¹è¯„</a> </li>\n<li>2019.8 ~ è‡³ä»Š <a href=\"https://www.tencent.com/zh-cn/index.html\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ç§‘æŠ€</a></li>\n</ul>\n<h3 id=\"æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\"><a href=\"#æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\" class=\"headerlink\" title=\"æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\"></a>æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰</h3><ul>\n<li>Javascriptã€Css å’Œ HTML åŸºç¡€3ä»¶å¥—</li>\n<li>åŸºäº Reactã€Vue ç­‰çš„æµè¡Œå‰ç«¯æ¡†æ¶</li>\n<li>webpackã€gulp ç­‰å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·</li>\n<li>å‰ç«¯ CI/CD æµç¨‹ï¼ŒåŸºç¡€ devOps</li>\n<li>Node</li>\n<li>Koaã€Express ç­‰ node å‰ç«¯æ¡†æ¶</li>\n<li>Mysql curd</li>\n<li>gitã€shellã€nginx ç­‰åŸºç¡€å·¥å…·</li>\n</ul>\n<h2 id=\"çŠ¶æ€\"><a href=\"#çŠ¶æ€\" class=\"headerlink\" title=\"çŠ¶æ€\"></a>çŠ¶æ€</h2><ul>\n<li>åœ¨èŒ</li>\n<li>èº«ä½“è¿˜ç®—å¥åº·</li>\n<li>å¿ƒç†éå¸¸å¥åº·</li>\n<li>ä»·å€¼è§‚å¾ˆæ­£</li>\n</ul>\n<h2 id=\"çˆ±å¥½\"><a href=\"#çˆ±å¥½\" class=\"headerlink\" title=\"çˆ±å¥½\"></a>çˆ±å¥½</h2><ul>\n<li>ä¸»æœºæ¸¸æˆ</li>\n<li>æ—…è¡Œ</li>\n<li>ğŸ€</li>\n<li>å‘å‘†</li>\n</ul>\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><ul>\n<li>å°è¯­ç§å­¦ä¹ ä¸­</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>åœ¨æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ï¼Œæˆ‘æœ‰å¥½å¤šå¥¢æœ›ã€‚<br>æˆ‘æƒ³çˆ±ï¼Œæƒ³åƒï¼Œè¿˜æƒ³åœ¨ä¸€ç¬é—´å˜æˆå¤©ä¸ŠåŠæ˜åŠæš—çš„äº‘ã€‚<br>åæ¥æˆ‘æ‰çŸ¥é“ï¼Œç”Ÿæ´»å°±æ˜¯ä¸ªç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ã€‚<br>äººä¸€å¤©å¤©è€ä¸‹å»ï¼Œå¥¢æœ›ä¹Ÿä¸€å¤©å¤©æ¶ˆå¤±ï¼Œæœ€åå˜å¾—åƒæŒ¨äº†é”¤çš„ç‰›ä¸€æ ·ã€‚<br>æˆ‘å¸Œæœ›è‡ªå·±ä¼šæ°¸è¿œç”ŸçŒ›ä¸‹å»ï¼Œä»€ä¹ˆä¹Ÿé”¤ä¸äº†æˆ‘ã€‚ </p>\n</blockquote>\n<h2 id=\"é“ä»”\"><a href=\"#é“ä»”\" class=\"headerlink\" title=\"é“ä»”\"></a>é“ä»”</h2><img src=\"https://github.com/huguobo/public/blob/master/avtar.jpg?raw=true\" width=\"25%\" style=\"margin: 0\">\n\n<h2 id=\"åŸºæœ¬ä¿¡æ¯\"><a href=\"#åŸºæœ¬ä¿¡æ¯\" class=\"headerlink\" title=\"åŸºæœ¬ä¿¡æ¯\"></a>åŸºæœ¬ä¿¡æ¯</h2><ul>\n<li>ç”·</li>\n<li>æ€§æ ¼å¼€æœ—</li>\n<li>1992 å¹´ç”Ÿäºº</li>\n</ul>\n<h2 id=\"å­¦ä¹ ç”Ÿæ¶¯\"><a href=\"#å­¦ä¹ ç”Ÿæ¶¯\" class=\"headerlink\" title=\"å­¦ä¹ ç”Ÿæ¶¯\"></a>å­¦ä¹ ç”Ÿæ¶¯</h2><ul>\n<li>å‰æ—å¤§å­¦</li>\n<li>è½¯ä»¶å·¥ç¨‹</li>\n<li>ç¡•å£«</li>\n</ul>\n<h2 id=\"èŒä¸šä¿¡æ¯\"><a href=\"#èŒä¸šä¿¡æ¯\" class=\"headerlink\" title=\"èŒä¸šä¿¡æ¯\"></a>èŒä¸šä¿¡æ¯</h2><ul>\n<li>å‰ç«¯å·¥ç¨‹å¸ˆ(å…¨å¹²å·¥ç¨‹å¸ˆ)</li>\n</ul>\n<h3 id=\"å·¥ä½œç»å†\"><a href=\"#å·¥ä½œç»å†\" class=\"headerlink\" title=\"å·¥ä½œç»å†\"></a>å·¥ä½œç»å†</h3><ul>\n<li>2017.7 ~ 2019.7 <a href=\"https://about.meituan.com/home\" target=\"_blank\" rel=\"noopener\">ç¾å›¢ç‚¹è¯„</a> </li>\n<li>2019.8 ~ è‡³ä»Š <a href=\"https://www.tencent.com/zh-cn/index.html\" target=\"_blank\" rel=\"noopener\">è…¾è®¯ç§‘æŠ€</a></li>\n</ul>\n<h3 id=\"æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\"><a href=\"#æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\" class=\"headerlink\" title=\"æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰\"></a>æŠ€èƒ½ï¼ˆåˆ«é—®ï¼Œé—®å°±æ˜¯â€˜ç†Ÿæ‚‰â€™ï¼‰</h3><ul>\n<li>Javascriptã€Css å’Œ HTML åŸºç¡€3ä»¶å¥—</li>\n<li>åŸºäº Reactã€Vue ç­‰çš„æµè¡Œå‰ç«¯æ¡†æ¶</li>\n<li>webpackã€gulp ç­‰å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·</li>\n<li>å‰ç«¯ CI/CD æµç¨‹ï¼ŒåŸºç¡€ devOps</li>\n<li>Node</li>\n<li>Koaã€Express ç­‰ node å‰ç«¯æ¡†æ¶</li>\n<li>Mysql curd</li>\n<li>gitã€shellã€nginx ç­‰åŸºç¡€å·¥å…·</li>\n</ul>\n<h2 id=\"çŠ¶æ€\"><a href=\"#çŠ¶æ€\" class=\"headerlink\" title=\"çŠ¶æ€\"></a>çŠ¶æ€</h2><ul>\n<li>åœ¨èŒ</li>\n<li>èº«ä½“è¿˜ç®—å¥åº·</li>\n<li>å¿ƒç†éå¸¸å¥åº·</li>\n<li>ä»·å€¼è§‚å¾ˆæ­£</li>\n</ul>\n<h2 id=\"çˆ±å¥½\"><a href=\"#çˆ±å¥½\" class=\"headerlink\" title=\"çˆ±å¥½\"></a>çˆ±å¥½</h2><ul>\n<li>ä¸»æœºæ¸¸æˆ</li>\n<li>æ—…è¡Œ</li>\n<li>ğŸ€</li>\n<li>å‘å‘†</li>\n</ul>\n<h2 id=\"å…¶ä»–\"><a href=\"#å…¶ä»–\" class=\"headerlink\" title=\"å…¶ä»–\"></a>å…¶ä»–</h2><ul>\n<li>å°è¯­ç§å­¦ä¹ ä¸­</li>\n</ul>\n"},{"title":"tags","date":"2019-08-27T13:13:30.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2019-08-27 21:13:30\ntype: \"tags\"\n---\n","updated":"2019-08-27T13:14:38.021Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck0wfvhr20011uhoxf3hf4dxt","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"å…³äºåŒé©¬è°ˆè¯çš„æ„Ÿæ‚Ÿ","date":"2019-09-07T13:53:38.000Z","_content":"\nåˆšçœ‹å®ŒåŒé©¬å¯¹è¯çš„è§†é¢‘ã€‚\né©¬äº‘è·Ÿé©¬æ–¯å…‹çš„è§‚ç‚¹æ˜¯åŸºäºæœªæ¥è·Ÿç°åœ¨ã€æ˜¯å”¯å¿ƒä¸å”¯ç‰©ã€æ˜¯ä¸­å›½çš„ä¸­åº¸æ–‡åŒ–è·Ÿè¥¿æ–¹ç§‘å­¦ä¸¥è°¨çš„ç¢°æ’ã€‚\næ¯ä¸ªäººéƒ½æ˜¯ç‰¹å®šæ—¶ä»£åŠç¯å¢ƒçš„äº§ç‰©ï¼Œå°±ç®—ç‰›å¦‚é©¬äº‘åŠé©¬æ–¯å…‹ä¹Ÿä¸ä¾‹å¤–ã€‚\nä½†æ˜¯elonçš„ä¸€å¥è¯è®©æˆ‘æ›´ä¸ºå°è±¡æ·±åˆ»ï¼Œä¸ä»¥è¥åˆ©ä¸ºç›®çš„çš„ç«æ˜Ÿæ¢ç´¢ä¹Ÿå°è¯äº†è¿™å¥è¯çš„çœŸæ­£å«ä¹‰ã€‚ \n> é¢„æµ‹æœªæ¥æœ€å¥½çš„æ–¹æ³•æ˜¯åˆ›é€ æœªæ¥","source":"_posts/ElonAndJack.md","raw":"---\ntitle: å…³äºåŒé©¬è°ˆè¯çš„æ„Ÿæ‚Ÿ\ndate: 2019-09-07 21:53:38\ncategories: \n- daily\ntags:\n- æ—¥å¸¸\n- æ€è€ƒ\n---\n\nåˆšçœ‹å®ŒåŒé©¬å¯¹è¯çš„è§†é¢‘ã€‚\né©¬äº‘è·Ÿé©¬æ–¯å…‹çš„è§‚ç‚¹æ˜¯åŸºäºæœªæ¥è·Ÿç°åœ¨ã€æ˜¯å”¯å¿ƒä¸å”¯ç‰©ã€æ˜¯ä¸­å›½çš„ä¸­åº¸æ–‡åŒ–è·Ÿè¥¿æ–¹ç§‘å­¦ä¸¥è°¨çš„ç¢°æ’ã€‚\næ¯ä¸ªäººéƒ½æ˜¯ç‰¹å®šæ—¶ä»£åŠç¯å¢ƒçš„äº§ç‰©ï¼Œå°±ç®—ç‰›å¦‚é©¬äº‘åŠé©¬æ–¯å…‹ä¹Ÿä¸ä¾‹å¤–ã€‚\nä½†æ˜¯elonçš„ä¸€å¥è¯è®©æˆ‘æ›´ä¸ºå°è±¡æ·±åˆ»ï¼Œä¸ä»¥è¥åˆ©ä¸ºç›®çš„çš„ç«æ˜Ÿæ¢ç´¢ä¹Ÿå°è¯äº†è¿™å¥è¯çš„çœŸæ­£å«ä¹‰ã€‚ \n> é¢„æµ‹æœªæ¥æœ€å¥½çš„æ–¹æ³•æ˜¯åˆ›é€ æœªæ¥","slug":"ElonAndJack","published":1,"updated":"2019-09-08T02:25:07.239Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhps0000uhoxm4zeu14s","content":"<p>åˆšçœ‹å®ŒåŒé©¬å¯¹è¯çš„è§†é¢‘ã€‚<br>é©¬äº‘è·Ÿé©¬æ–¯å…‹çš„è§‚ç‚¹æ˜¯åŸºäºæœªæ¥è·Ÿç°åœ¨ã€æ˜¯å”¯å¿ƒä¸å”¯ç‰©ã€æ˜¯ä¸­å›½çš„ä¸­åº¸æ–‡åŒ–è·Ÿè¥¿æ–¹ç§‘å­¦ä¸¥è°¨çš„ç¢°æ’ã€‚<br>æ¯ä¸ªäººéƒ½æ˜¯ç‰¹å®šæ—¶ä»£åŠç¯å¢ƒçš„äº§ç‰©ï¼Œå°±ç®—ç‰›å¦‚é©¬äº‘åŠé©¬æ–¯å…‹ä¹Ÿä¸ä¾‹å¤–ã€‚<br>ä½†æ˜¯elonçš„ä¸€å¥è¯è®©æˆ‘æ›´ä¸ºå°è±¡æ·±åˆ»ï¼Œä¸ä»¥è¥åˆ©ä¸ºç›®çš„çš„ç«æ˜Ÿæ¢ç´¢ä¹Ÿå°è¯äº†è¿™å¥è¯çš„çœŸæ­£å«ä¹‰ã€‚ </p>\n<blockquote>\n<p>é¢„æµ‹æœªæ¥æœ€å¥½çš„æ–¹æ³•æ˜¯åˆ›é€ æœªæ¥</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>åˆšçœ‹å®ŒåŒé©¬å¯¹è¯çš„è§†é¢‘ã€‚<br>é©¬äº‘è·Ÿé©¬æ–¯å…‹çš„è§‚ç‚¹æ˜¯åŸºäºæœªæ¥è·Ÿç°åœ¨ã€æ˜¯å”¯å¿ƒä¸å”¯ç‰©ã€æ˜¯ä¸­å›½çš„ä¸­åº¸æ–‡åŒ–è·Ÿè¥¿æ–¹ç§‘å­¦ä¸¥è°¨çš„ç¢°æ’ã€‚<br>æ¯ä¸ªäººéƒ½æ˜¯ç‰¹å®šæ—¶ä»£åŠç¯å¢ƒçš„äº§ç‰©ï¼Œå°±ç®—ç‰›å¦‚é©¬äº‘åŠé©¬æ–¯å…‹ä¹Ÿä¸ä¾‹å¤–ã€‚<br>ä½†æ˜¯elonçš„ä¸€å¥è¯è®©æˆ‘æ›´ä¸ºå°è±¡æ·±åˆ»ï¼Œä¸ä»¥è¥åˆ©ä¸ºç›®çš„çš„ç«æ˜Ÿæ¢ç´¢ä¹Ÿå°è¯äº†è¿™å¥è¯çš„çœŸæ­£å«ä¹‰ã€‚ </p>\n<blockquote>\n<p>é¢„æµ‹æœªæ¥æœ€å¥½çš„æ–¹æ³•æ˜¯åˆ›é€ æœªæ¥</p>\n</blockquote>\n"},{"title":"Travis-CI æŒç»­é›†æˆ hexo åˆ°äº‘æœåŠ¡å™¨","date":"2019-09-01T10:35:40.000Z","_content":"\n> çƒ¦ï¼šæ¯æ¬¡æœ¬åœ°æäº¤ä»£ç åˆ° GitHub ä¸Šåè¿˜è¦è‡ªå·±æ‰‹åŠ¨åŒæ­¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨ï¼Œå®Œæˆæ‰€è°“çš„éƒ¨ç½²å·¥ä½œæœ‰ç‚¹éº»çƒ¦å’Œè„±èŠ‚ã€‚\n> æ‡’ï¼šç¨‹åºå‘˜ç­‰æ‰€æœ‰è‡ªç§°å·¥ç¨‹å¸ˆè¿›æ­¥çš„å…ˆå†³åŠ¨åŠ›ï¼Œæƒ³å®ç°ä¸€ä¸ªæˆ‘æ¯æ¬¡æäº¤ä»£ç åï¼Œåé¢çš„æ„å»ºï¼Œæ‰“åŒ…å’Œéƒ¨ç½²éƒ½è‡ªåŠ¨è¿›è¡Œçš„æµç¨‹ã€‚\n> å› ä¸ºæœ¬èº«ä»£ç æ‰˜ç®¡åœ¨ Github ä¸Šï¼Œæ‰€ä»¥å°±å¼€å§‹æŠ˜è…¾ Travis-CIäº†ã€‚\n\n\n## ä»€ä¹ˆæ˜¯CI\næŒç»­é›†æˆæœåŠ¡ï¼ˆContinuous Integrationï¼Œç®€ç§° CIï¼‰ã€‚\nä¸€èˆ¬æŒ‡çš„æ˜¯æä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œè§„èŒƒæ£€æŸ¥ï¼ŒåŸºäºç¯å¢ƒçš„æ„å»ºï¼ŒæœåŠ¡éƒ¨ç½²ç­‰æµæ°´çº¿ä½œä¸šã€‚\næŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚\nå¦å¤–ï¼Œè¿™ä¸ªæ˜¯å·¥ç¨‹åŒ–å®è·µï¼Œå¦‚æœä½ è§‰å¾—è‡ªå·±æ‰‹åŠ¨æ“ä½œæ¯”æ•´è¿™äº›ç¹ççš„æµç¨‹æ–¹ä¾¿å¤šäº†ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\n## Travis CI \n[Travis CI](https://travis-ci.com/) å¯¹ Github ä¸Šçš„å¼€æºé¡¹ç›®æä¾›å…è´¹æœåŠ¡ï¼Œè¿™è¦æ±‚å¿…é¡»æœ‰ Github è´¦å·ã€‚ç•Œé¢ä¹Ÿå¾ˆèµ~ï¼Œè®©æˆ‘æƒ³èµ·äº†å‰ä¸œå®¶çš„ PLUS å‘å¸ƒç³»ç»Ÿã€‚ \n![travis](/images/travis.png)\nå¯ä»¥ä½¿ç”¨ github è´¦å·ç›´æ¥ç™»å½•ï¼Œ public çš„ä»“åº“ä¹Ÿç›´æ¥åŒæ­¥åˆ° Travis ä¸Šäº†ï¼Œ é€‰æ‹©æƒ³å¼€å¯ Travis CI çš„ä»“åº“ï¼Œæ‰“å¼€å¼€å…³å³å¯ã€‚è¯¦ç»†é…ç½®ä¸ç»†è¯´äº†ï¼Œå›¾å½¢åŒ–ç•Œé¢ï¼Œè¿›å»å°±çŸ¥é“äº†ã€‚\n\n### .travis.yml\nTravis-CIé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚\næ”¯æŒå¤šç§è¯­è¨€ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ `language: node_js`\nä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ\n\n```bash\nbefore_install\ninstall\nbefore_script\nscript\naftersuccess or afterfailure\n[OPTIONAL] before_deploy\n[OPTIONAL] deploy\n[OPTIONAL] after_deploy\nafter_script\n```\nè¯¦ç»†é…ç½®å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://docs.travis-ci.com)\n\n## ä¸€äº›å‡†å¤‡å·¥ä½œ\nç”±äºåé¢çš„å…å¯†ç™»å½•å’Œéƒ¨ç½²æµç¨‹ä¼šæ¶‰åŠä¸€äº›ç¯å¢ƒå’Œé…ç½®ç±»çš„æ“ä½œï¼Œè¿™ä¸ªéƒ¨åˆ†ä»‹ç»ä¸‹å‰ç½®æ¡ä»¶ã€‚\n\n### SCPå‘½ä»¤\nscp å‘½ä»¤ç”¨äºlinuxä¸‹çš„è·¨ä¸»æœºä¹‹é—´çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶\nåœ¨é¦–æ¬¡è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œä¼šå¼¹å‡ºå…¬é’¥ç¡®è®¤çš„æç¤ºã€‚è¿™ä¼šå¯¼è‡´æŸäº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç”±äºåˆæ¬¡è¿æ¥æœåŠ¡å™¨è€Œå¯¼è‡´è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸­æ–­ï¼Œ\nå¯åœ¨ StrictHostKeyCheckingé€‰é¡¹ï¼Œç”¨ -o å‚æ•°æŒ‡å®šåï¼Œåˆ™ä¸æ£€æŸ¥è¯¥é¡¹ã€‚\n\n```bash\nscp [å¯é€‰å‚æ•°] file_source file_target\n#å°†publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°$DEPLOY_IPä¸‹çš„/path/to/blogç›®å½•ä¸­ã€‚ä¸æ£€æŸ¥keyï¼Œ\nscp -o StrictHostKeyChecking=no -r public/*  user@$DEPLOY_IP:/path/to/blog/\n#å¯ç”¨-iæŒ‡å®šç§é’¥ã€‚\nscp -o  StrictHostKeyChecking=no -i .ssh/id_rsa yourfile user@destinate_ip:/dest_folder\n#æˆ–å°†è‡ªå·±çš„å…¬é’¥æ”¾åˆ°ç›®æ ‡æœºçš„authorized_keysæ–‡ä»¶é‡Œï¼Œä½¿è‡ªå·±ä¸ºç›®æ ‡æœºçš„ä¿¡ä»»æœºå™¨ï¼Œå®ç°æ— å¯†ç ç™»å½•\n#è¿™ä¸ªæ˜¯åœ¨ç”Ÿæˆssh key åï¼Œå°†å…¬é’¥æ”¾åˆ°authorized_keysæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨å¯†é’¥å¯¹å¯ä»¥å®ç°ä¸è¾“å…¥å¯†ç \ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n```\n\n### rsync å‘½ä»¤\næœ€ç»ˆé‡‡ç”¨äº† rsync å‘½ä»¤ï¼Œæˆ‘è§‰å¾—éƒ½è¡Œï¼Œä¸»è¦æ˜¯è¿™ä¸ªåŒæ­¥æˆåŠŸäº†ã€‚\n```bash\nrsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n```\n\n### centOSä½¿ç”¨gem\nå› ä¸ºåé¢è¦ä½¿ç”¨ `gem install travis` ,æ‰€ä»¥å¯èƒ½ä¼šéœ€è¦ å‡çº§ ruby å’Œ åˆ‡æ¢ gem æºï¼ˆäº²æµ‹ ruby ç‰ˆæœ¬ä½ä¼šå®‰è£…æŠ¥é”™ï¼Œgem ç”¨å®˜æ–¹æºçœŸçš„æ˜¯åŠ¨éƒ½ä¸åŠ¨å•Šï¼Œå¤ªéš¾äº†ï¼‰\n\n\n#### åˆ‡æ¢gemæº\n```bash\n$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/\n$ gem sources -l\nhttps://gems.ruby-china.com\n# ç¡®ä¿åªæœ‰ gems.ruby-china.com\n$ gem update --system \n$ gem -v\n2.6.3\n```\n#### å‡çº§Ruby\nå®‰è£…[RAM](https://rvm.io/), ä¸€æ¬¾rubyç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼ node çš„ nvmã€‚\n```bash\ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\ncurl -sSL https://get.rvm.io | bash -s stable\nsource /etc/profile.d/rvm.sh\nrvm -v\n```\n\nå®‰è£…æ–°ç‰ˆ ruby\n```bash\nrvm install 2.6\n```\n\n## è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\nå¯¹äºé¡¹ç›®çš„æ„å»ºæ¥è¯´éƒ½æ˜¯ æ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­å†™å¥½çš„è„šæœ¬ï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½ å°±æ˜¯ `npm install && hexo clean && hexo g`, é‚£ä¹ˆæ€ä¹ˆæ‰§è¡Œæœ€åä¸€æ­¥ï¼ŒæŠŠæ–‡ä»¶åŒæ­¥ä¼ è¾“åˆ° äº‘æœåŠ¡å™¨ä¸Šå‘¢ã€‚ æˆ‘ä»¬ä½¿ç”¨CIå°±æ˜¯æ‰‹åŠ¨è¿‡ç¨‹å¤ªç¹çï¼Œé‡å¤æ²¡æœ‰æ„ä¹‰ï¼Œæ€ä¹ˆå®ç° `å…å¯†` éƒ¨ç½²å‘¢ã€‚\n\nç™»å½•åˆ° `äº‘æœåŠ¡å™¨(centOS 7.x)`,è¿›è¡Œå¦‚ä¸‹æ“ä½œ\n### gem install travis å¹¶ç™»å½•\n```bash\ngem install travis #  è¿™æ­¥å¤±è´¥çš„è¯è¯·çœ‹ä¸Šé¢å…³äºå‡çº§rubyå’Œåˆ‡æ¢gemæºçš„éƒ¨åˆ†\ntravis login\n```\nç™»å½• github è´¦å·å¯†ç ï¼Œè¿™ä¸ªå®‰å…¨ç›´æ¥è¿æ¥çš„ github æœåŠ¡\n![login](/images/login.png)\n\n### ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis \nè¿›åˆ°äº‘æœåŠ¡å™¨å¯¹åº”çš„ git ä»“åº“ç›®å½•é‡Œ\n```bash\nssh-keygen -t rsa -b 4096 -C 'build@travis-ci.org' -f ./deploy_rsa\ntravis encrypt-file deploy_rsa --add\nssh-copy-id -i deploy_rsa.pub <ssh-user>@<deploy-host>\n\nrm -f deploy_rsa deploy_rsa.pub\ngit add deploy_rsa.enc .travis.yml\n```\né¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `deploy_rsa.enc` æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åŠ å¯†çš„ç§é’¥æ–‡ä»¶ï¼Œ `.travis.yml` æ˜¯æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚\n$encrypted_XXXXXX_key å’Œ $encrypted_XXXXXXXX_iv æ˜¯travis å¸®å¿™ç”Ÿæˆçš„ç¯å¢ƒå˜é‡ï¼Œå·²ç»åŒæ­¥åˆ° huguobo/hexo-blog è¿™ä¸ªé¡¹ç›®ä¸Šäº†ã€‚\n![iv](/images/iv.png)\n\nè¿˜æœ‰ä¸€ç‚¹å¯èƒ½ä¼šç”¨ä¸Šï¼Œå› ä¸º travis ç¬¬ä¸€æ¬¡ç™»å½•è¿œç¨‹æœåŠ¡å™¨ä¼šå‡ºç° SSH ä¸»æœºéªŒè¯ï¼Œè¿™è¾¹ä¼šæœ‰ä¸€ä¸ªä¸»æœºä¿¡ä»»é—®é¢˜ã€‚å®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æ·»åŠ  addons é…ç½®ï¼Œç„¶åä¿®æ”¹ .travis.yml çš„ç›¸å…³é…ç½®\n```bash\naddons:\n  ssh_known_hosts: your-ip\n\nbefore_deploy:\n- openssl aes-256-cbc -K $encrypted_<...>_key -iv $encrypted_<...>_iv -in deploy_rsa.enc -out /tmp/deploy_rsa -d\n- eval \"$(ssh-agent -s)\"\n- chmod 600 /tmp/deploy_rsa\n- ssh-add /tmp/deploy_rsa\n```\n\næœ€ç»ˆçš„éƒ¨ç½²é…ç½®, æˆ‘çš„æ˜¯é™æ€é¡µé¢ï¼Œéƒ¨ç½²å°±æ˜¯åŒæ­¥æ–‡ä»¶åˆ°æœåŠ¡å™¨å›ºå®šç›®å½•ï¼Œç”¨çš„æ˜¯ `rsync`ï¼Œå…¶ä¸­ -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" å‚æ•°å¯ä»¥è·³è¿‡ç¬¬ä¸€æ¬¡ç™»å½•çš„éªŒè¯ã€‚\n```bash\ndeploy:\n  provider: script\n  skip_cleanup: true\n  script: rsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n  on:\n    branch: master\n```\nå…¶ä»–çš„ yml é…ç½®éœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µé…ç½®äº†~\n\n## æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®\n\n```bash\nlanguage: node_js\n\nnode_js:\n  - \"10\"\n\ncache:\n  apt: true\n  directories:\n    - node_modules\n\naddons:\n  ssh_known_hosts: $DEPLOY_IP\n\ninstall:\n  - npm install hexo-cli@2.0.0 -g\n  - npm install\n\nscript:\n  - hexo clean \n  - hexo g\n\nbefore_deploy:\n- openssl aes-256-cbc -K $encrypted_25ad2a76f550_key -iv $encrypted_25ad2a76f550_iv -in deploy_rsa.enc -out deploy_rsa -d\n- eval \"$(ssh-agent -s)\"\n- chmod 600 deploy_rsa\n- ssh-add deploy_rsa\n\ndeploy:\n  provider: script\n  skip_cleanup: true\n  script: rsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n  on:\n    branch: master\n\n# deploy:\n#   provider: script\n#   skip_cleanup: true\n#   script: scp -o StrictHostKeyChecking=no -r public/*  root@$DEPLOY_IP:/opt/hexoBlog/\n#   on:\n#      branch: master\n\nbranches:\n  only:\n    - master\n\nnotifications:\n  email:\n    - huguobo2010@126.com\n  on_success: change\n  on_failure: always\n```\n\n## æ€»ç»“\næŠ˜è…¾äº†å¤§åŠå¤©ï¼Œç»ˆäºçœ‹åˆ°äº† CI-Success çš„é‚®ä»¶, ç½‘ç«™ä¹Ÿæ˜¯æˆåŠŸçš„çŠ¶æ€ï¼Œäº‘ä¸»æœºå¯¹åº”ç›®å½•çš„æ–‡ä»¶ä¹Ÿç¡®å®æ›´æ–°äº†ã€‚\nä»¥åå†™åšå®¢ ç»ˆäº åªç”¨ git push ï¼Œå…¶ä»–çš„ç­‰é‚®ä»¶é€šçŸ¥äº†~~\nå¦å¤– æ–‡ä¸­çš„ id_rsa.enc æ–‡ä»¶ä¸€å¼€å§‹æˆ‘ç›´æ¥ vim å¤åˆ¶çš„éƒ½æ˜¯ä¹±ç ï¼Œä¸€å¼€å§‹ä¸€ç›´æŠ¥é”™ `bad decrypt` ï¼Œåæ¥ä¸Šä¸»æœº git clone ä»“åº“ç›´æ¥ä»“åº“å†…ç”Ÿæˆå¹¶æ·»åŠ çš„ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªå‘ç‚¹ã€‚\nè¿˜æœ‰æœ€åç”¨ `rsync` ä»£æ›¿äº† `scp`\næœ€åä¹ŸæŠŠ openssl æ”¾åœ¨äº† before_deploy é˜¶æ®µï¼Œæ”¾åœ¨ before_installä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œè¿™äº›éƒ½æ˜¯å› äººè€Œå¼‚å•¦ã€‚\n![success](/images/success.png)\n\n## å‚è€ƒæ–‡ç« \n- https://oncletom.io/2016/travis-ssh-deploy/\n- http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html\n- https://gems.ruby-china.com/","source":"_posts/Travis-CIæŒç»­é›†æˆHexoåˆ°äº‘æœåŠ¡å™¨.md","raw":"---\ntitle: Travis-CI æŒç»­é›†æˆ hexo åˆ°äº‘æœåŠ¡å™¨\ndate: 2019-09-01 18:35:40\ncategories: \n- devOps\ntags:\n- travis\n- CI\n- hexo\n- gem\n---\n\n> çƒ¦ï¼šæ¯æ¬¡æœ¬åœ°æäº¤ä»£ç åˆ° GitHub ä¸Šåè¿˜è¦è‡ªå·±æ‰‹åŠ¨åŒæ­¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨ï¼Œå®Œæˆæ‰€è°“çš„éƒ¨ç½²å·¥ä½œæœ‰ç‚¹éº»çƒ¦å’Œè„±èŠ‚ã€‚\n> æ‡’ï¼šç¨‹åºå‘˜ç­‰æ‰€æœ‰è‡ªç§°å·¥ç¨‹å¸ˆè¿›æ­¥çš„å…ˆå†³åŠ¨åŠ›ï¼Œæƒ³å®ç°ä¸€ä¸ªæˆ‘æ¯æ¬¡æäº¤ä»£ç åï¼Œåé¢çš„æ„å»ºï¼Œæ‰“åŒ…å’Œéƒ¨ç½²éƒ½è‡ªåŠ¨è¿›è¡Œçš„æµç¨‹ã€‚\n> å› ä¸ºæœ¬èº«ä»£ç æ‰˜ç®¡åœ¨ Github ä¸Šï¼Œæ‰€ä»¥å°±å¼€å§‹æŠ˜è…¾ Travis-CIäº†ã€‚\n\n\n## ä»€ä¹ˆæ˜¯CI\næŒç»­é›†æˆæœåŠ¡ï¼ˆContinuous Integrationï¼Œç®€ç§° CIï¼‰ã€‚\nä¸€èˆ¬æŒ‡çš„æ˜¯æä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œè§„èŒƒæ£€æŸ¥ï¼ŒåŸºäºç¯å¢ƒçš„æ„å»ºï¼ŒæœåŠ¡éƒ¨ç½²ç­‰æµæ°´çº¿ä½œä¸šã€‚\næŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚\nå¦å¤–ï¼Œè¿™ä¸ªæ˜¯å·¥ç¨‹åŒ–å®è·µï¼Œå¦‚æœä½ è§‰å¾—è‡ªå·±æ‰‹åŠ¨æ“ä½œæ¯”æ•´è¿™äº›ç¹ççš„æµç¨‹æ–¹ä¾¿å¤šäº†ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\n## Travis CI \n[Travis CI](https://travis-ci.com/) å¯¹ Github ä¸Šçš„å¼€æºé¡¹ç›®æä¾›å…è´¹æœåŠ¡ï¼Œè¿™è¦æ±‚å¿…é¡»æœ‰ Github è´¦å·ã€‚ç•Œé¢ä¹Ÿå¾ˆèµ~ï¼Œè®©æˆ‘æƒ³èµ·äº†å‰ä¸œå®¶çš„ PLUS å‘å¸ƒç³»ç»Ÿã€‚ \n![travis](/images/travis.png)\nå¯ä»¥ä½¿ç”¨ github è´¦å·ç›´æ¥ç™»å½•ï¼Œ public çš„ä»“åº“ä¹Ÿç›´æ¥åŒæ­¥åˆ° Travis ä¸Šäº†ï¼Œ é€‰æ‹©æƒ³å¼€å¯ Travis CI çš„ä»“åº“ï¼Œæ‰“å¼€å¼€å…³å³å¯ã€‚è¯¦ç»†é…ç½®ä¸ç»†è¯´äº†ï¼Œå›¾å½¢åŒ–ç•Œé¢ï¼Œè¿›å»å°±çŸ¥é“äº†ã€‚\n\n### .travis.yml\nTravis-CIé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚\næ”¯æŒå¤šç§è¯­è¨€ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ `language: node_js`\nä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ\n\n```bash\nbefore_install\ninstall\nbefore_script\nscript\naftersuccess or afterfailure\n[OPTIONAL] before_deploy\n[OPTIONAL] deploy\n[OPTIONAL] after_deploy\nafter_script\n```\nè¯¦ç»†é…ç½®å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://docs.travis-ci.com)\n\n## ä¸€äº›å‡†å¤‡å·¥ä½œ\nç”±äºåé¢çš„å…å¯†ç™»å½•å’Œéƒ¨ç½²æµç¨‹ä¼šæ¶‰åŠä¸€äº›ç¯å¢ƒå’Œé…ç½®ç±»çš„æ“ä½œï¼Œè¿™ä¸ªéƒ¨åˆ†ä»‹ç»ä¸‹å‰ç½®æ¡ä»¶ã€‚\n\n### SCPå‘½ä»¤\nscp å‘½ä»¤ç”¨äºlinuxä¸‹çš„è·¨ä¸»æœºä¹‹é—´çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶\nåœ¨é¦–æ¬¡è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œä¼šå¼¹å‡ºå…¬é’¥ç¡®è®¤çš„æç¤ºã€‚è¿™ä¼šå¯¼è‡´æŸäº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç”±äºåˆæ¬¡è¿æ¥æœåŠ¡å™¨è€Œå¯¼è‡´è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸­æ–­ï¼Œ\nå¯åœ¨ StrictHostKeyCheckingé€‰é¡¹ï¼Œç”¨ -o å‚æ•°æŒ‡å®šåï¼Œåˆ™ä¸æ£€æŸ¥è¯¥é¡¹ã€‚\n\n```bash\nscp [å¯é€‰å‚æ•°] file_source file_target\n#å°†publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°$DEPLOY_IPä¸‹çš„/path/to/blogç›®å½•ä¸­ã€‚ä¸æ£€æŸ¥keyï¼Œ\nscp -o StrictHostKeyChecking=no -r public/*  user@$DEPLOY_IP:/path/to/blog/\n#å¯ç”¨-iæŒ‡å®šç§é’¥ã€‚\nscp -o  StrictHostKeyChecking=no -i .ssh/id_rsa yourfile user@destinate_ip:/dest_folder\n#æˆ–å°†è‡ªå·±çš„å…¬é’¥æ”¾åˆ°ç›®æ ‡æœºçš„authorized_keysæ–‡ä»¶é‡Œï¼Œä½¿è‡ªå·±ä¸ºç›®æ ‡æœºçš„ä¿¡ä»»æœºå™¨ï¼Œå®ç°æ— å¯†ç ç™»å½•\n#è¿™ä¸ªæ˜¯åœ¨ç”Ÿæˆssh key åï¼Œå°†å…¬é’¥æ”¾åˆ°authorized_keysæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨å¯†é’¥å¯¹å¯ä»¥å®ç°ä¸è¾“å…¥å¯†ç \ncd ~/.ssh\ncat id_rsa.pub >> authorized_keys\n```\n\n### rsync å‘½ä»¤\næœ€ç»ˆé‡‡ç”¨äº† rsync å‘½ä»¤ï¼Œæˆ‘è§‰å¾—éƒ½è¡Œï¼Œä¸»è¦æ˜¯è¿™ä¸ªåŒæ­¥æˆåŠŸäº†ã€‚\n```bash\nrsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n```\n\n### centOSä½¿ç”¨gem\nå› ä¸ºåé¢è¦ä½¿ç”¨ `gem install travis` ,æ‰€ä»¥å¯èƒ½ä¼šéœ€è¦ å‡çº§ ruby å’Œ åˆ‡æ¢ gem æºï¼ˆäº²æµ‹ ruby ç‰ˆæœ¬ä½ä¼šå®‰è£…æŠ¥é”™ï¼Œgem ç”¨å®˜æ–¹æºçœŸçš„æ˜¯åŠ¨éƒ½ä¸åŠ¨å•Šï¼Œå¤ªéš¾äº†ï¼‰\n\n\n#### åˆ‡æ¢gemæº\n```bash\n$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/\n$ gem sources -l\nhttps://gems.ruby-china.com\n# ç¡®ä¿åªæœ‰ gems.ruby-china.com\n$ gem update --system \n$ gem -v\n2.6.3\n```\n#### å‡çº§Ruby\nå®‰è£…[RAM](https://rvm.io/), ä¸€æ¬¾rubyç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼ node çš„ nvmã€‚\n```bash\ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\ncurl -sSL https://get.rvm.io | bash -s stable\nsource /etc/profile.d/rvm.sh\nrvm -v\n```\n\nå®‰è£…æ–°ç‰ˆ ruby\n```bash\nrvm install 2.6\n```\n\n## è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\nå¯¹äºé¡¹ç›®çš„æ„å»ºæ¥è¯´éƒ½æ˜¯ æ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­å†™å¥½çš„è„šæœ¬ï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½ å°±æ˜¯ `npm install && hexo clean && hexo g`, é‚£ä¹ˆæ€ä¹ˆæ‰§è¡Œæœ€åä¸€æ­¥ï¼ŒæŠŠæ–‡ä»¶åŒæ­¥ä¼ è¾“åˆ° äº‘æœåŠ¡å™¨ä¸Šå‘¢ã€‚ æˆ‘ä»¬ä½¿ç”¨CIå°±æ˜¯æ‰‹åŠ¨è¿‡ç¨‹å¤ªç¹çï¼Œé‡å¤æ²¡æœ‰æ„ä¹‰ï¼Œæ€ä¹ˆå®ç° `å…å¯†` éƒ¨ç½²å‘¢ã€‚\n\nç™»å½•åˆ° `äº‘æœåŠ¡å™¨(centOS 7.x)`,è¿›è¡Œå¦‚ä¸‹æ“ä½œ\n### gem install travis å¹¶ç™»å½•\n```bash\ngem install travis #  è¿™æ­¥å¤±è´¥çš„è¯è¯·çœ‹ä¸Šé¢å…³äºå‡çº§rubyå’Œåˆ‡æ¢gemæºçš„éƒ¨åˆ†\ntravis login\n```\nç™»å½• github è´¦å·å¯†ç ï¼Œè¿™ä¸ªå®‰å…¨ç›´æ¥è¿æ¥çš„ github æœåŠ¡\n![login](/images/login.png)\n\n### ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis \nè¿›åˆ°äº‘æœåŠ¡å™¨å¯¹åº”çš„ git ä»“åº“ç›®å½•é‡Œ\n```bash\nssh-keygen -t rsa -b 4096 -C 'build@travis-ci.org' -f ./deploy_rsa\ntravis encrypt-file deploy_rsa --add\nssh-copy-id -i deploy_rsa.pub <ssh-user>@<deploy-host>\n\nrm -f deploy_rsa deploy_rsa.pub\ngit add deploy_rsa.enc .travis.yml\n```\né¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `deploy_rsa.enc` æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åŠ å¯†çš„ç§é’¥æ–‡ä»¶ï¼Œ `.travis.yml` æ˜¯æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚\n$encrypted_XXXXXX_key å’Œ $encrypted_XXXXXXXX_iv æ˜¯travis å¸®å¿™ç”Ÿæˆçš„ç¯å¢ƒå˜é‡ï¼Œå·²ç»åŒæ­¥åˆ° huguobo/hexo-blog è¿™ä¸ªé¡¹ç›®ä¸Šäº†ã€‚\n![iv](/images/iv.png)\n\nè¿˜æœ‰ä¸€ç‚¹å¯èƒ½ä¼šç”¨ä¸Šï¼Œå› ä¸º travis ç¬¬ä¸€æ¬¡ç™»å½•è¿œç¨‹æœåŠ¡å™¨ä¼šå‡ºç° SSH ä¸»æœºéªŒè¯ï¼Œè¿™è¾¹ä¼šæœ‰ä¸€ä¸ªä¸»æœºä¿¡ä»»é—®é¢˜ã€‚å®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æ·»åŠ  addons é…ç½®ï¼Œç„¶åä¿®æ”¹ .travis.yml çš„ç›¸å…³é…ç½®\n```bash\naddons:\n  ssh_known_hosts: your-ip\n\nbefore_deploy:\n- openssl aes-256-cbc -K $encrypted_<...>_key -iv $encrypted_<...>_iv -in deploy_rsa.enc -out /tmp/deploy_rsa -d\n- eval \"$(ssh-agent -s)\"\n- chmod 600 /tmp/deploy_rsa\n- ssh-add /tmp/deploy_rsa\n```\n\næœ€ç»ˆçš„éƒ¨ç½²é…ç½®, æˆ‘çš„æ˜¯é™æ€é¡µé¢ï¼Œéƒ¨ç½²å°±æ˜¯åŒæ­¥æ–‡ä»¶åˆ°æœåŠ¡å™¨å›ºå®šç›®å½•ï¼Œç”¨çš„æ˜¯ `rsync`ï¼Œå…¶ä¸­ -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" å‚æ•°å¯ä»¥è·³è¿‡ç¬¬ä¸€æ¬¡ç™»å½•çš„éªŒè¯ã€‚\n```bash\ndeploy:\n  provider: script\n  skip_cleanup: true\n  script: rsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n  on:\n    branch: master\n```\nå…¶ä»–çš„ yml é…ç½®éœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µé…ç½®äº†~\n\n## æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®\n\n```bash\nlanguage: node_js\n\nnode_js:\n  - \"10\"\n\ncache:\n  apt: true\n  directories:\n    - node_modules\n\naddons:\n  ssh_known_hosts: $DEPLOY_IP\n\ninstall:\n  - npm install hexo-cli@2.0.0 -g\n  - npm install\n\nscript:\n  - hexo clean \n  - hexo g\n\nbefore_deploy:\n- openssl aes-256-cbc -K $encrypted_25ad2a76f550_key -iv $encrypted_25ad2a76f550_iv -in deploy_rsa.enc -out deploy_rsa -d\n- eval \"$(ssh-agent -s)\"\n- chmod 600 deploy_rsa\n- ssh-add deploy_rsa\n\ndeploy:\n  provider: script\n  skip_cleanup: true\n  script: rsync -e \"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\" -r --delete-after --quiet $TRAVIS_BUILD_DIR/public/* root@$DEPLOY_IP:/opt/hexoBlog\n  on:\n    branch: master\n\n# deploy:\n#   provider: script\n#   skip_cleanup: true\n#   script: scp -o StrictHostKeyChecking=no -r public/*  root@$DEPLOY_IP:/opt/hexoBlog/\n#   on:\n#      branch: master\n\nbranches:\n  only:\n    - master\n\nnotifications:\n  email:\n    - huguobo2010@126.com\n  on_success: change\n  on_failure: always\n```\n\n## æ€»ç»“\næŠ˜è…¾äº†å¤§åŠå¤©ï¼Œç»ˆäºçœ‹åˆ°äº† CI-Success çš„é‚®ä»¶, ç½‘ç«™ä¹Ÿæ˜¯æˆåŠŸçš„çŠ¶æ€ï¼Œäº‘ä¸»æœºå¯¹åº”ç›®å½•çš„æ–‡ä»¶ä¹Ÿç¡®å®æ›´æ–°äº†ã€‚\nä»¥åå†™åšå®¢ ç»ˆäº åªç”¨ git push ï¼Œå…¶ä»–çš„ç­‰é‚®ä»¶é€šçŸ¥äº†~~\nå¦å¤– æ–‡ä¸­çš„ id_rsa.enc æ–‡ä»¶ä¸€å¼€å§‹æˆ‘ç›´æ¥ vim å¤åˆ¶çš„éƒ½æ˜¯ä¹±ç ï¼Œä¸€å¼€å§‹ä¸€ç›´æŠ¥é”™ `bad decrypt` ï¼Œåæ¥ä¸Šä¸»æœº git clone ä»“åº“ç›´æ¥ä»“åº“å†…ç”Ÿæˆå¹¶æ·»åŠ çš„ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªå‘ç‚¹ã€‚\nè¿˜æœ‰æœ€åç”¨ `rsync` ä»£æ›¿äº† `scp`\næœ€åä¹ŸæŠŠ openssl æ”¾åœ¨äº† before_deploy é˜¶æ®µï¼Œæ”¾åœ¨ before_installä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œè¿™äº›éƒ½æ˜¯å› äººè€Œå¼‚å•¦ã€‚\n![success](/images/success.png)\n\n## å‚è€ƒæ–‡ç« \n- https://oncletom.io/2016/travis-ssh-deploy/\n- http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html\n- https://gems.ruby-china.com/","slug":"Travis-CIæŒç»­é›†æˆHexoåˆ°äº‘æœåŠ¡å™¨","published":1,"updated":"2019-09-08T02:27:03.487Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhpv0001uhoxds59cq9t","content":"<blockquote>\n<p>çƒ¦ï¼šæ¯æ¬¡æœ¬åœ°æäº¤ä»£ç åˆ° GitHub ä¸Šåè¿˜è¦è‡ªå·±æ‰‹åŠ¨åŒæ­¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨ï¼Œå®Œæˆæ‰€è°“çš„éƒ¨ç½²å·¥ä½œæœ‰ç‚¹éº»çƒ¦å’Œè„±èŠ‚ã€‚<br>æ‡’ï¼šç¨‹åºå‘˜ç­‰æ‰€æœ‰è‡ªç§°å·¥ç¨‹å¸ˆè¿›æ­¥çš„å…ˆå†³åŠ¨åŠ›ï¼Œæƒ³å®ç°ä¸€ä¸ªæˆ‘æ¯æ¬¡æäº¤ä»£ç åï¼Œåé¢çš„æ„å»ºï¼Œæ‰“åŒ…å’Œéƒ¨ç½²éƒ½è‡ªåŠ¨è¿›è¡Œçš„æµç¨‹ã€‚<br>å› ä¸ºæœ¬èº«ä»£ç æ‰˜ç®¡åœ¨ Github ä¸Šï¼Œæ‰€ä»¥å°±å¼€å§‹æŠ˜è…¾ Travis-CIäº†ã€‚</p>\n</blockquote>\n<h2 id=\"ä»€ä¹ˆæ˜¯CI\"><a href=\"#ä»€ä¹ˆæ˜¯CI\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯CI\"></a>ä»€ä¹ˆæ˜¯CI</h2><p>æŒç»­é›†æˆæœåŠ¡ï¼ˆContinuous Integrationï¼Œç®€ç§° CIï¼‰ã€‚<br>ä¸€èˆ¬æŒ‡çš„æ˜¯æä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œè§„èŒƒæ£€æŸ¥ï¼ŒåŸºäºç¯å¢ƒçš„æ„å»ºï¼ŒæœåŠ¡éƒ¨ç½²ç­‰æµæ°´çº¿ä½œä¸šã€‚<br>æŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚<br>å¦å¤–ï¼Œè¿™ä¸ªæ˜¯å·¥ç¨‹åŒ–å®è·µï¼Œå¦‚æœä½ è§‰å¾—è‡ªå·±æ‰‹åŠ¨æ“ä½œæ¯”æ•´è¿™äº›ç¹ççš„æµç¨‹æ–¹ä¾¿å¤šäº†ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚</p>\n<h2 id=\"Travis-CI\"><a href=\"#Travis-CI\" class=\"headerlink\" title=\"Travis CI\"></a>Travis CI</h2><p><a href=\"https://travis-ci.com/\" target=\"_blank\" rel=\"noopener\">Travis CI</a> å¯¹ Github ä¸Šçš„å¼€æºé¡¹ç›®æä¾›å…è´¹æœåŠ¡ï¼Œè¿™è¦æ±‚å¿…é¡»æœ‰ Github è´¦å·ã€‚ç•Œé¢ä¹Ÿå¾ˆèµ~ï¼Œè®©æˆ‘æƒ³èµ·äº†å‰ä¸œå®¶çš„ PLUS å‘å¸ƒç³»ç»Ÿã€‚<br><img src=\"/images/travis.png\" alt=\"travis\"><br>å¯ä»¥ä½¿ç”¨ github è´¦å·ç›´æ¥ç™»å½•ï¼Œ public çš„ä»“åº“ä¹Ÿç›´æ¥åŒæ­¥åˆ° Travis ä¸Šäº†ï¼Œ é€‰æ‹©æƒ³å¼€å¯ Travis CI çš„ä»“åº“ï¼Œæ‰“å¼€å¼€å…³å³å¯ã€‚è¯¦ç»†é…ç½®ä¸ç»†è¯´äº†ï¼Œå›¾å½¢åŒ–ç•Œé¢ï¼Œè¿›å»å°±çŸ¥é“äº†ã€‚</p>\n<h3 id=\"travis-yml\"><a href=\"#travis-yml\" class=\"headerlink\" title=\".travis.yml\"></a>.travis.yml</h3><p>Travis-CIé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚<br>æ”¯æŒå¤šç§è¯­è¨€ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ <code>language: node_js</code><br>ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">before_install</span><br><span class=\"line\">install</span><br><span class=\"line\">before_script</span><br><span class=\"line\">script</span><br><span class=\"line\">aftersuccess or afterfailure</span><br><span class=\"line\">[OPTIONAL] before_deploy</span><br><span class=\"line\">[OPTIONAL] deploy</span><br><span class=\"line\">[OPTIONAL] after_deploy</span><br><span class=\"line\">after_script</span><br></pre></td></tr></table></figure>\n\n<p>è¯¦ç»†é…ç½®å‚è€ƒ <a href=\"https://docs.travis-ci.com\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></p>\n<h2 id=\"ä¸€äº›å‡†å¤‡å·¥ä½œ\"><a href=\"#ä¸€äº›å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"ä¸€äº›å‡†å¤‡å·¥ä½œ\"></a>ä¸€äº›å‡†å¤‡å·¥ä½œ</h2><p>ç”±äºåé¢çš„å…å¯†ç™»å½•å’Œéƒ¨ç½²æµç¨‹ä¼šæ¶‰åŠä¸€äº›ç¯å¢ƒå’Œé…ç½®ç±»çš„æ“ä½œï¼Œè¿™ä¸ªéƒ¨åˆ†ä»‹ç»ä¸‹å‰ç½®æ¡ä»¶ã€‚</p>\n<h3 id=\"SCPå‘½ä»¤\"><a href=\"#SCPå‘½ä»¤\" class=\"headerlink\" title=\"SCPå‘½ä»¤\"></a>SCPå‘½ä»¤</h3><p>scp å‘½ä»¤ç”¨äºlinuxä¸‹çš„è·¨ä¸»æœºä¹‹é—´çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶<br>åœ¨é¦–æ¬¡è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œä¼šå¼¹å‡ºå…¬é’¥ç¡®è®¤çš„æç¤ºã€‚è¿™ä¼šå¯¼è‡´æŸäº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç”±äºåˆæ¬¡è¿æ¥æœåŠ¡å™¨è€Œå¯¼è‡´è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸­æ–­ï¼Œ<br>å¯åœ¨ StrictHostKeyCheckingé€‰é¡¹ï¼Œç”¨ -o å‚æ•°æŒ‡å®šåï¼Œåˆ™ä¸æ£€æŸ¥è¯¥é¡¹ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp [å¯é€‰å‚æ•°] file_source file_target</span><br><span class=\"line\"><span class=\"comment\">#å°†publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°$DEPLOY_IPä¸‹çš„/path/to/blogç›®å½•ä¸­ã€‚ä¸æ£€æŸ¥keyï¼Œ</span></span><br><span class=\"line\">scp -o StrictHostKeyChecking=no -r public/*  user@<span class=\"variable\">$DEPLOY_IP</span>:/path/to/blog/</span><br><span class=\"line\"><span class=\"comment\">#å¯ç”¨-iæŒ‡å®šç§é’¥ã€‚</span></span><br><span class=\"line\">scp -o  StrictHostKeyChecking=no -i .ssh/id_rsa yourfile user@destinate_ip:/dest_folder</span><br><span class=\"line\"><span class=\"comment\">#æˆ–å°†è‡ªå·±çš„å…¬é’¥æ”¾åˆ°ç›®æ ‡æœºçš„authorized_keysæ–‡ä»¶é‡Œï¼Œä½¿è‡ªå·±ä¸ºç›®æ ‡æœºçš„ä¿¡ä»»æœºå™¨ï¼Œå®ç°æ— å¯†ç ç™»å½•</span></span><br><span class=\"line\"><span class=\"comment\">#è¿™ä¸ªæ˜¯åœ¨ç”Ÿæˆssh key åï¼Œå°†å…¬é’¥æ”¾åˆ°authorized_keysæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨å¯†é’¥å¯¹å¯ä»¥å®ç°ä¸è¾“å…¥å¯†ç </span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/.ssh</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"rsync-å‘½ä»¤\"><a href=\"#rsync-å‘½ä»¤\" class=\"headerlink\" title=\"rsync å‘½ä»¤\"></a>rsync å‘½ä»¤</h3><p>æœ€ç»ˆé‡‡ç”¨äº† rsync å‘½ä»¤ï¼Œæˆ‘è§‰å¾—éƒ½è¡Œï¼Œä¸»è¦æ˜¯è¿™ä¸ªåŒæ­¥æˆåŠŸäº†ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"centOSä½¿ç”¨gem\"><a href=\"#centOSä½¿ç”¨gem\" class=\"headerlink\" title=\"centOSä½¿ç”¨gem\"></a>centOSä½¿ç”¨gem</h3><p>å› ä¸ºåé¢è¦ä½¿ç”¨ <code>gem install travis</code> ,æ‰€ä»¥å¯èƒ½ä¼šéœ€è¦ å‡çº§ ruby å’Œ åˆ‡æ¢ gem æºï¼ˆäº²æµ‹ ruby ç‰ˆæœ¬ä½ä¼šå®‰è£…æŠ¥é”™ï¼Œgem ç”¨å®˜æ–¹æºçœŸçš„æ˜¯åŠ¨éƒ½ä¸åŠ¨å•Šï¼Œå¤ªéš¾äº†ï¼‰</p>\n<h4 id=\"åˆ‡æ¢gemæº\"><a href=\"#åˆ‡æ¢gemæº\" class=\"headerlink\" title=\"åˆ‡æ¢gemæº\"></a>åˆ‡æ¢gemæº</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</span><br><span class=\"line\">$ gem sources -l</span><br><span class=\"line\">https://gems.ruby-china.com</span><br><span class=\"line\"><span class=\"comment\"># ç¡®ä¿åªæœ‰ gems.ruby-china.com</span></span><br><span class=\"line\">$ gem update --system </span><br><span class=\"line\">$ gem -v</span><br><span class=\"line\">2.6.3</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‡çº§Ruby\"><a href=\"#å‡çº§Ruby\" class=\"headerlink\" title=\"å‡çº§Ruby\"></a>å‡çº§Ruby</h4><p>å®‰è£…<a href=\"https://rvm.io/\" target=\"_blank\" rel=\"noopener\">RAM</a>, ä¸€æ¬¾rubyç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼ node çš„ nvmã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span><br><span class=\"line\">curl -sSL https://get.rvm.io | bash -s stable</span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile.d/rvm.sh</span><br><span class=\"line\">rvm -v</span><br></pre></td></tr></table></figure>\n\n<p>å®‰è£…æ–°ç‰ˆ ruby</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rvm install 2.6</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\"><a href=\"#è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\" class=\"headerlink\" title=\"è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\"></a>è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨</h2><p>å¯¹äºé¡¹ç›®çš„æ„å»ºæ¥è¯´éƒ½æ˜¯ æ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­å†™å¥½çš„è„šæœ¬ï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½ å°±æ˜¯ <code>npm install &amp;&amp; hexo clean &amp;&amp; hexo g</code>, é‚£ä¹ˆæ€ä¹ˆæ‰§è¡Œæœ€åä¸€æ­¥ï¼ŒæŠŠæ–‡ä»¶åŒæ­¥ä¼ è¾“åˆ° äº‘æœåŠ¡å™¨ä¸Šå‘¢ã€‚ æˆ‘ä»¬ä½¿ç”¨CIå°±æ˜¯æ‰‹åŠ¨è¿‡ç¨‹å¤ªç¹çï¼Œé‡å¤æ²¡æœ‰æ„ä¹‰ï¼Œæ€ä¹ˆå®ç° <code>å…å¯†</code> éƒ¨ç½²å‘¢ã€‚</p>\n<p>ç™»å½•åˆ° <code>äº‘æœåŠ¡å™¨(centOS 7.x)</code>,è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p>\n<h3 id=\"gem-install-travis-å¹¶ç™»å½•\"><a href=\"#gem-install-travis-å¹¶ç™»å½•\" class=\"headerlink\" title=\"gem install travis å¹¶ç™»å½•\"></a>gem install travis å¹¶ç™»å½•</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem install travis <span class=\"comment\">#  è¿™æ­¥å¤±è´¥çš„è¯è¯·çœ‹ä¸Šé¢å…³äºå‡çº§rubyå’Œåˆ‡æ¢gemæºçš„éƒ¨åˆ†</span></span><br><span class=\"line\">travis login</span><br></pre></td></tr></table></figure>\n\n<p>ç™»å½• github è´¦å·å¯†ç ï¼Œè¿™ä¸ªå®‰å…¨ç›´æ¥è¿æ¥çš„ github æœåŠ¡<br><img src=\"/images/login.png\" alt=\"login\"></p>\n<h3 id=\"ç”Ÿæˆ-ssh-key-å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ°-travis\"><a href=\"#ç”Ÿæˆ-ssh-key-å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ°-travis\" class=\"headerlink\" title=\"ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis\"></a>ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis</h3><p>è¿›åˆ°äº‘æœåŠ¡å™¨å¯¹åº”çš„ git ä»“åº“ç›®å½•é‡Œ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b 4096 -C <span class=\"string\">'build@travis-ci.org'</span> -f ./deploy_rsa</span><br><span class=\"line\">travis encrypt-file deploy_rsa --add</span><br><span class=\"line\">ssh-copy-id -i deploy_rsa.pub &lt;ssh-user&gt;@&lt;deploy-host&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">rm -f deploy_rsa deploy_rsa.pub</span><br><span class=\"line\">git add deploy_rsa.enc .travis.yml</span><br></pre></td></tr></table></figure>\n\n<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>deploy_rsa.enc</code> æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åŠ å¯†çš„ç§é’¥æ–‡ä»¶ï¼Œ <code>.travis.yml</code> æ˜¯æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚<br>$encrypted_XXXXXX_key å’Œ $encrypted_XXXXXXXX_iv æ˜¯travis å¸®å¿™ç”Ÿæˆçš„ç¯å¢ƒå˜é‡ï¼Œå·²ç»åŒæ­¥åˆ° huguobo/hexo-blog è¿™ä¸ªé¡¹ç›®ä¸Šäº†ã€‚<br><img src=\"/images/iv.png\" alt=\"iv\"></p>\n<p>è¿˜æœ‰ä¸€ç‚¹å¯èƒ½ä¼šç”¨ä¸Šï¼Œå› ä¸º travis ç¬¬ä¸€æ¬¡ç™»å½•è¿œç¨‹æœåŠ¡å™¨ä¼šå‡ºç° SSH ä¸»æœºéªŒè¯ï¼Œè¿™è¾¹ä¼šæœ‰ä¸€ä¸ªä¸»æœºä¿¡ä»»é—®é¢˜ã€‚å®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æ·»åŠ  addons é…ç½®ï¼Œç„¶åä¿®æ”¹ .travis.yml çš„ç›¸å…³é…ç½®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">addons:</span><br><span class=\"line\">  ssh_known_hosts: your-ip</span><br><span class=\"line\"></span><br><span class=\"line\">before_deploy:</span><br><span class=\"line\">- openssl aes-256-cbc -K <span class=\"variable\">$encrypted_</span>&lt;...&gt;_key -iv <span class=\"variable\">$encrypted_</span>&lt;...&gt;_iv -<span class=\"keyword\">in</span> deploy_rsa.enc -out /tmp/deploy_rsa -d</span><br><span class=\"line\">- <span class=\"built_in\">eval</span> <span class=\"string\">\"<span class=\"variable\">$(ssh-agent -s)</span>\"</span></span><br><span class=\"line\">- chmod 600 /tmp/deploy_rsa</span><br><span class=\"line\">- ssh-add /tmp/deploy_rsa</span><br></pre></td></tr></table></figure>\n\n<p>æœ€ç»ˆçš„éƒ¨ç½²é…ç½®, æˆ‘çš„æ˜¯é™æ€é¡µé¢ï¼Œéƒ¨ç½²å°±æ˜¯åŒæ­¥æ–‡ä»¶åˆ°æœåŠ¡å™¨å›ºå®šç›®å½•ï¼Œç”¨çš„æ˜¯ <code>rsync</code>ï¼Œå…¶ä¸­ -e â€œssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=noâ€ å‚æ•°å¯ä»¥è·³è¿‡ç¬¬ä¸€æ¬¡ç™»å½•çš„éªŒè¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">  provider: script</span><br><span class=\"line\">  skip_cleanup: <span class=\"literal\">true</span></span><br><span class=\"line\">  script: rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br><span class=\"line\">  on:</span><br><span class=\"line\">    branch: master</span><br></pre></td></tr></table></figure>\n\n<p>å…¶ä»–çš„ yml é…ç½®éœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µé…ç½®äº†~</p>\n<h2 id=\"æˆ‘æœ€ç»ˆçš„-travis-yml-é…ç½®\"><a href=\"#æˆ‘æœ€ç»ˆçš„-travis-yml-é…ç½®\" class=\"headerlink\" title=\"æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®\"></a>æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">language: node_js</span><br><span class=\"line\"></span><br><span class=\"line\">node_js:</span><br><span class=\"line\">  - <span class=\"string\">\"10\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">cache:</span><br><span class=\"line\">  apt: <span class=\"literal\">true</span></span><br><span class=\"line\">  directories:</span><br><span class=\"line\">    - node_modules</span><br><span class=\"line\"></span><br><span class=\"line\">addons:</span><br><span class=\"line\">  ssh_known_hosts: <span class=\"variable\">$DEPLOY_IP</span></span><br><span class=\"line\"></span><br><span class=\"line\">install:</span><br><span class=\"line\">  - npm install hexo-cli@2.0.0 -g</span><br><span class=\"line\">  - npm install</span><br><span class=\"line\"></span><br><span class=\"line\">script:</span><br><span class=\"line\">  - hexo clean </span><br><span class=\"line\">  - hexo g</span><br><span class=\"line\"></span><br><span class=\"line\">before_deploy:</span><br><span class=\"line\">- openssl aes-256-cbc -K <span class=\"variable\">$encrypted_25ad2a76f550_key</span> -iv <span class=\"variable\">$encrypted_25ad2a76f550_iv</span> -<span class=\"keyword\">in</span> deploy_rsa.enc -out deploy_rsa -d</span><br><span class=\"line\">- <span class=\"built_in\">eval</span> <span class=\"string\">\"<span class=\"variable\">$(ssh-agent -s)</span>\"</span></span><br><span class=\"line\">- chmod 600 deploy_rsa</span><br><span class=\"line\">- ssh-add deploy_rsa</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  provider: script</span><br><span class=\"line\">  skip_cleanup: <span class=\"literal\">true</span></span><br><span class=\"line\">  script: rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br><span class=\"line\">  on:</span><br><span class=\"line\">    branch: master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># deploy:</span></span><br><span class=\"line\"><span class=\"comment\">#   provider: script</span></span><br><span class=\"line\"><span class=\"comment\">#   skip_cleanup: true</span></span><br><span class=\"line\"><span class=\"comment\">#   script: scp -o StrictHostKeyChecking=no -r public/*  root@$DEPLOY_IP:/opt/hexoBlog/</span></span><br><span class=\"line\"><span class=\"comment\">#   on:</span></span><br><span class=\"line\"><span class=\"comment\">#      branch: master</span></span><br><span class=\"line\"></span><br><span class=\"line\">branches:</span><br><span class=\"line\">  only:</span><br><span class=\"line\">    - master</span><br><span class=\"line\"></span><br><span class=\"line\">notifications:</span><br><span class=\"line\">  email:</span><br><span class=\"line\">    - huguobo2010@126.com</span><br><span class=\"line\">  on_success: change</span><br><span class=\"line\">  on_failure: always</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>æŠ˜è…¾äº†å¤§åŠå¤©ï¼Œç»ˆäºçœ‹åˆ°äº† CI-Success çš„é‚®ä»¶, ç½‘ç«™ä¹Ÿæ˜¯æˆåŠŸçš„çŠ¶æ€ï¼Œäº‘ä¸»æœºå¯¹åº”ç›®å½•çš„æ–‡ä»¶ä¹Ÿç¡®å®æ›´æ–°äº†ã€‚<br>ä»¥åå†™åšå®¢ ç»ˆäº åªç”¨ git push ï¼Œå…¶ä»–çš„ç­‰é‚®ä»¶é€šçŸ¥äº†~~<br>å¦å¤– æ–‡ä¸­çš„ id_rsa.enc æ–‡ä»¶ä¸€å¼€å§‹æˆ‘ç›´æ¥ vim å¤åˆ¶çš„éƒ½æ˜¯ä¹±ç ï¼Œä¸€å¼€å§‹ä¸€ç›´æŠ¥é”™ <code>bad decrypt</code> ï¼Œåæ¥ä¸Šä¸»æœº git clone ä»“åº“ç›´æ¥ä»“åº“å†…ç”Ÿæˆå¹¶æ·»åŠ çš„ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªå‘ç‚¹ã€‚<br>è¿˜æœ‰æœ€åç”¨ <code>rsync</code> ä»£æ›¿äº† <code>scp</code><br>æœ€åä¹ŸæŠŠ openssl æ”¾åœ¨äº† before_deploy é˜¶æ®µï¼Œæ”¾åœ¨ before_installä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œè¿™äº›éƒ½æ˜¯å› äººè€Œå¼‚å•¦ã€‚<br><img src=\"/images/success.png\" alt=\"success\"></p>\n<h2 id=\"å‚è€ƒæ–‡ç« \"><a href=\"#å‚è€ƒæ–‡ç« \" class=\"headerlink\" title=\"å‚è€ƒæ–‡ç« \"></a>å‚è€ƒæ–‡ç« </h2><ul>\n<li><a href=\"https://oncletom.io/2016/travis-ssh-deploy/\" target=\"_blank\" rel=\"noopener\">https://oncletom.io/2016/travis-ssh-deploy/</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html</a></li>\n<li><a href=\"https://gems.ruby-china.com/\" target=\"_blank\" rel=\"noopener\">https://gems.ruby-china.com/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>çƒ¦ï¼šæ¯æ¬¡æœ¬åœ°æäº¤ä»£ç åˆ° GitHub ä¸Šåè¿˜è¦è‡ªå·±æ‰‹åŠ¨åŒæ­¥æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨ï¼Œå®Œæˆæ‰€è°“çš„éƒ¨ç½²å·¥ä½œæœ‰ç‚¹éº»çƒ¦å’Œè„±èŠ‚ã€‚<br>æ‡’ï¼šç¨‹åºå‘˜ç­‰æ‰€æœ‰è‡ªç§°å·¥ç¨‹å¸ˆè¿›æ­¥çš„å…ˆå†³åŠ¨åŠ›ï¼Œæƒ³å®ç°ä¸€ä¸ªæˆ‘æ¯æ¬¡æäº¤ä»£ç åï¼Œåé¢çš„æ„å»ºï¼Œæ‰“åŒ…å’Œéƒ¨ç½²éƒ½è‡ªåŠ¨è¿›è¡Œçš„æµç¨‹ã€‚<br>å› ä¸ºæœ¬èº«ä»£ç æ‰˜ç®¡åœ¨ Github ä¸Šï¼Œæ‰€ä»¥å°±å¼€å§‹æŠ˜è…¾ Travis-CIäº†ã€‚</p>\n</blockquote>\n<h2 id=\"ä»€ä¹ˆæ˜¯CI\"><a href=\"#ä»€ä¹ˆæ˜¯CI\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯CI\"></a>ä»€ä¹ˆæ˜¯CI</h2><p>æŒç»­é›†æˆæœåŠ¡ï¼ˆContinuous Integrationï¼Œç®€ç§° CIï¼‰ã€‚<br>ä¸€èˆ¬æŒ‡çš„æ˜¯æä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œè‡ªåŠ¨åŒ–æ‰§è¡Œå•å…ƒæµ‹è¯•ï¼Œè§„èŒƒæ£€æŸ¥ï¼ŒåŸºäºç¯å¢ƒçš„æ„å»ºï¼ŒæœåŠ¡éƒ¨ç½²ç­‰æµæ°´çº¿ä½œä¸šã€‚<br>æŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚<br>å¦å¤–ï¼Œè¿™ä¸ªæ˜¯å·¥ç¨‹åŒ–å®è·µï¼Œå¦‚æœä½ è§‰å¾—è‡ªå·±æ‰‹åŠ¨æ“ä½œæ¯”æ•´è¿™äº›ç¹ççš„æµç¨‹æ–¹ä¾¿å¤šäº†ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚</p>\n<h2 id=\"Travis-CI\"><a href=\"#Travis-CI\" class=\"headerlink\" title=\"Travis CI\"></a>Travis CI</h2><p><a href=\"https://travis-ci.com/\" target=\"_blank\" rel=\"noopener\">Travis CI</a> å¯¹ Github ä¸Šçš„å¼€æºé¡¹ç›®æä¾›å…è´¹æœåŠ¡ï¼Œè¿™è¦æ±‚å¿…é¡»æœ‰ Github è´¦å·ã€‚ç•Œé¢ä¹Ÿå¾ˆèµ~ï¼Œè®©æˆ‘æƒ³èµ·äº†å‰ä¸œå®¶çš„ PLUS å‘å¸ƒç³»ç»Ÿã€‚<br><img src=\"/images/travis.png\" alt=\"travis\"><br>å¯ä»¥ä½¿ç”¨ github è´¦å·ç›´æ¥ç™»å½•ï¼Œ public çš„ä»“åº“ä¹Ÿç›´æ¥åŒæ­¥åˆ° Travis ä¸Šäº†ï¼Œ é€‰æ‹©æƒ³å¼€å¯ Travis CI çš„ä»“åº“ï¼Œæ‰“å¼€å¼€å…³å³å¯ã€‚è¯¦ç»†é…ç½®ä¸ç»†è¯´äº†ï¼Œå›¾å½¢åŒ–ç•Œé¢ï¼Œè¿›å»å°±çŸ¥é“äº†ã€‚</p>\n<h3 id=\"travis-yml\"><a href=\"#travis-yml\" class=\"headerlink\" title=\".travis.yml\"></a>.travis.yml</h3><p>Travis-CIé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚<br>æ”¯æŒå¤šç§è¯­è¨€ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ <code>language: node_js</code><br>ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">before_install</span><br><span class=\"line\">install</span><br><span class=\"line\">before_script</span><br><span class=\"line\">script</span><br><span class=\"line\">aftersuccess or afterfailure</span><br><span class=\"line\">[OPTIONAL] before_deploy</span><br><span class=\"line\">[OPTIONAL] deploy</span><br><span class=\"line\">[OPTIONAL] after_deploy</span><br><span class=\"line\">after_script</span><br></pre></td></tr></table></figure>\n\n<p>è¯¦ç»†é…ç½®å‚è€ƒ <a href=\"https://docs.travis-ci.com\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></p>\n<h2 id=\"ä¸€äº›å‡†å¤‡å·¥ä½œ\"><a href=\"#ä¸€äº›å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"ä¸€äº›å‡†å¤‡å·¥ä½œ\"></a>ä¸€äº›å‡†å¤‡å·¥ä½œ</h2><p>ç”±äºåé¢çš„å…å¯†ç™»å½•å’Œéƒ¨ç½²æµç¨‹ä¼šæ¶‰åŠä¸€äº›ç¯å¢ƒå’Œé…ç½®ç±»çš„æ“ä½œï¼Œè¿™ä¸ªéƒ¨åˆ†ä»‹ç»ä¸‹å‰ç½®æ¡ä»¶ã€‚</p>\n<h3 id=\"SCPå‘½ä»¤\"><a href=\"#SCPå‘½ä»¤\" class=\"headerlink\" title=\"SCPå‘½ä»¤\"></a>SCPå‘½ä»¤</h3><p>scp å‘½ä»¤ç”¨äºlinuxä¸‹çš„è·¨ä¸»æœºä¹‹é—´çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶<br>åœ¨é¦–æ¬¡è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œä¼šå¼¹å‡ºå…¬é’¥ç¡®è®¤çš„æç¤ºã€‚è¿™ä¼šå¯¼è‡´æŸäº›è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç”±äºåˆæ¬¡è¿æ¥æœåŠ¡å™¨è€Œå¯¼è‡´è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸­æ–­ï¼Œ<br>å¯åœ¨ StrictHostKeyCheckingé€‰é¡¹ï¼Œç”¨ -o å‚æ•°æŒ‡å®šåï¼Œåˆ™ä¸æ£€æŸ¥è¯¥é¡¹ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp [å¯é€‰å‚æ•°] file_source file_target</span><br><span class=\"line\"><span class=\"comment\">#å°†publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°$DEPLOY_IPä¸‹çš„/path/to/blogç›®å½•ä¸­ã€‚ä¸æ£€æŸ¥keyï¼Œ</span></span><br><span class=\"line\">scp -o StrictHostKeyChecking=no -r public/*  user@<span class=\"variable\">$DEPLOY_IP</span>:/path/to/blog/</span><br><span class=\"line\"><span class=\"comment\">#å¯ç”¨-iæŒ‡å®šç§é’¥ã€‚</span></span><br><span class=\"line\">scp -o  StrictHostKeyChecking=no -i .ssh/id_rsa yourfile user@destinate_ip:/dest_folder</span><br><span class=\"line\"><span class=\"comment\">#æˆ–å°†è‡ªå·±çš„å…¬é’¥æ”¾åˆ°ç›®æ ‡æœºçš„authorized_keysæ–‡ä»¶é‡Œï¼Œä½¿è‡ªå·±ä¸ºç›®æ ‡æœºçš„ä¿¡ä»»æœºå™¨ï¼Œå®ç°æ— å¯†ç ç™»å½•</span></span><br><span class=\"line\"><span class=\"comment\">#è¿™ä¸ªæ˜¯åœ¨ç”Ÿæˆssh key åï¼Œå°†å…¬é’¥æ”¾åˆ°authorized_keysæ–‡ä»¶ä¸­ã€‚ä½¿ç”¨å¯†é’¥å¯¹å¯ä»¥å®ç°ä¸è¾“å…¥å¯†ç </span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/.ssh</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"rsync-å‘½ä»¤\"><a href=\"#rsync-å‘½ä»¤\" class=\"headerlink\" title=\"rsync å‘½ä»¤\"></a>rsync å‘½ä»¤</h3><p>æœ€ç»ˆé‡‡ç”¨äº† rsync å‘½ä»¤ï¼Œæˆ‘è§‰å¾—éƒ½è¡Œï¼Œä¸»è¦æ˜¯è¿™ä¸ªåŒæ­¥æˆåŠŸäº†ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"centOSä½¿ç”¨gem\"><a href=\"#centOSä½¿ç”¨gem\" class=\"headerlink\" title=\"centOSä½¿ç”¨gem\"></a>centOSä½¿ç”¨gem</h3><p>å› ä¸ºåé¢è¦ä½¿ç”¨ <code>gem install travis</code> ,æ‰€ä»¥å¯èƒ½ä¼šéœ€è¦ å‡çº§ ruby å’Œ åˆ‡æ¢ gem æºï¼ˆäº²æµ‹ ruby ç‰ˆæœ¬ä½ä¼šå®‰è£…æŠ¥é”™ï¼Œgem ç”¨å®˜æ–¹æºçœŸçš„æ˜¯åŠ¨éƒ½ä¸åŠ¨å•Šï¼Œå¤ªéš¾äº†ï¼‰</p>\n<h4 id=\"åˆ‡æ¢gemæº\"><a href=\"#åˆ‡æ¢gemæº\" class=\"headerlink\" title=\"åˆ‡æ¢gemæº\"></a>åˆ‡æ¢gemæº</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</span><br><span class=\"line\">$ gem sources -l</span><br><span class=\"line\">https://gems.ruby-china.com</span><br><span class=\"line\"><span class=\"comment\"># ç¡®ä¿åªæœ‰ gems.ruby-china.com</span></span><br><span class=\"line\">$ gem update --system </span><br><span class=\"line\">$ gem -v</span><br><span class=\"line\">2.6.3</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‡çº§Ruby\"><a href=\"#å‡çº§Ruby\" class=\"headerlink\" title=\"å‡çº§Ruby\"></a>å‡çº§Ruby</h4><p>å®‰è£…<a href=\"https://rvm.io/\" target=\"_blank\" rel=\"noopener\">RAM</a>, ä¸€æ¬¾rubyç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼ node çš„ nvmã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span><br><span class=\"line\">curl -sSL https://get.rvm.io | bash -s stable</span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile.d/rvm.sh</span><br><span class=\"line\">rvm -v</span><br></pre></td></tr></table></figure>\n\n<p>å®‰è£…æ–°ç‰ˆ ruby</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rvm install 2.6</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\"><a href=\"#è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\" class=\"headerlink\" title=\"è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨\"></a>è‡ªåŠ¨éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨</h2><p>å¯¹äºé¡¹ç›®çš„æ„å»ºæ¥è¯´éƒ½æ˜¯ æ‰§è¡Œé…ç½®æ–‡ä»¶ä¸­å†™å¥½çš„è„šæœ¬ï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½ å°±æ˜¯ <code>npm install &amp;&amp; hexo clean &amp;&amp; hexo g</code>, é‚£ä¹ˆæ€ä¹ˆæ‰§è¡Œæœ€åä¸€æ­¥ï¼ŒæŠŠæ–‡ä»¶åŒæ­¥ä¼ è¾“åˆ° äº‘æœåŠ¡å™¨ä¸Šå‘¢ã€‚ æˆ‘ä»¬ä½¿ç”¨CIå°±æ˜¯æ‰‹åŠ¨è¿‡ç¨‹å¤ªç¹çï¼Œé‡å¤æ²¡æœ‰æ„ä¹‰ï¼Œæ€ä¹ˆå®ç° <code>å…å¯†</code> éƒ¨ç½²å‘¢ã€‚</p>\n<p>ç™»å½•åˆ° <code>äº‘æœåŠ¡å™¨(centOS 7.x)</code>,è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p>\n<h3 id=\"gem-install-travis-å¹¶ç™»å½•\"><a href=\"#gem-install-travis-å¹¶ç™»å½•\" class=\"headerlink\" title=\"gem install travis å¹¶ç™»å½•\"></a>gem install travis å¹¶ç™»å½•</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gem install travis <span class=\"comment\">#  è¿™æ­¥å¤±è´¥çš„è¯è¯·çœ‹ä¸Šé¢å…³äºå‡çº§rubyå’Œåˆ‡æ¢gemæºçš„éƒ¨åˆ†</span></span><br><span class=\"line\">travis login</span><br></pre></td></tr></table></figure>\n\n<p>ç™»å½• github è´¦å·å¯†ç ï¼Œè¿™ä¸ªå®‰å…¨ç›´æ¥è¿æ¥çš„ github æœåŠ¡<br><img src=\"/images/login.png\" alt=\"login\"></p>\n<h3 id=\"ç”Ÿæˆ-ssh-key-å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ°-travis\"><a href=\"#ç”Ÿæˆ-ssh-key-å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ°-travis\" class=\"headerlink\" title=\"ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis\"></a>ç”Ÿæˆ ssh key å¹¶è¾“å‡ºå¯¹åº”åŠ å¯†çš„ç§é’¥åˆ° travis</h3><p>è¿›åˆ°äº‘æœåŠ¡å™¨å¯¹åº”çš„ git ä»“åº“ç›®å½•é‡Œ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa -b 4096 -C <span class=\"string\">'build@travis-ci.org'</span> -f ./deploy_rsa</span><br><span class=\"line\">travis encrypt-file deploy_rsa --add</span><br><span class=\"line\">ssh-copy-id -i deploy_rsa.pub &lt;ssh-user&gt;@&lt;deploy-host&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">rm -f deploy_rsa deploy_rsa.pub</span><br><span class=\"line\">git add deploy_rsa.enc .travis.yml</span><br></pre></td></tr></table></figure>\n\n<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>deploy_rsa.enc</code> æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åŠ å¯†çš„ç§é’¥æ–‡ä»¶ï¼Œ <code>.travis.yml</code> æ˜¯æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚<br>$encrypted_XXXXXX_key å’Œ $encrypted_XXXXXXXX_iv æ˜¯travis å¸®å¿™ç”Ÿæˆçš„ç¯å¢ƒå˜é‡ï¼Œå·²ç»åŒæ­¥åˆ° huguobo/hexo-blog è¿™ä¸ªé¡¹ç›®ä¸Šäº†ã€‚<br><img src=\"/images/iv.png\" alt=\"iv\"></p>\n<p>è¿˜æœ‰ä¸€ç‚¹å¯èƒ½ä¼šç”¨ä¸Šï¼Œå› ä¸º travis ç¬¬ä¸€æ¬¡ç™»å½•è¿œç¨‹æœåŠ¡å™¨ä¼šå‡ºç° SSH ä¸»æœºéªŒè¯ï¼Œè¿™è¾¹ä¼šæœ‰ä¸€ä¸ªä¸»æœºä¿¡ä»»é—®é¢˜ã€‚å®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯æ·»åŠ  addons é…ç½®ï¼Œç„¶åä¿®æ”¹ .travis.yml çš„ç›¸å…³é…ç½®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">addons:</span><br><span class=\"line\">  ssh_known_hosts: your-ip</span><br><span class=\"line\"></span><br><span class=\"line\">before_deploy:</span><br><span class=\"line\">- openssl aes-256-cbc -K <span class=\"variable\">$encrypted_</span>&lt;...&gt;_key -iv <span class=\"variable\">$encrypted_</span>&lt;...&gt;_iv -<span class=\"keyword\">in</span> deploy_rsa.enc -out /tmp/deploy_rsa -d</span><br><span class=\"line\">- <span class=\"built_in\">eval</span> <span class=\"string\">\"<span class=\"variable\">$(ssh-agent -s)</span>\"</span></span><br><span class=\"line\">- chmod 600 /tmp/deploy_rsa</span><br><span class=\"line\">- ssh-add /tmp/deploy_rsa</span><br></pre></td></tr></table></figure>\n\n<p>æœ€ç»ˆçš„éƒ¨ç½²é…ç½®, æˆ‘çš„æ˜¯é™æ€é¡µé¢ï¼Œéƒ¨ç½²å°±æ˜¯åŒæ­¥æ–‡ä»¶åˆ°æœåŠ¡å™¨å›ºå®šç›®å½•ï¼Œç”¨çš„æ˜¯ <code>rsync</code>ï¼Œå…¶ä¸­ -e â€œssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=noâ€ å‚æ•°å¯ä»¥è·³è¿‡ç¬¬ä¸€æ¬¡ç™»å½•çš„éªŒè¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">  provider: script</span><br><span class=\"line\">  skip_cleanup: <span class=\"literal\">true</span></span><br><span class=\"line\">  script: rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br><span class=\"line\">  on:</span><br><span class=\"line\">    branch: master</span><br></pre></td></tr></table></figure>\n\n<p>å…¶ä»–çš„ yml é…ç½®éœ€è¦è‡ªå·±æ ¹æ®æƒ…å†µé…ç½®äº†~</p>\n<h2 id=\"æˆ‘æœ€ç»ˆçš„-travis-yml-é…ç½®\"><a href=\"#æˆ‘æœ€ç»ˆçš„-travis-yml-é…ç½®\" class=\"headerlink\" title=\"æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®\"></a>æˆ‘æœ€ç»ˆçš„ .travis.yml é…ç½®</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">language: node_js</span><br><span class=\"line\"></span><br><span class=\"line\">node_js:</span><br><span class=\"line\">  - <span class=\"string\">\"10\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">cache:</span><br><span class=\"line\">  apt: <span class=\"literal\">true</span></span><br><span class=\"line\">  directories:</span><br><span class=\"line\">    - node_modules</span><br><span class=\"line\"></span><br><span class=\"line\">addons:</span><br><span class=\"line\">  ssh_known_hosts: <span class=\"variable\">$DEPLOY_IP</span></span><br><span class=\"line\"></span><br><span class=\"line\">install:</span><br><span class=\"line\">  - npm install hexo-cli@2.0.0 -g</span><br><span class=\"line\">  - npm install</span><br><span class=\"line\"></span><br><span class=\"line\">script:</span><br><span class=\"line\">  - hexo clean </span><br><span class=\"line\">  - hexo g</span><br><span class=\"line\"></span><br><span class=\"line\">before_deploy:</span><br><span class=\"line\">- openssl aes-256-cbc -K <span class=\"variable\">$encrypted_25ad2a76f550_key</span> -iv <span class=\"variable\">$encrypted_25ad2a76f550_iv</span> -<span class=\"keyword\">in</span> deploy_rsa.enc -out deploy_rsa -d</span><br><span class=\"line\">- <span class=\"built_in\">eval</span> <span class=\"string\">\"<span class=\"variable\">$(ssh-agent -s)</span>\"</span></span><br><span class=\"line\">- chmod 600 deploy_rsa</span><br><span class=\"line\">- ssh-add deploy_rsa</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  provider: script</span><br><span class=\"line\">  skip_cleanup: <span class=\"literal\">true</span></span><br><span class=\"line\">  script: rsync -e <span class=\"string\">\"ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\"</span> -r --delete-after --quiet <span class=\"variable\">$TRAVIS_BUILD_DIR</span>/public/* root@<span class=\"variable\">$DEPLOY_IP</span>:/opt/hexoBlog</span><br><span class=\"line\">  on:</span><br><span class=\"line\">    branch: master</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># deploy:</span></span><br><span class=\"line\"><span class=\"comment\">#   provider: script</span></span><br><span class=\"line\"><span class=\"comment\">#   skip_cleanup: true</span></span><br><span class=\"line\"><span class=\"comment\">#   script: scp -o StrictHostKeyChecking=no -r public/*  root@$DEPLOY_IP:/opt/hexoBlog/</span></span><br><span class=\"line\"><span class=\"comment\">#   on:</span></span><br><span class=\"line\"><span class=\"comment\">#      branch: master</span></span><br><span class=\"line\"></span><br><span class=\"line\">branches:</span><br><span class=\"line\">  only:</span><br><span class=\"line\">    - master</span><br><span class=\"line\"></span><br><span class=\"line\">notifications:</span><br><span class=\"line\">  email:</span><br><span class=\"line\">    - huguobo2010@126.com</span><br><span class=\"line\">  on_success: change</span><br><span class=\"line\">  on_failure: always</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>æŠ˜è…¾äº†å¤§åŠå¤©ï¼Œç»ˆäºçœ‹åˆ°äº† CI-Success çš„é‚®ä»¶, ç½‘ç«™ä¹Ÿæ˜¯æˆåŠŸçš„çŠ¶æ€ï¼Œäº‘ä¸»æœºå¯¹åº”ç›®å½•çš„æ–‡ä»¶ä¹Ÿç¡®å®æ›´æ–°äº†ã€‚<br>ä»¥åå†™åšå®¢ ç»ˆäº åªç”¨ git push ï¼Œå…¶ä»–çš„ç­‰é‚®ä»¶é€šçŸ¥äº†~~<br>å¦å¤– æ–‡ä¸­çš„ id_rsa.enc æ–‡ä»¶ä¸€å¼€å§‹æˆ‘ç›´æ¥ vim å¤åˆ¶çš„éƒ½æ˜¯ä¹±ç ï¼Œä¸€å¼€å§‹ä¸€ç›´æŠ¥é”™ <code>bad decrypt</code> ï¼Œåæ¥ä¸Šä¸»æœº git clone ä»“åº“ç›´æ¥ä»“åº“å†…ç”Ÿæˆå¹¶æ·»åŠ çš„ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªå‘ç‚¹ã€‚<br>è¿˜æœ‰æœ€åç”¨ <code>rsync</code> ä»£æ›¿äº† <code>scp</code><br>æœ€åä¹ŸæŠŠ openssl æ”¾åœ¨äº† before_deploy é˜¶æ®µï¼Œæ”¾åœ¨ before_installä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œè¿™äº›éƒ½æ˜¯å› äººè€Œå¼‚å•¦ã€‚<br><img src=\"/images/success.png\" alt=\"success\"></p>\n<h2 id=\"å‚è€ƒæ–‡ç« \"><a href=\"#å‚è€ƒæ–‡ç« \" class=\"headerlink\" title=\"å‚è€ƒæ–‡ç« \"></a>å‚è€ƒæ–‡ç« </h2><ul>\n<li><a href=\"https://oncletom.io/2016/travis-ssh-deploy/\" target=\"_blank\" rel=\"noopener\">https://oncletom.io/2016/travis-ssh-deploy/</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html</a></li>\n<li><a href=\"https://gems.ruby-china.com/\" target=\"_blank\" rel=\"noopener\">https://gems.ruby-china.com/</a></li>\n</ul>\n"},{"title":"Nodeæ¨¡å—æœºåˆ¶","date":"2019-08-31T15:37:17.000Z","_content":"\n## CommonJS æ¨¡å—è§„èŒƒ\nä¸»è¦åˆ†ä¸ºæ¨¡å—å¼•ç”¨ã€æ¨¡å—å®šä¹‰å’Œæ¨¡å—æ ‡è¯†3ä¸ªéƒ¨åˆ†ã€‚\n### æ¨¡å—å¼•ç”¨\n```JavaScript\nconst foo = require('foo')\n```\n### æ¨¡å—å®šä¹‰\nä½¿ç”¨requireè¿›è¡Œå¼•å…¥ï¼Œä¸Šä¸‹æ–‡æä¾›äº†exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–è€…å˜é‡ï¼Œå¹¶ä¸”å®ƒæ˜¯å”¯ä¸€çš„å‡ºå£ã€‚åœ¨æ¨¡å—ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªmoduleå¯¹è±¡ï¼Œä»£è¡¨æ¨¡å—è‡ªèº«ã€‚åœ¨Nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°exportså¯¹è±¡ä¸Šä½œä¸ºå±æ€§å³å¯å®šä¹‰å¯¼å‡ºçš„æ–¹å¼ã€‚\n```JavaScript\n// foo.js\nexports.sum = (a,b) => a+b;\n```\n### æ¨¡å—æ ‡è¯†\næ¨¡å—æ ‡è®°å°±æ˜¯ä¼ é€’ç»™require()æ–¹æ³•çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶æ¨¡å—çš„è·¯å¾„ã€‚\n\n## Nodeçš„æ¨¡å—å®ç°\nåœ¨Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»:ä¸€ç±»æ˜¯Nodeæä¾›çš„æ¨¡å—ï¼Œç§°ä¸ºæ ¸å¿ƒæ¨¡å—;å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—ã€‚\n- æ ¸å¿ƒæ¨¡å—åœ¨nodeæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚åœ¨NOdeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ç›´æ¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚\n- æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨ `è¿è¡Œæ—¶åŠ¨æ€åŠ è½½`ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢ã€‚\næ³¨ï¼šNodeå¯¹å¼•ç”¨è¿‡çš„æ¨¡å—å¤šä¼šè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„æ˜¯ç¼–è¯‘å’Œæ‰§è¡Œåçš„å¯¹è±¡ã€‚\n\nåœ¨Nodeä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ç»å†ä¸‹é¢3ä¸ªæ­¥éª¤\n1. è·¯å¾„åˆ†æ\n2. æ–‡ä»¶å®šä½\n3. ç¼–è¯‘æ‰§è¡Œ\n  \n### è·¯å¾„åˆ†æ\nrequireæ¥å—ä¸€ä¸ªæ¨¡å—æ ‡è¯†ä½œä¸ºå‚æ•°ï¼ŒåŸºäºè¿™ä¸ªå‚æ•°è¿›è¡Œæ¨¡å—æŸ¥æ‰¾ã€‚\næ ¸å¿ƒæ¨¡å—å’Œè·¯å¾„å½¢å¼çš„å¼•ç”¨ä¸ç»†ä½œè¯´æ˜ã€‚\nè¿™é‡Œè¯´ä¸‹ `è‡ªå®šä¹‰æ¨¡å—` åˆ†æè¿‡ç¨‹,è‡ªå®šä¹‰æ¨¡å—æŒ‡çš„æ˜¯æ—¢éæ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯è·¯å¾„å½¢å¼çš„æ ‡è¯†ç¬¦ã€‚\næ¨¡å—è·¯å¾„æ˜¯Nodeåœ¨å®šä½æœªè§æ—¶çš„æŸ¥æ‰¾ç­–ç•¥ï¼Œå…·ä½“è¡¨ç°ä¸ºä¸€ä¸ªè·¯å¾„ç»„æˆçš„æ•°ç»„ã€‚è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¤§æ¦‚å¦‚ä¸‹ï¼š\n- å½“å‰æ–‡ä»¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n- çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n- çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚ \n- æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n\n### æ–‡ä»¶å®šä½\n- æ‰©å±•å\nrequire()åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åçš„æƒ…å†µã€‚CommonJSæ¨¡å—è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNodeä¼šæŒ‰.jsã€.jsonã€.nodeçš„æ¬¡åºè¡¥ è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚\n- ç›®å½•åˆ†æå’ŒåŒ…\nåœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œrequire()é€šè¿‡åˆ†ææ–‡ä»¶æ‰©å±•åä¹‹åï¼Œå¯èƒ½æ²¡æœ‰æŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä½†\nå´å¾—åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™åœ¨å¼•å…¥è‡ªå®šä¹‰æ¨¡å—å’Œé€ä¸ªæ¨¡å—è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾æ—¶ç»å¸¸ä¼šå‡ºç°ï¼Œæ­¤æ—¶Nodeä¼šå°†ç›® å½•å½“åšä¸€ä¸ªåŒ…æ¥å¤„ç†ã€‚\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹CommonJSåŒ…è§„èŒƒè¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„æ”¯æŒã€‚é¦–å…ˆï¼ŒNodeåœ¨å½“å‰ç›®å½•ä¸‹ æŸ¥æ‰¾package.json(CommonJSåŒ…è§„èŒƒå®šä¹‰çš„åŒ…æè¿°æ–‡ä»¶)ï¼Œé€šè¿‡JSON.parse()è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œ ä»ä¸­å–å‡ºmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ã€‚å¦‚æœæ–‡ä»¶åç¼ºå°‘æ‰©å±•åï¼Œå°†ä¼šè¿›å…¥æ‰©å±•ååˆ†æçš„æ­¥éª¤ã€‚\nè€Œå¦‚æœmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…å‹æ ¹æ²¡æœ‰package.jsonæ–‡ä»¶ï¼ŒNodeä¼šå°†indexå½“åšé»˜ è®¤æ–‡ä»¶åï¼Œç„¶åä¾æ¬¡æŸ¥æ‰¾index.jsã€index.jsonã€index.nodeã€‚\n\n### æ¨¡å—ç¼–è¯‘\nåœ¨Nodeä¸­æ¯ä¸ªæ–‡ä»¶æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡\n```JavaScript\nfunction Module(id, parent) { \n  this.id = id;\n  this.exports = {}; \n  this.parent = parent;\n  if (parent && parent.children) { \n    parent.children.push(this);\n  }\n  this.filename = null; \n  this.loaded = false; \n  this.children = [];\n}\n```\nç¼–è¯‘å’Œæ‰§è¡Œæ˜¯å¼•å…¥æ–‡ä»¶æ¨¡å—çš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚å®šä½åˆ°å…·ä½“çš„æ–‡ä»¶åï¼ŒNodeä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹ è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ã€‚å¯¹äºä¸åŒçš„æ–‡ä»¶æ‰©å±•åï¼Œå…¶è½½å…¥æ–¹æ³•ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚\n- .jsæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œã€‚\n- .nodeæ–‡ä»¶ã€‚è¿™æ˜¯ç”¨C/C++ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡dlopen()æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚ ï± .jsonæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨JSON.parse()è§£æè¿”å›ç»“æœã€‚\n- å…¶ä½™æ‰©å±•åæ–‡ä»¶ã€‚å®ƒä»¬éƒ½è¢«å½“åš.jsæ–‡ä»¶è½½å…¥\næ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ¨¡å—éƒ½ä¼šå°†å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨Module._cacheå¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚\n\n#### JavaScriptæ¨¡å—çš„ç¼–è¯‘\nå›åˆ°CommonJSæ¨¡å—è§„èŒƒï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å­˜åœ¨ç€requireã€exportsã€moduleè¿™3ä¸ª\nå˜é‡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ¨¡å—æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä»ä½•è€Œæ¥å‘¢?ç”šè‡³åœ¨Nodeçš„APIæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬çŸ¥ é“æ¯ä¸ªæ¨¡å—ä¸­è¿˜æœ‰__filenameã€__dirnameè¿™ä¸¤ä¸ªå˜é‡çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆæ˜¯ä»ä½•è€Œæ¥çš„å‘¢?å¦‚æœæˆ‘ä»¬ æŠŠç›´æ¥å®šä¹‰æ¨¡å—çš„è¿‡ç¨‹æ”¾è¯¸åœ¨æµè§ˆå™¨ç«¯ï¼Œä¼šå­˜åœ¨æ±¡æŸ“å…¨å±€å˜é‡çš„æƒ…å†µã€‚\näº‹å®ä¸Šï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹è·å–çš„JavaScriptæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ã€‚åœ¨å¤´éƒ¨æ·»åŠ  äº†(function (exports, require, module, __filename, __dirname) {\\nï¼Œåœ¨å°¾éƒ¨æ·»åŠ äº†\\n});ã€‚ ä¸€ä¸ªæ­£å¸¸çš„JavaScriptæ–‡ä»¶ä¼šè¢«åŒ…è£…æˆå¦‚ä¸‹çš„æ ·å­:\n```JavaScript\n(function (exports, require, module, __filename, __dirname) { \n  var math = require('math');\n  exports.area = function (radius) {\n    return Math.PI * radius * radius; \n  };\n });\n```\nè¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¹‹é—´éƒ½è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»ã€‚åŒ…è£…ä¹‹åçš„ä»£ç ä¼šé€šè¿‡vmåŸç”Ÿæ¨¡å—çš„\nrunInThisContext()æ–¹æ³•æ‰§è¡Œ(ç±»ä¼¼evalï¼Œåªæ˜¯å…·æœ‰æ˜ç¡®ä¸Šä¸‹æ–‡ï¼Œä¸æ±¡æŸ“å…¨å±€)ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„ functionå¯¹è±¡ã€‚æœ€åï¼Œå°†å½“å‰æ¨¡å—å¯¹è±¡çš„exportså±æ€§ã€require()æ–¹æ³•ã€module(æ¨¡å—å¯¹è±¡è‡ªèº«)ï¼Œ ä»¥åŠåœ¨æ–‡ä»¶å®šä½ä¸­å¾—åˆ°çš„å®Œæ•´æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªfunction()æ‰§è¡Œã€‚\nè¿™å°±æ˜¯è¿™äº›å˜é‡å¹¶æ²¡æœ‰å®šä¹‰åœ¨æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å´å­˜åœ¨çš„åŸå› ã€‚åœ¨æ‰§è¡Œä¹‹åï¼Œæ¨¡å—çš„exports å±æ€§è¢«è¿”å›ç»™äº†è°ƒç”¨æ–¹ã€‚exportså±æ€§ä¸Šçš„ä»»ä½•æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨åˆ°ï¼Œä½†æ˜¯æ¨¡å—ä¸­çš„ å…¶ä½™å˜é‡æˆ–å±æ€§åˆ™ä¸å¯ç›´æ¥è¢«è°ƒç”¨ã€‚\n\næ­¤å¤–ï¼Œè®¸å¤šåˆå­¦è€…éƒ½æ›¾ç»çº ç»“è¿‡ä¸ºä½•å­˜åœ¨exportsçš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨module.exportsã€‚ç†æƒ³æƒ…\nå†µä¸‹ï¼Œåªè¦èµ‹å€¼ç»™exportså³å¯:\n```JavaScript\nexports = function () { // My Class\n```\n}; ä½†æ˜¯é€šå¸¸éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¤±è´¥çš„ç»“æœã€‚å…¶åŸå› åœ¨äºï¼Œexportså¯¹è±¡æ˜¯é€šè¿‡å½¢å‚çš„æ–¹å¼ä¼ å…¥çš„ï¼Œ\nç›´æ¥èµ‹å€¼å½¢å‚ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨ï¼Œä½†å¹¶ä¸èƒ½æ”¹å˜ä½œç”¨åŸŸå¤–çš„å€¼ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹:\n```JavaScript\nvar change = function (a) { a = 100;\nconsole.log(a); // => 100\n};\nvar a = 10;\nchange(a); console.log(a); // => 10\n```\nå¦‚æœè¦è¾¾åˆ°requireå¼•å…¥ä¸€ä¸ªç±»çš„æ•ˆæœï¼Œè¯·èµ‹å€¼ç»™module.exportså¯¹è±¡ã€‚è¿™ä¸ªè¿‚å›çš„æ–¹æ¡ˆä¸æ”¹ å˜å½¢å‚çš„å¼•ç”¨ã€‚","source":"_posts/node-1.md","raw":"---\ntitle: Nodeæ¨¡å—æœºåˆ¶\ndate: 2019-08-31 23:37:17\ncategories: \n- NODE\ntags:\n- NODE\n---\n\n## CommonJS æ¨¡å—è§„èŒƒ\nä¸»è¦åˆ†ä¸ºæ¨¡å—å¼•ç”¨ã€æ¨¡å—å®šä¹‰å’Œæ¨¡å—æ ‡è¯†3ä¸ªéƒ¨åˆ†ã€‚\n### æ¨¡å—å¼•ç”¨\n```JavaScript\nconst foo = require('foo')\n```\n### æ¨¡å—å®šä¹‰\nä½¿ç”¨requireè¿›è¡Œå¼•å…¥ï¼Œä¸Šä¸‹æ–‡æä¾›äº†exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–è€…å˜é‡ï¼Œå¹¶ä¸”å®ƒæ˜¯å”¯ä¸€çš„å‡ºå£ã€‚åœ¨æ¨¡å—ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªmoduleå¯¹è±¡ï¼Œä»£è¡¨æ¨¡å—è‡ªèº«ã€‚åœ¨Nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°exportså¯¹è±¡ä¸Šä½œä¸ºå±æ€§å³å¯å®šä¹‰å¯¼å‡ºçš„æ–¹å¼ã€‚\n```JavaScript\n// foo.js\nexports.sum = (a,b) => a+b;\n```\n### æ¨¡å—æ ‡è¯†\næ¨¡å—æ ‡è®°å°±æ˜¯ä¼ é€’ç»™require()æ–¹æ³•çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶æ¨¡å—çš„è·¯å¾„ã€‚\n\n## Nodeçš„æ¨¡å—å®ç°\nåœ¨Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»:ä¸€ç±»æ˜¯Nodeæä¾›çš„æ¨¡å—ï¼Œç§°ä¸ºæ ¸å¿ƒæ¨¡å—;å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—ã€‚\n- æ ¸å¿ƒæ¨¡å—åœ¨nodeæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚åœ¨NOdeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ç›´æ¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚\n- æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨ `è¿è¡Œæ—¶åŠ¨æ€åŠ è½½`ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢ã€‚\næ³¨ï¼šNodeå¯¹å¼•ç”¨è¿‡çš„æ¨¡å—å¤šä¼šè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„æ˜¯ç¼–è¯‘å’Œæ‰§è¡Œåçš„å¯¹è±¡ã€‚\n\nåœ¨Nodeä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ç»å†ä¸‹é¢3ä¸ªæ­¥éª¤\n1. è·¯å¾„åˆ†æ\n2. æ–‡ä»¶å®šä½\n3. ç¼–è¯‘æ‰§è¡Œ\n  \n### è·¯å¾„åˆ†æ\nrequireæ¥å—ä¸€ä¸ªæ¨¡å—æ ‡è¯†ä½œä¸ºå‚æ•°ï¼ŒåŸºäºè¿™ä¸ªå‚æ•°è¿›è¡Œæ¨¡å—æŸ¥æ‰¾ã€‚\næ ¸å¿ƒæ¨¡å—å’Œè·¯å¾„å½¢å¼çš„å¼•ç”¨ä¸ç»†ä½œè¯´æ˜ã€‚\nè¿™é‡Œè¯´ä¸‹ `è‡ªå®šä¹‰æ¨¡å—` åˆ†æè¿‡ç¨‹,è‡ªå®šä¹‰æ¨¡å—æŒ‡çš„æ˜¯æ—¢éæ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯è·¯å¾„å½¢å¼çš„æ ‡è¯†ç¬¦ã€‚\næ¨¡å—è·¯å¾„æ˜¯Nodeåœ¨å®šä½æœªè§æ—¶çš„æŸ¥æ‰¾ç­–ç•¥ï¼Œå…·ä½“è¡¨ç°ä¸ºä¸€ä¸ªè·¯å¾„ç»„æˆçš„æ•°ç»„ã€‚è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¤§æ¦‚å¦‚ä¸‹ï¼š\n- å½“å‰æ–‡ä»¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n- çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n- çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚ \n- æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚\n\n### æ–‡ä»¶å®šä½\n- æ‰©å±•å\nrequire()åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åçš„æƒ…å†µã€‚CommonJSæ¨¡å—è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNodeä¼šæŒ‰.jsã€.jsonã€.nodeçš„æ¬¡åºè¡¥ è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚\n- ç›®å½•åˆ†æå’ŒåŒ…\nåœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œrequire()é€šè¿‡åˆ†ææ–‡ä»¶æ‰©å±•åä¹‹åï¼Œå¯èƒ½æ²¡æœ‰æŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä½†\nå´å¾—åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™åœ¨å¼•å…¥è‡ªå®šä¹‰æ¨¡å—å’Œé€ä¸ªæ¨¡å—è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾æ—¶ç»å¸¸ä¼šå‡ºç°ï¼Œæ­¤æ—¶Nodeä¼šå°†ç›® å½•å½“åšä¸€ä¸ªåŒ…æ¥å¤„ç†ã€‚\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹CommonJSåŒ…è§„èŒƒè¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„æ”¯æŒã€‚é¦–å…ˆï¼ŒNodeåœ¨å½“å‰ç›®å½•ä¸‹ æŸ¥æ‰¾package.json(CommonJSåŒ…è§„èŒƒå®šä¹‰çš„åŒ…æè¿°æ–‡ä»¶)ï¼Œé€šè¿‡JSON.parse()è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œ ä»ä¸­å–å‡ºmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ã€‚å¦‚æœæ–‡ä»¶åç¼ºå°‘æ‰©å±•åï¼Œå°†ä¼šè¿›å…¥æ‰©å±•ååˆ†æçš„æ­¥éª¤ã€‚\nè€Œå¦‚æœmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…å‹æ ¹æ²¡æœ‰package.jsonæ–‡ä»¶ï¼ŒNodeä¼šå°†indexå½“åšé»˜ è®¤æ–‡ä»¶åï¼Œç„¶åä¾æ¬¡æŸ¥æ‰¾index.jsã€index.jsonã€index.nodeã€‚\n\n### æ¨¡å—ç¼–è¯‘\nåœ¨Nodeä¸­æ¯ä¸ªæ–‡ä»¶æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡\n```JavaScript\nfunction Module(id, parent) { \n  this.id = id;\n  this.exports = {}; \n  this.parent = parent;\n  if (parent && parent.children) { \n    parent.children.push(this);\n  }\n  this.filename = null; \n  this.loaded = false; \n  this.children = [];\n}\n```\nç¼–è¯‘å’Œæ‰§è¡Œæ˜¯å¼•å…¥æ–‡ä»¶æ¨¡å—çš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚å®šä½åˆ°å…·ä½“çš„æ–‡ä»¶åï¼ŒNodeä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹ è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ã€‚å¯¹äºä¸åŒçš„æ–‡ä»¶æ‰©å±•åï¼Œå…¶è½½å…¥æ–¹æ³•ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚\n- .jsæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œã€‚\n- .nodeæ–‡ä»¶ã€‚è¿™æ˜¯ç”¨C/C++ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡dlopen()æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚ ï± .jsonæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨JSON.parse()è§£æè¿”å›ç»“æœã€‚\n- å…¶ä½™æ‰©å±•åæ–‡ä»¶ã€‚å®ƒä»¬éƒ½è¢«å½“åš.jsæ–‡ä»¶è½½å…¥\næ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ¨¡å—éƒ½ä¼šå°†å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨Module._cacheå¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚\n\n#### JavaScriptæ¨¡å—çš„ç¼–è¯‘\nå›åˆ°CommonJSæ¨¡å—è§„èŒƒï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å­˜åœ¨ç€requireã€exportsã€moduleè¿™3ä¸ª\nå˜é‡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ¨¡å—æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä»ä½•è€Œæ¥å‘¢?ç”šè‡³åœ¨Nodeçš„APIæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬çŸ¥ é“æ¯ä¸ªæ¨¡å—ä¸­è¿˜æœ‰__filenameã€__dirnameè¿™ä¸¤ä¸ªå˜é‡çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆæ˜¯ä»ä½•è€Œæ¥çš„å‘¢?å¦‚æœæˆ‘ä»¬ æŠŠç›´æ¥å®šä¹‰æ¨¡å—çš„è¿‡ç¨‹æ”¾è¯¸åœ¨æµè§ˆå™¨ç«¯ï¼Œä¼šå­˜åœ¨æ±¡æŸ“å…¨å±€å˜é‡çš„æƒ…å†µã€‚\näº‹å®ä¸Šï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹è·å–çš„JavaScriptæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ã€‚åœ¨å¤´éƒ¨æ·»åŠ  äº†(function (exports, require, module, __filename, __dirname) {\\nï¼Œåœ¨å°¾éƒ¨æ·»åŠ äº†\\n});ã€‚ ä¸€ä¸ªæ­£å¸¸çš„JavaScriptæ–‡ä»¶ä¼šè¢«åŒ…è£…æˆå¦‚ä¸‹çš„æ ·å­:\n```JavaScript\n(function (exports, require, module, __filename, __dirname) { \n  var math = require('math');\n  exports.area = function (radius) {\n    return Math.PI * radius * radius; \n  };\n });\n```\nè¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¹‹é—´éƒ½è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»ã€‚åŒ…è£…ä¹‹åçš„ä»£ç ä¼šé€šè¿‡vmåŸç”Ÿæ¨¡å—çš„\nrunInThisContext()æ–¹æ³•æ‰§è¡Œ(ç±»ä¼¼evalï¼Œåªæ˜¯å…·æœ‰æ˜ç¡®ä¸Šä¸‹æ–‡ï¼Œä¸æ±¡æŸ“å…¨å±€)ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„ functionå¯¹è±¡ã€‚æœ€åï¼Œå°†å½“å‰æ¨¡å—å¯¹è±¡çš„exportså±æ€§ã€require()æ–¹æ³•ã€module(æ¨¡å—å¯¹è±¡è‡ªèº«)ï¼Œ ä»¥åŠåœ¨æ–‡ä»¶å®šä½ä¸­å¾—åˆ°çš„å®Œæ•´æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªfunction()æ‰§è¡Œã€‚\nè¿™å°±æ˜¯è¿™äº›å˜é‡å¹¶æ²¡æœ‰å®šä¹‰åœ¨æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å´å­˜åœ¨çš„åŸå› ã€‚åœ¨æ‰§è¡Œä¹‹åï¼Œæ¨¡å—çš„exports å±æ€§è¢«è¿”å›ç»™äº†è°ƒç”¨æ–¹ã€‚exportså±æ€§ä¸Šçš„ä»»ä½•æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨åˆ°ï¼Œä½†æ˜¯æ¨¡å—ä¸­çš„ å…¶ä½™å˜é‡æˆ–å±æ€§åˆ™ä¸å¯ç›´æ¥è¢«è°ƒç”¨ã€‚\n\næ­¤å¤–ï¼Œè®¸å¤šåˆå­¦è€…éƒ½æ›¾ç»çº ç»“è¿‡ä¸ºä½•å­˜åœ¨exportsçš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨module.exportsã€‚ç†æƒ³æƒ…\nå†µä¸‹ï¼Œåªè¦èµ‹å€¼ç»™exportså³å¯:\n```JavaScript\nexports = function () { // My Class\n```\n}; ä½†æ˜¯é€šå¸¸éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¤±è´¥çš„ç»“æœã€‚å…¶åŸå› åœ¨äºï¼Œexportså¯¹è±¡æ˜¯é€šè¿‡å½¢å‚çš„æ–¹å¼ä¼ å…¥çš„ï¼Œ\nç›´æ¥èµ‹å€¼å½¢å‚ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨ï¼Œä½†å¹¶ä¸èƒ½æ”¹å˜ä½œç”¨åŸŸå¤–çš„å€¼ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹:\n```JavaScript\nvar change = function (a) { a = 100;\nconsole.log(a); // => 100\n};\nvar a = 10;\nchange(a); console.log(a); // => 10\n```\nå¦‚æœè¦è¾¾åˆ°requireå¼•å…¥ä¸€ä¸ªç±»çš„æ•ˆæœï¼Œè¯·èµ‹å€¼ç»™module.exportså¯¹è±¡ã€‚è¿™ä¸ªè¿‚å›çš„æ–¹æ¡ˆä¸æ”¹ å˜å½¢å‚çš„å¼•ç”¨ã€‚","slug":"node-1","published":1,"updated":"2019-09-23T13:24:56.621Z","_id":"ck0wfvhpy0004uhoxve5se6ml","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"CommonJS-æ¨¡å—è§„èŒƒ\"><a href=\"#CommonJS-æ¨¡å—è§„èŒƒ\" class=\"headerlink\" title=\"CommonJS æ¨¡å—è§„èŒƒ\"></a>CommonJS æ¨¡å—è§„èŒƒ</h2><p>ä¸»è¦åˆ†ä¸ºæ¨¡å—å¼•ç”¨ã€æ¨¡å—å®šä¹‰å’Œæ¨¡å—æ ‡è¯†3ä¸ªéƒ¨åˆ†ã€‚</p>\n<h3 id=\"æ¨¡å—å¼•ç”¨\"><a href=\"#æ¨¡å—å¼•ç”¨\" class=\"headerlink\" title=\"æ¨¡å—å¼•ç”¨\"></a>æ¨¡å—å¼•ç”¨</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> foo = <span class=\"built_in\">require</span>(<span class=\"string\">'foo'</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¨¡å—å®šä¹‰\"><a href=\"#æ¨¡å—å®šä¹‰\" class=\"headerlink\" title=\"æ¨¡å—å®šä¹‰\"></a>æ¨¡å—å®šä¹‰</h3><p>ä½¿ç”¨requireè¿›è¡Œå¼•å…¥ï¼Œä¸Šä¸‹æ–‡æä¾›äº†exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–è€…å˜é‡ï¼Œå¹¶ä¸”å®ƒæ˜¯å”¯ä¸€çš„å‡ºå£ã€‚åœ¨æ¨¡å—ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªmoduleå¯¹è±¡ï¼Œä»£è¡¨æ¨¡å—è‡ªèº«ã€‚åœ¨Nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°exportså¯¹è±¡ä¸Šä½œä¸ºå±æ€§å³å¯å®šä¹‰å¯¼å‡ºçš„æ–¹å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// foo.js</span></span><br><span class=\"line\">exports.sum = <span class=\"function\">(<span class=\"params\">a,b</span>) =&gt;</span> a+b;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¨¡å—æ ‡è¯†\"><a href=\"#æ¨¡å—æ ‡è¯†\" class=\"headerlink\" title=\"æ¨¡å—æ ‡è¯†\"></a>æ¨¡å—æ ‡è¯†</h3><p>æ¨¡å—æ ‡è®°å°±æ˜¯ä¼ é€’ç»™require()æ–¹æ³•çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶æ¨¡å—çš„è·¯å¾„ã€‚</p>\n<h2 id=\"Nodeçš„æ¨¡å—å®ç°\"><a href=\"#Nodeçš„æ¨¡å—å®ç°\" class=\"headerlink\" title=\"Nodeçš„æ¨¡å—å®ç°\"></a>Nodeçš„æ¨¡å—å®ç°</h2><p>åœ¨Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»:ä¸€ç±»æ˜¯Nodeæä¾›çš„æ¨¡å—ï¼Œç§°ä¸ºæ ¸å¿ƒæ¨¡å—;å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—ã€‚</p>\n<ul>\n<li>æ ¸å¿ƒæ¨¡å—åœ¨nodeæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚åœ¨NOdeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ç›´æ¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>\n<li>æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨ <code>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½</code>ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢ã€‚<br>æ³¨ï¼šNodeå¯¹å¼•ç”¨è¿‡çš„æ¨¡å—å¤šä¼šè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„æ˜¯ç¼–è¯‘å’Œæ‰§è¡Œåçš„å¯¹è±¡ã€‚</li>\n</ul>\n<p>åœ¨Nodeä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ç»å†ä¸‹é¢3ä¸ªæ­¥éª¤</p>\n<ol>\n<li>è·¯å¾„åˆ†æ</li>\n<li>æ–‡ä»¶å®šä½</li>\n<li>ç¼–è¯‘æ‰§è¡Œ</li>\n</ol>\n<h3 id=\"è·¯å¾„åˆ†æ\"><a href=\"#è·¯å¾„åˆ†æ\" class=\"headerlink\" title=\"è·¯å¾„åˆ†æ\"></a>è·¯å¾„åˆ†æ</h3><p>requireæ¥å—ä¸€ä¸ªæ¨¡å—æ ‡è¯†ä½œä¸ºå‚æ•°ï¼ŒåŸºäºè¿™ä¸ªå‚æ•°è¿›è¡Œæ¨¡å—æŸ¥æ‰¾ã€‚<br>æ ¸å¿ƒæ¨¡å—å’Œè·¯å¾„å½¢å¼çš„å¼•ç”¨ä¸ç»†ä½œè¯´æ˜ã€‚<br>è¿™é‡Œè¯´ä¸‹ <code>è‡ªå®šä¹‰æ¨¡å—</code> åˆ†æè¿‡ç¨‹,è‡ªå®šä¹‰æ¨¡å—æŒ‡çš„æ˜¯æ—¢éæ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯è·¯å¾„å½¢å¼çš„æ ‡è¯†ç¬¦ã€‚<br>æ¨¡å—è·¯å¾„æ˜¯Nodeåœ¨å®šä½æœªè§æ—¶çš„æŸ¥æ‰¾ç­–ç•¥ï¼Œå…·ä½“è¡¨ç°ä¸ºä¸€ä¸ªè·¯å¾„ç»„æˆçš„æ•°ç»„ã€‚è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¤§æ¦‚å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å½“å‰æ–‡ä»¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n<li>çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n<li>çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚ </li>\n<li>æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n</ul>\n<h3 id=\"æ–‡ä»¶å®šä½\"><a href=\"#æ–‡ä»¶å®šä½\" class=\"headerlink\" title=\"æ–‡ä»¶å®šä½\"></a>æ–‡ä»¶å®šä½</h3><ul>\n<li>æ‰©å±•å<br>require()åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åçš„æƒ…å†µã€‚CommonJSæ¨¡å—è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNodeä¼šæŒ‰.jsã€.jsonã€.nodeçš„æ¬¡åºè¡¥ è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚</li>\n<li>ç›®å½•åˆ†æå’ŒåŒ…<br>åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œrequire()é€šè¿‡åˆ†ææ–‡ä»¶æ‰©å±•åä¹‹åï¼Œå¯èƒ½æ²¡æœ‰æŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä½†<br>å´å¾—åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™åœ¨å¼•å…¥è‡ªå®šä¹‰æ¨¡å—å’Œé€ä¸ªæ¨¡å—è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾æ—¶ç»å¸¸ä¼šå‡ºç°ï¼Œæ­¤æ—¶Nodeä¼šå°†ç›® å½•å½“åšä¸€ä¸ªåŒ…æ¥å¤„ç†ã€‚<br>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹CommonJSåŒ…è§„èŒƒè¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„æ”¯æŒã€‚é¦–å…ˆï¼ŒNodeåœ¨å½“å‰ç›®å½•ä¸‹ æŸ¥æ‰¾package.json(CommonJSåŒ…è§„èŒƒå®šä¹‰çš„åŒ…æè¿°æ–‡ä»¶)ï¼Œé€šè¿‡JSON.parse()è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œ ä»ä¸­å–å‡ºmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ã€‚å¦‚æœæ–‡ä»¶åç¼ºå°‘æ‰©å±•åï¼Œå°†ä¼šè¿›å…¥æ‰©å±•ååˆ†æçš„æ­¥éª¤ã€‚<br>è€Œå¦‚æœmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…å‹æ ¹æ²¡æœ‰package.jsonæ–‡ä»¶ï¼ŒNodeä¼šå°†indexå½“åšé»˜ è®¤æ–‡ä»¶åï¼Œç„¶åä¾æ¬¡æŸ¥æ‰¾index.jsã€index.jsonã€index.nodeã€‚</li>\n</ul>\n<h3 id=\"æ¨¡å—ç¼–è¯‘\"><a href=\"#æ¨¡å—ç¼–è¯‘\" class=\"headerlink\" title=\"æ¨¡å—ç¼–è¯‘\"></a>æ¨¡å—ç¼–è¯‘</h3><p>åœ¨Nodeä¸­æ¯ä¸ªæ–‡ä»¶æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Module</span>(<span class=\"params\">id, parent</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.exports = &#123;&#125;; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.parent = parent;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parent &amp;&amp; parent.children) &#123; </span><br><span class=\"line\">    parent.children.push(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.filename = <span class=\"literal\">null</span>; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.loaded = <span class=\"literal\">false</span>; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.children = [];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼–è¯‘å’Œæ‰§è¡Œæ˜¯å¼•å…¥æ–‡ä»¶æ¨¡å—çš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚å®šä½åˆ°å…·ä½“çš„æ–‡ä»¶åï¼ŒNodeä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹ è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ã€‚å¯¹äºä¸åŒçš„æ–‡ä»¶æ‰©å±•åï¼Œå…¶è½½å…¥æ–¹æ³•ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<ul>\n<li>.jsæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œã€‚</li>\n<li>.nodeæ–‡ä»¶ã€‚è¿™æ˜¯ç”¨C/C++ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡dlopen()æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚ ï± .jsonæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨JSON.parse()è§£æè¿”å›ç»“æœã€‚</li>\n<li>å…¶ä½™æ‰©å±•åæ–‡ä»¶ã€‚å®ƒä»¬éƒ½è¢«å½“åš.jsæ–‡ä»¶è½½å…¥<br>æ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ¨¡å—éƒ½ä¼šå°†å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨Module._cacheå¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚</li>\n</ul>\n<h4 id=\"JavaScriptæ¨¡å—çš„ç¼–è¯‘\"><a href=\"#JavaScriptæ¨¡å—çš„ç¼–è¯‘\" class=\"headerlink\" title=\"JavaScriptæ¨¡å—çš„ç¼–è¯‘\"></a>JavaScriptæ¨¡å—çš„ç¼–è¯‘</h4><p>å›åˆ°CommonJSæ¨¡å—è§„èŒƒï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å­˜åœ¨ç€requireã€exportsã€moduleè¿™3ä¸ª<br>å˜é‡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ¨¡å—æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä»ä½•è€Œæ¥å‘¢?ç”šè‡³åœ¨Nodeçš„APIæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬çŸ¥ é“æ¯ä¸ªæ¨¡å—ä¸­è¿˜æœ‰<strong>filenameã€</strong>dirnameè¿™ä¸¤ä¸ªå˜é‡çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆæ˜¯ä»ä½•è€Œæ¥çš„å‘¢?å¦‚æœæˆ‘ä»¬ æŠŠç›´æ¥å®šä¹‰æ¨¡å—çš„è¿‡ç¨‹æ”¾è¯¸åœ¨æµè§ˆå™¨ç«¯ï¼Œä¼šå­˜åœ¨æ±¡æŸ“å…¨å±€å˜é‡çš„æƒ…å†µã€‚<br>äº‹å®ä¸Šï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹è·å–çš„JavaScriptæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ã€‚åœ¨å¤´éƒ¨æ·»åŠ  äº†(function (exports, require, module, __filename, __dirname) {\\nï¼Œåœ¨å°¾éƒ¨æ·»åŠ äº†\\n});ã€‚ ä¸€ä¸ªæ­£å¸¸çš„JavaScriptæ–‡ä»¶ä¼šè¢«åŒ…è£…æˆå¦‚ä¸‹çš„æ ·å­:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports, require, module, __filename, __dirname</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">var</span> math = <span class=\"built_in\">require</span>(<span class=\"string\">'math'</span>);</span><br><span class=\"line\">  exports.area = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">radius</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * radius * radius; </span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¹‹é—´éƒ½è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»ã€‚åŒ…è£…ä¹‹åçš„ä»£ç ä¼šé€šè¿‡vmåŸç”Ÿæ¨¡å—çš„<br>runInThisContext()æ–¹æ³•æ‰§è¡Œ(ç±»ä¼¼evalï¼Œåªæ˜¯å…·æœ‰æ˜ç¡®ä¸Šä¸‹æ–‡ï¼Œä¸æ±¡æŸ“å…¨å±€)ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„ functionå¯¹è±¡ã€‚æœ€åï¼Œå°†å½“å‰æ¨¡å—å¯¹è±¡çš„exportså±æ€§ã€require()æ–¹æ³•ã€module(æ¨¡å—å¯¹è±¡è‡ªèº«)ï¼Œ ä»¥åŠåœ¨æ–‡ä»¶å®šä½ä¸­å¾—åˆ°çš„å®Œæ•´æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªfunction()æ‰§è¡Œã€‚<br>è¿™å°±æ˜¯è¿™äº›å˜é‡å¹¶æ²¡æœ‰å®šä¹‰åœ¨æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å´å­˜åœ¨çš„åŸå› ã€‚åœ¨æ‰§è¡Œä¹‹åï¼Œæ¨¡å—çš„exports å±æ€§è¢«è¿”å›ç»™äº†è°ƒç”¨æ–¹ã€‚exportså±æ€§ä¸Šçš„ä»»ä½•æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨åˆ°ï¼Œä½†æ˜¯æ¨¡å—ä¸­çš„ å…¶ä½™å˜é‡æˆ–å±æ€§åˆ™ä¸å¯ç›´æ¥è¢«è°ƒç”¨ã€‚</p>\n<p>æ­¤å¤–ï¼Œè®¸å¤šåˆå­¦è€…éƒ½æ›¾ç»çº ç»“è¿‡ä¸ºä½•å­˜åœ¨exportsçš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨module.exportsã€‚ç†æƒ³æƒ…<br>å†µä¸‹ï¼Œåªè¦èµ‹å€¼ç»™exportså³å¯:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// My Class</span></span><br></pre></td></tr></table></figure>\n\n<p>}; ä½†æ˜¯é€šå¸¸éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¤±è´¥çš„ç»“æœã€‚å…¶åŸå› åœ¨äºï¼Œexportså¯¹è±¡æ˜¯é€šè¿‡å½¢å‚çš„æ–¹å¼ä¼ å…¥çš„ï¼Œ<br>ç›´æ¥èµ‹å€¼å½¢å‚ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨ï¼Œä½†å¹¶ä¸èƒ½æ”¹å˜ä½œç”¨åŸŸå¤–çš„å€¼ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> change = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a</span>) </span>&#123; a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// =&gt; 100</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">change(a); <span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// =&gt; 10</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¦è¾¾åˆ°requireå¼•å…¥ä¸€ä¸ªç±»çš„æ•ˆæœï¼Œè¯·èµ‹å€¼ç»™module.exportså¯¹è±¡ã€‚è¿™ä¸ªè¿‚å›çš„æ–¹æ¡ˆä¸æ”¹ å˜å½¢å‚çš„å¼•ç”¨ã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"CommonJS-æ¨¡å—è§„èŒƒ\"><a href=\"#CommonJS-æ¨¡å—è§„èŒƒ\" class=\"headerlink\" title=\"CommonJS æ¨¡å—è§„èŒƒ\"></a>CommonJS æ¨¡å—è§„èŒƒ</h2><p>ä¸»è¦åˆ†ä¸ºæ¨¡å—å¼•ç”¨ã€æ¨¡å—å®šä¹‰å’Œæ¨¡å—æ ‡è¯†3ä¸ªéƒ¨åˆ†ã€‚</p>\n<h3 id=\"æ¨¡å—å¼•ç”¨\"><a href=\"#æ¨¡å—å¼•ç”¨\" class=\"headerlink\" title=\"æ¨¡å—å¼•ç”¨\"></a>æ¨¡å—å¼•ç”¨</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> foo = <span class=\"built_in\">require</span>(<span class=\"string\">'foo'</span>)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¨¡å—å®šä¹‰\"><a href=\"#æ¨¡å—å®šä¹‰\" class=\"headerlink\" title=\"æ¨¡å—å®šä¹‰\"></a>æ¨¡å—å®šä¹‰</h3><p>ä½¿ç”¨requireè¿›è¡Œå¼•å…¥ï¼Œä¸Šä¸‹æ–‡æä¾›äº†exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–è€…å˜é‡ï¼Œå¹¶ä¸”å®ƒæ˜¯å”¯ä¸€çš„å‡ºå£ã€‚åœ¨æ¨¡å—ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªmoduleå¯¹è±¡ï¼Œä»£è¡¨æ¨¡å—è‡ªèº«ã€‚åœ¨Nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°exportså¯¹è±¡ä¸Šä½œä¸ºå±æ€§å³å¯å®šä¹‰å¯¼å‡ºçš„æ–¹å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// foo.js</span></span><br><span class=\"line\">exports.sum = <span class=\"function\">(<span class=\"params\">a,b</span>) =&gt;</span> a+b;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ¨¡å—æ ‡è¯†\"><a href=\"#æ¨¡å—æ ‡è¯†\" class=\"headerlink\" title=\"æ¨¡å—æ ‡è¯†\"></a>æ¨¡å—æ ‡è¯†</h3><p>æ¨¡å—æ ‡è®°å°±æ˜¯ä¼ é€’ç»™require()æ–¹æ³•çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶æ¨¡å—çš„è·¯å¾„ã€‚</p>\n<h2 id=\"Nodeçš„æ¨¡å—å®ç°\"><a href=\"#Nodeçš„æ¨¡å—å®ç°\" class=\"headerlink\" title=\"Nodeçš„æ¨¡å—å®ç°\"></a>Nodeçš„æ¨¡å—å®ç°</h2><p>åœ¨Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»:ä¸€ç±»æ˜¯Nodeæä¾›çš„æ¨¡å—ï¼Œç§°ä¸ºæ ¸å¿ƒæ¨¡å—;å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—ã€‚</p>\n<ul>\n<li>æ ¸å¿ƒæ¨¡å—åœ¨nodeæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚åœ¨NOdeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ç›´æ¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li>\n<li>æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨ <code>è¿è¡Œæ—¶åŠ¨æ€åŠ è½½</code>ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢ã€‚<br>æ³¨ï¼šNodeå¯¹å¼•ç”¨è¿‡çš„æ¨¡å—å¤šä¼šè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜çš„æ˜¯ç¼–è¯‘å’Œæ‰§è¡Œåçš„å¯¹è±¡ã€‚</li>\n</ul>\n<p>åœ¨Nodeä¸­å¼•å…¥æ¨¡å—ï¼Œéœ€è¦ç»å†ä¸‹é¢3ä¸ªæ­¥éª¤</p>\n<ol>\n<li>è·¯å¾„åˆ†æ</li>\n<li>æ–‡ä»¶å®šä½</li>\n<li>ç¼–è¯‘æ‰§è¡Œ</li>\n</ol>\n<h3 id=\"è·¯å¾„åˆ†æ\"><a href=\"#è·¯å¾„åˆ†æ\" class=\"headerlink\" title=\"è·¯å¾„åˆ†æ\"></a>è·¯å¾„åˆ†æ</h3><p>requireæ¥å—ä¸€ä¸ªæ¨¡å—æ ‡è¯†ä½œä¸ºå‚æ•°ï¼ŒåŸºäºè¿™ä¸ªå‚æ•°è¿›è¡Œæ¨¡å—æŸ¥æ‰¾ã€‚<br>æ ¸å¿ƒæ¨¡å—å’Œè·¯å¾„å½¢å¼çš„å¼•ç”¨ä¸ç»†ä½œè¯´æ˜ã€‚<br>è¿™é‡Œè¯´ä¸‹ <code>è‡ªå®šä¹‰æ¨¡å—</code> åˆ†æè¿‡ç¨‹,è‡ªå®šä¹‰æ¨¡å—æŒ‡çš„æ˜¯æ—¢éæ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯è·¯å¾„å½¢å¼çš„æ ‡è¯†ç¬¦ã€‚<br>æ¨¡å—è·¯å¾„æ˜¯Nodeåœ¨å®šä½æœªè§æ—¶çš„æŸ¥æ‰¾ç­–ç•¥ï¼Œå…·ä½“è¡¨ç°ä¸ºä¸€ä¸ªè·¯å¾„ç»„æˆçš„æ•°ç»„ã€‚è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¤§æ¦‚å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å½“å‰æ–‡ä»¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n<li>çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n<li>çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚ </li>\n<li>æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„node_modulesç›®å½•ã€‚</li>\n</ul>\n<h3 id=\"æ–‡ä»¶å®šä½\"><a href=\"#æ–‡ä»¶å®šä½\" class=\"headerlink\" title=\"æ–‡ä»¶å®šä½\"></a>æ–‡ä»¶å®šä½</h3><ul>\n<li>æ‰©å±•å<br>require()åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åçš„æƒ…å†µã€‚CommonJSæ¨¡å—è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNodeä¼šæŒ‰.jsã€.jsonã€.nodeçš„æ¬¡åºè¡¥ è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚</li>\n<li>ç›®å½•åˆ†æå’ŒåŒ…<br>åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œrequire()é€šè¿‡åˆ†ææ–‡ä»¶æ‰©å±•åä¹‹åï¼Œå¯èƒ½æ²¡æœ‰æŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä½†<br>å´å¾—åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™åœ¨å¼•å…¥è‡ªå®šä¹‰æ¨¡å—å’Œé€ä¸ªæ¨¡å—è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾æ—¶ç»å¸¸ä¼šå‡ºç°ï¼Œæ­¤æ—¶Nodeä¼šå°†ç›® å½•å½“åšä¸€ä¸ªåŒ…æ¥å¤„ç†ã€‚<br>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹CommonJSåŒ…è§„èŒƒè¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„æ”¯æŒã€‚é¦–å…ˆï¼ŒNodeåœ¨å½“å‰ç›®å½•ä¸‹ æŸ¥æ‰¾package.json(CommonJSåŒ…è§„èŒƒå®šä¹‰çš„åŒ…æè¿°æ–‡ä»¶)ï¼Œé€šè¿‡JSON.parse()è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œ ä»ä¸­å–å‡ºmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ã€‚å¦‚æœæ–‡ä»¶åç¼ºå°‘æ‰©å±•åï¼Œå°†ä¼šè¿›å…¥æ‰©å±•ååˆ†æçš„æ­¥éª¤ã€‚<br>è€Œå¦‚æœmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…å‹æ ¹æ²¡æœ‰package.jsonæ–‡ä»¶ï¼ŒNodeä¼šå°†indexå½“åšé»˜ è®¤æ–‡ä»¶åï¼Œç„¶åä¾æ¬¡æŸ¥æ‰¾index.jsã€index.jsonã€index.nodeã€‚</li>\n</ul>\n<h3 id=\"æ¨¡å—ç¼–è¯‘\"><a href=\"#æ¨¡å—ç¼–è¯‘\" class=\"headerlink\" title=\"æ¨¡å—ç¼–è¯‘\"></a>æ¨¡å—ç¼–è¯‘</h3><p>åœ¨Nodeä¸­æ¯ä¸ªæ–‡ä»¶æ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Module</span>(<span class=\"params\">id, parent</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.exports = &#123;&#125;; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.parent = parent;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (parent &amp;&amp; parent.children) &#123; </span><br><span class=\"line\">    parent.children.push(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.filename = <span class=\"literal\">null</span>; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.loaded = <span class=\"literal\">false</span>; </span><br><span class=\"line\">  <span class=\"keyword\">this</span>.children = [];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç¼–è¯‘å’Œæ‰§è¡Œæ˜¯å¼•å…¥æ–‡ä»¶æ¨¡å—çš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚å®šä½åˆ°å…·ä½“çš„æ–‡ä»¶åï¼ŒNodeä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹ è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ã€‚å¯¹äºä¸åŒçš„æ–‡ä»¶æ‰©å±•åï¼Œå…¶è½½å…¥æ–¹æ³•ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<ul>\n<li>.jsæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œã€‚</li>\n<li>.nodeæ–‡ä»¶ã€‚è¿™æ˜¯ç”¨C/C++ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡dlopen()æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚ ï± .jsonæ–‡ä»¶ã€‚é€šè¿‡fsæ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨JSON.parse()è§£æè¿”å›ç»“æœã€‚</li>\n<li>å…¶ä½™æ‰©å±•åæ–‡ä»¶ã€‚å®ƒä»¬éƒ½è¢«å½“åš.jsæ–‡ä»¶è½½å…¥<br>æ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ¨¡å—éƒ½ä¼šå°†å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨Module._cacheå¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚</li>\n</ul>\n<h4 id=\"JavaScriptæ¨¡å—çš„ç¼–è¯‘\"><a href=\"#JavaScriptæ¨¡å—çš„ç¼–è¯‘\" class=\"headerlink\" title=\"JavaScriptæ¨¡å—çš„ç¼–è¯‘\"></a>JavaScriptæ¨¡å—çš„ç¼–è¯‘</h4><p>å›åˆ°CommonJSæ¨¡å—è§„èŒƒï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å­˜åœ¨ç€requireã€exportsã€moduleè¿™3ä¸ª<br>å˜é‡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ¨¡å—æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä»ä½•è€Œæ¥å‘¢?ç”šè‡³åœ¨Nodeçš„APIæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬çŸ¥ é“æ¯ä¸ªæ¨¡å—ä¸­è¿˜æœ‰<strong>filenameã€</strong>dirnameè¿™ä¸¤ä¸ªå˜é‡çš„å­˜åœ¨ï¼Œå®ƒä»¬åˆæ˜¯ä»ä½•è€Œæ¥çš„å‘¢?å¦‚æœæˆ‘ä»¬ æŠŠç›´æ¥å®šä¹‰æ¨¡å—çš„è¿‡ç¨‹æ”¾è¯¸åœ¨æµè§ˆå™¨ç«¯ï¼Œä¼šå­˜åœ¨æ±¡æŸ“å…¨å±€å˜é‡çš„æƒ…å†µã€‚<br>äº‹å®ä¸Šï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒNodeå¯¹è·å–çš„JavaScriptæ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ã€‚åœ¨å¤´éƒ¨æ·»åŠ  äº†(function (exports, require, module, __filename, __dirname) {\\nï¼Œåœ¨å°¾éƒ¨æ·»åŠ äº†\\n});ã€‚ ä¸€ä¸ªæ­£å¸¸çš„JavaScriptæ–‡ä»¶ä¼šè¢«åŒ…è£…æˆå¦‚ä¸‹çš„æ ·å­:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports, require, module, __filename, __dirname</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"keyword\">var</span> math = <span class=\"built_in\">require</span>(<span class=\"string\">'math'</span>);</span><br><span class=\"line\">  exports.area = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">radius</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * radius * radius; </span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¹‹é—´éƒ½è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»ã€‚åŒ…è£…ä¹‹åçš„ä»£ç ä¼šé€šè¿‡vmåŸç”Ÿæ¨¡å—çš„<br>runInThisContext()æ–¹æ³•æ‰§è¡Œ(ç±»ä¼¼evalï¼Œåªæ˜¯å…·æœ‰æ˜ç¡®ä¸Šä¸‹æ–‡ï¼Œä¸æ±¡æŸ“å…¨å±€)ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„ functionå¯¹è±¡ã€‚æœ€åï¼Œå°†å½“å‰æ¨¡å—å¯¹è±¡çš„exportså±æ€§ã€require()æ–¹æ³•ã€module(æ¨¡å—å¯¹è±¡è‡ªèº«)ï¼Œ ä»¥åŠåœ¨æ–‡ä»¶å®šä½ä¸­å¾—åˆ°çš„å®Œæ•´æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªfunction()æ‰§è¡Œã€‚<br>è¿™å°±æ˜¯è¿™äº›å˜é‡å¹¶æ²¡æœ‰å®šä¹‰åœ¨æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å´å­˜åœ¨çš„åŸå› ã€‚åœ¨æ‰§è¡Œä¹‹åï¼Œæ¨¡å—çš„exports å±æ€§è¢«è¿”å›ç»™äº†è°ƒç”¨æ–¹ã€‚exportså±æ€§ä¸Šçš„ä»»ä½•æ–¹æ³•å’Œå±æ€§éƒ½å¯ä»¥è¢«å¤–éƒ¨è°ƒç”¨åˆ°ï¼Œä½†æ˜¯æ¨¡å—ä¸­çš„ å…¶ä½™å˜é‡æˆ–å±æ€§åˆ™ä¸å¯ç›´æ¥è¢«è°ƒç”¨ã€‚</p>\n<p>æ­¤å¤–ï¼Œè®¸å¤šåˆå­¦è€…éƒ½æ›¾ç»çº ç»“è¿‡ä¸ºä½•å­˜åœ¨exportsçš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨module.exportsã€‚ç†æƒ³æƒ…<br>å†µä¸‹ï¼Œåªè¦èµ‹å€¼ç»™exportså³å¯:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// My Class</span></span><br></pre></td></tr></table></figure>\n\n<p>}; ä½†æ˜¯é€šå¸¸éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¤±è´¥çš„ç»“æœã€‚å…¶åŸå› åœ¨äºï¼Œexportså¯¹è±¡æ˜¯é€šè¿‡å½¢å‚çš„æ–¹å¼ä¼ å…¥çš„ï¼Œ<br>ç›´æ¥èµ‹å€¼å½¢å‚ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨ï¼Œä½†å¹¶ä¸èƒ½æ”¹å˜ä½œç”¨åŸŸå¤–çš„å€¼ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> change = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a</span>) </span>&#123; a = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// =&gt; 100</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">change(a); <span class=\"built_in\">console</span>.log(a); <span class=\"comment\">// =&gt; 10</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¦è¾¾åˆ°requireå¼•å…¥ä¸€ä¸ªç±»çš„æ•ˆæœï¼Œè¯·èµ‹å€¼ç»™module.exportså¯¹è±¡ã€‚è¿™ä¸ªè¿‚å›çš„æ–¹æ¡ˆä¸æ”¹ å˜å½¢å‚çš„å¼•ç”¨ã€‚</p>\n"},{"title":"HHKBé”®ç›˜","date":"2019-09-10T09:15:39.000Z","_content":"\n> ç¾å›½è¥¿éƒ¨çš„ç‰›ä»”ä»¬ï¼Œä¼šå°†æ­»å»çš„é©¬å„¿ç•™åœ¨åŸåœ°ï¼Œä½†æ˜¯ä»ç„¶ä¼šæ‰›ç€é©¬éé•¿é€”è·‹æ¶‰ï¼Œç©¿è¶Šä¸€æœ›æ— å çš„æ²™æ¼ ã€‚å› ä¸ºé©¬å„¿æ˜¯æ¶ˆè€—å“ï¼Œè€Œé©¬éå´æ˜¯ä¸äººä½“èåˆåœ¨ä¸€èµ·çš„â€œçŸ¥å·±â€ã€‚æˆ‘ä»¬è¦æœ‰è¿™æ ·çš„è§‚å¿µï¼šç°åœ¨ï¼Œç”µè„‘æ˜¯æ¶ˆè€—å“ï¼Œé”®ç›˜å´æ˜¯ä¼ é€’æƒ…æ„Ÿï¼Œé™ªä¼´æˆ‘ä»¬ä¸€ç”Ÿçš„â€œæŒšå‹â€ã€‚\n\næˆ‘è¡¨ç¤ºä½ è¯´çš„æœ‰é“ç†ï¼Œå¼€ç®±é¢œå€¼è¿˜ç®—å¯ä»¥ï¼Œä½†æˆ‘è¡¨ç¤ºè‚‰ç–¼ï¼Œè¿˜ä¸æ˜¯å¾ˆä¹ æƒ¯ã€‚ã€‚ã€‚\n![HHKB](/../images/HHKB.jpeg)\n\n\n","source":"_posts/HHKB.md","raw":"---\ntitle: HHKBé”®ç›˜\ndate: 2019-09-10 17:15:39\ncategories: \n- daily\ntags:\n- HHKB\n- keyboard\n---\n\n> ç¾å›½è¥¿éƒ¨çš„ç‰›ä»”ä»¬ï¼Œä¼šå°†æ­»å»çš„é©¬å„¿ç•™åœ¨åŸåœ°ï¼Œä½†æ˜¯ä»ç„¶ä¼šæ‰›ç€é©¬éé•¿é€”è·‹æ¶‰ï¼Œç©¿è¶Šä¸€æœ›æ— å çš„æ²™æ¼ ã€‚å› ä¸ºé©¬å„¿æ˜¯æ¶ˆè€—å“ï¼Œè€Œé©¬éå´æ˜¯ä¸äººä½“èåˆåœ¨ä¸€èµ·çš„â€œçŸ¥å·±â€ã€‚æˆ‘ä»¬è¦æœ‰è¿™æ ·çš„è§‚å¿µï¼šç°åœ¨ï¼Œç”µè„‘æ˜¯æ¶ˆè€—å“ï¼Œé”®ç›˜å´æ˜¯ä¼ é€’æƒ…æ„Ÿï¼Œé™ªä¼´æˆ‘ä»¬ä¸€ç”Ÿçš„â€œæŒšå‹â€ã€‚\n\næˆ‘è¡¨ç¤ºä½ è¯´çš„æœ‰é“ç†ï¼Œå¼€ç®±é¢œå€¼è¿˜ç®—å¯ä»¥ï¼Œä½†æˆ‘è¡¨ç¤ºè‚‰ç–¼ï¼Œè¿˜ä¸æ˜¯å¾ˆä¹ æƒ¯ã€‚ã€‚ã€‚\n![HHKB](/../images/HHKB.jpeg)\n\n\n","slug":"HHKB","published":1,"updated":"2019-09-10T10:38:52.632Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhpz0005uhoxl2oa99tu","content":"<blockquote>\n<p>ç¾å›½è¥¿éƒ¨çš„ç‰›ä»”ä»¬ï¼Œä¼šå°†æ­»å»çš„é©¬å„¿ç•™åœ¨åŸåœ°ï¼Œä½†æ˜¯ä»ç„¶ä¼šæ‰›ç€é©¬éé•¿é€”è·‹æ¶‰ï¼Œç©¿è¶Šä¸€æœ›æ— å çš„æ²™æ¼ ã€‚å› ä¸ºé©¬å„¿æ˜¯æ¶ˆè€—å“ï¼Œè€Œé©¬éå´æ˜¯ä¸äººä½“èåˆåœ¨ä¸€èµ·çš„â€œçŸ¥å·±â€ã€‚æˆ‘ä»¬è¦æœ‰è¿™æ ·çš„è§‚å¿µï¼šç°åœ¨ï¼Œç”µè„‘æ˜¯æ¶ˆè€—å“ï¼Œé”®ç›˜å´æ˜¯ä¼ é€’æƒ…æ„Ÿï¼Œé™ªä¼´æˆ‘ä»¬ä¸€ç”Ÿçš„â€œæŒšå‹â€ã€‚</p>\n</blockquote>\n<p>æˆ‘è¡¨ç¤ºä½ è¯´çš„æœ‰é“ç†ï¼Œå¼€ç®±é¢œå€¼è¿˜ç®—å¯ä»¥ï¼Œä½†æˆ‘è¡¨ç¤ºè‚‰ç–¼ï¼Œè¿˜ä¸æ˜¯å¾ˆä¹ æƒ¯ã€‚ã€‚ã€‚<br><img src=\"/../images/HHKB.jpeg\" alt=\"HHKB\"></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>ç¾å›½è¥¿éƒ¨çš„ç‰›ä»”ä»¬ï¼Œä¼šå°†æ­»å»çš„é©¬å„¿ç•™åœ¨åŸåœ°ï¼Œä½†æ˜¯ä»ç„¶ä¼šæ‰›ç€é©¬éé•¿é€”è·‹æ¶‰ï¼Œç©¿è¶Šä¸€æœ›æ— å çš„æ²™æ¼ ã€‚å› ä¸ºé©¬å„¿æ˜¯æ¶ˆè€—å“ï¼Œè€Œé©¬éå´æ˜¯ä¸äººä½“èåˆåœ¨ä¸€èµ·çš„â€œçŸ¥å·±â€ã€‚æˆ‘ä»¬è¦æœ‰è¿™æ ·çš„è§‚å¿µï¼šç°åœ¨ï¼Œç”µè„‘æ˜¯æ¶ˆè€—å“ï¼Œé”®ç›˜å´æ˜¯ä¼ é€’æƒ…æ„Ÿï¼Œé™ªä¼´æˆ‘ä»¬ä¸€ç”Ÿçš„â€œæŒšå‹â€ã€‚</p>\n</blockquote>\n<p>æˆ‘è¡¨ç¤ºä½ è¯´çš„æœ‰é“ç†ï¼Œå¼€ç®±é¢œå€¼è¿˜ç®—å¯ä»¥ï¼Œä½†æˆ‘è¡¨ç¤ºè‚‰ç–¼ï¼Œè¿˜ä¸æ˜¯å¾ˆä¹ æƒ¯ã€‚ã€‚ã€‚<br><img src=\"/../images/HHKB.jpeg\" alt=\"HHKB\"></p>\n"},{"title":"ç¨‹åºå‘˜å¤«å¦‡çš„å‘¨æœ«","date":"2019-09-01T02:40:28.000Z","_content":"\n![weekend](/images/weekend.jpeg)\n\nhave a nice day~","source":"_posts/weekend.md","raw":"---\ntitle: ç¨‹åºå‘˜å¤«å¦‡çš„å‘¨æœ«\ndate: 2019-09-01 10:40:28\ncategories: \n- daily\ntags:\n- æ—¥å¸¸\n- ç™½è¯\n---\n\n![weekend](/images/weekend.jpeg)\n\nhave a nice day~","slug":"weekend","published":1,"updated":"2019-09-02T01:37:27.401Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhq00006uhoxjhr6uleb","content":"<p><img src=\"/images/weekend.jpeg\" alt=\"weekend\"></p>\n<p>have a nice day~</p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/weekend.jpeg\" alt=\"weekend\"></p>\n<p>have a nice day~</p>\n"},{"title":"å…³äºè¿™ä¸ªç½‘ç«™","date":"2019-08-30T07:53:09.000Z","_content":"\n## WHAT\nä¸ªäººç”Ÿæ´»è®°å½•ç½‘ç«™ã€‚(å¸Œæœ›èƒ½é€šè¿‡å¤‡æ¡ˆ)\nå¸Œæœ›æŠŠæ‰€æœ‰æœ‰æ„ä¹‰çš„ä¸œè¥¿éƒ½è®°å½•ä¸‹æ¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠ€æœ¯èŒƒå›´ã€‚\nä¸ªäººä½¿ç”¨ï¼Œèƒ½å¸®åŠ©åˆ°äººå°±æ›´å¥½äº†ã€‚\n\n\n## WHY\nä¸Šå­¦æ—¶å€™çš„ [Blog](http://huguobo.github.io) ç”¨çš„æ˜¯ [jekyll](https://jekyllrb.com/)+ [GithubPages](https://pages.github.com/)ã€‚\nå¥½ä¹…æ²¡æœ‰æ›´æ–°å’Œç»´æŠ¤äº†, ä¸æ˜¯å¾ˆç†Ÿæ‚‰ rubyï¼Œä¹Ÿä¸æƒ³ç»§ç»­æµªè´¹ github çš„èµ„æºã€‚\nåŠ ä¸Šå‘è§‰è‡ªå·±å·¥ä½œåçš„ç§¯ç´¯å’Œæ²‰æ·€æ˜æ˜¾ä¸å¤Ÿï¼Œå¼€å§‹ç€æ‰‹ä½¿ç”¨åŸºäº [node](https://nodejs.org) çš„ [hexo](https://hexo.io/zh-cn/) å’Œè‡ªå·±çš„äº‘æœåŠ¡å™¨æ­å»ºäº†è¿™ä¸ªç½‘ç«™ã€‚\n\n## HOW\nå¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°ã€è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»ã€çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„ã€‚\nåˆæ³•ã€åˆè§„ã€åˆç†ã€‚\nLOVE AND PEACEã€‚","source":"_posts/æ–°ç½‘ç«™.md","raw":"---\ntitle: å…³äºè¿™ä¸ªç½‘ç«™\ndate: 2019-08-30 15:53:09\ncategories: \n- daily\ntags: \n- ç™½è¯\n---\n\n## WHAT\nä¸ªäººç”Ÿæ´»è®°å½•ç½‘ç«™ã€‚(å¸Œæœ›èƒ½é€šè¿‡å¤‡æ¡ˆ)\nå¸Œæœ›æŠŠæ‰€æœ‰æœ‰æ„ä¹‰çš„ä¸œè¥¿éƒ½è®°å½•ä¸‹æ¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠ€æœ¯èŒƒå›´ã€‚\nä¸ªäººä½¿ç”¨ï¼Œèƒ½å¸®åŠ©åˆ°äººå°±æ›´å¥½äº†ã€‚\n\n\n## WHY\nä¸Šå­¦æ—¶å€™çš„ [Blog](http://huguobo.github.io) ç”¨çš„æ˜¯ [jekyll](https://jekyllrb.com/)+ [GithubPages](https://pages.github.com/)ã€‚\nå¥½ä¹…æ²¡æœ‰æ›´æ–°å’Œç»´æŠ¤äº†, ä¸æ˜¯å¾ˆç†Ÿæ‚‰ rubyï¼Œä¹Ÿä¸æƒ³ç»§ç»­æµªè´¹ github çš„èµ„æºã€‚\nåŠ ä¸Šå‘è§‰è‡ªå·±å·¥ä½œåçš„ç§¯ç´¯å’Œæ²‰æ·€æ˜æ˜¾ä¸å¤Ÿï¼Œå¼€å§‹ç€æ‰‹ä½¿ç”¨åŸºäº [node](https://nodejs.org) çš„ [hexo](https://hexo.io/zh-cn/) å’Œè‡ªå·±çš„äº‘æœåŠ¡å™¨æ­å»ºäº†è¿™ä¸ªç½‘ç«™ã€‚\n\n## HOW\nå¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°ã€è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»ã€çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„ã€‚\nåˆæ³•ã€åˆè§„ã€åˆç†ã€‚\nLOVE AND PEACEã€‚","slug":"æ–°ç½‘ç«™","published":1,"updated":"2019-09-02T01:37:30.425Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhqz000yuhoxayzruv6f","content":"<h2 id=\"WHAT\"><a href=\"#WHAT\" class=\"headerlink\" title=\"WHAT\"></a>WHAT</h2><p>ä¸ªäººç”Ÿæ´»è®°å½•ç½‘ç«™ã€‚(å¸Œæœ›èƒ½é€šè¿‡å¤‡æ¡ˆ)<br>å¸Œæœ›æŠŠæ‰€æœ‰æœ‰æ„ä¹‰çš„ä¸œè¥¿éƒ½è®°å½•ä¸‹æ¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠ€æœ¯èŒƒå›´ã€‚<br>ä¸ªäººä½¿ç”¨ï¼Œèƒ½å¸®åŠ©åˆ°äººå°±æ›´å¥½äº†ã€‚</p>\n<h2 id=\"WHY\"><a href=\"#WHY\" class=\"headerlink\" title=\"WHY\"></a>WHY</h2><p>ä¸Šå­¦æ—¶å€™çš„ <a href=\"http://huguobo.github.io\" target=\"_blank\" rel=\"noopener\">Blog</a> ç”¨çš„æ˜¯ <a href=\"https://jekyllrb.com/\" target=\"_blank\" rel=\"noopener\">jekyll</a>+ <a href=\"https://pages.github.com/\" target=\"_blank\" rel=\"noopener\">GithubPages</a>ã€‚<br>å¥½ä¹…æ²¡æœ‰æ›´æ–°å’Œç»´æŠ¤äº†, ä¸æ˜¯å¾ˆç†Ÿæ‚‰ rubyï¼Œä¹Ÿä¸æƒ³ç»§ç»­æµªè´¹ github çš„èµ„æºã€‚<br>åŠ ä¸Šå‘è§‰è‡ªå·±å·¥ä½œåçš„ç§¯ç´¯å’Œæ²‰æ·€æ˜æ˜¾ä¸å¤Ÿï¼Œå¼€å§‹ç€æ‰‹ä½¿ç”¨åŸºäº <a href=\"https://nodejs.org\" target=\"_blank\" rel=\"noopener\">node</a> çš„ <a href=\"https://hexo.io/zh-cn/\" target=\"_blank\" rel=\"noopener\">hexo</a> å’Œè‡ªå·±çš„äº‘æœåŠ¡å™¨æ­å»ºäº†è¿™ä¸ªç½‘ç«™ã€‚</p>\n<h2 id=\"HOW\"><a href=\"#HOW\" class=\"headerlink\" title=\"HOW\"></a>HOW</h2><p>å¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°ã€è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»ã€çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„ã€‚<br>åˆæ³•ã€åˆè§„ã€åˆç†ã€‚<br>LOVE AND PEACEã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"WHAT\"><a href=\"#WHAT\" class=\"headerlink\" title=\"WHAT\"></a>WHAT</h2><p>ä¸ªäººç”Ÿæ´»è®°å½•ç½‘ç«™ã€‚(å¸Œæœ›èƒ½é€šè¿‡å¤‡æ¡ˆ)<br>å¸Œæœ›æŠŠæ‰€æœ‰æœ‰æ„ä¹‰çš„ä¸œè¥¿éƒ½è®°å½•ä¸‹æ¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠ€æœ¯èŒƒå›´ã€‚<br>ä¸ªäººä½¿ç”¨ï¼Œèƒ½å¸®åŠ©åˆ°äººå°±æ›´å¥½äº†ã€‚</p>\n<h2 id=\"WHY\"><a href=\"#WHY\" class=\"headerlink\" title=\"WHY\"></a>WHY</h2><p>ä¸Šå­¦æ—¶å€™çš„ <a href=\"http://huguobo.github.io\" target=\"_blank\" rel=\"noopener\">Blog</a> ç”¨çš„æ˜¯ <a href=\"https://jekyllrb.com/\" target=\"_blank\" rel=\"noopener\">jekyll</a>+ <a href=\"https://pages.github.com/\" target=\"_blank\" rel=\"noopener\">GithubPages</a>ã€‚<br>å¥½ä¹…æ²¡æœ‰æ›´æ–°å’Œç»´æŠ¤äº†, ä¸æ˜¯å¾ˆç†Ÿæ‚‰ rubyï¼Œä¹Ÿä¸æƒ³ç»§ç»­æµªè´¹ github çš„èµ„æºã€‚<br>åŠ ä¸Šå‘è§‰è‡ªå·±å·¥ä½œåçš„ç§¯ç´¯å’Œæ²‰æ·€æ˜æ˜¾ä¸å¤Ÿï¼Œå¼€å§‹ç€æ‰‹ä½¿ç”¨åŸºäº <a href=\"https://nodejs.org\" target=\"_blank\" rel=\"noopener\">node</a> çš„ <a href=\"https://hexo.io/zh-cn/\" target=\"_blank\" rel=\"noopener\">hexo</a> å’Œè‡ªå·±çš„äº‘æœåŠ¡å™¨æ­å»ºäº†è¿™ä¸ªç½‘ç«™ã€‚</p>\n<h2 id=\"HOW\"><a href=\"#HOW\" class=\"headerlink\" title=\"HOW\"></a>HOW</h2><p>å¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°ã€è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»ã€çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„ã€‚<br>åˆæ³•ã€åˆè§„ã€åˆç†ã€‚<br>LOVE AND PEACEã€‚</p>\n"},{"title":"WEBå¼€å‘ä¸­æ¶‰åŠçš„å„ç§å®½é«˜","date":"2019-09-09T05:56:05.000Z","_content":"\n> webå¼€å‘ä¸­ç»å¸¸æ¶‰åŠå„ç§å®½é«˜å’Œåæ ‡çš„æ¦‚å¿µï¼Œç›¸å…³çš„å±æ€§å’Œæ¦‚å¿µè¾ƒå¤šï¼Œæ¯æ¬¡éƒ½å¾—æŸ¥ä¸€éï¼Œæ•…ä½œæ­¤æ•´ç†ã€‚\n\nJSä¸­Documentå¯¹è±¡çš„å®½é«˜æœ‰3ä¸ªç§ç±»ï¼š`client`, `offset` , `scroll` \n\n## Client\n\n### clientHeight å’Œ clientWidth\nè¯¥å±æ€§æŒ‡çš„æ˜¯å…ƒç´ å¯è§†éƒ¨åˆ†çš„å®½åº¦å’Œé«˜åº¦ï¼Œå³`padding+content`ï¼Œ ä¸åŒ…æ‹¬æ»šåŠ¨è½´ç­‰ã€‚\n![](/../images/clientHeight.png)\n\n### clientTop å’Œ clientLeft\nè¯¥å±æ€§æ˜¯è¯»å–å…ƒç´  `border` çš„å®½åº¦å’Œé«˜åº¦çš„ã€‚\n\n- clientTop = border-top çš„ broder-width\n- clientLeft = border-left çš„ border-width\n\n\n## Offset\n\n### offsetHeight å’Œ offsetWidth\nè¿™ä¸€å¯¹å±æ€§æŒ‡çš„æ˜¯å…ƒç´ çš„ `border+padding+content` çš„å®½åº¦å’Œé«˜åº¦ã€‚åŒ…æ‹¬paddingã€borderã€æ°´å¹³æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginçš„å…ƒç´ çš„é«˜åº¦ã€‚\nè¯¥å±æ€§å’Œå…¶å†…éƒ¨çš„å†…å®¹æ˜¯å¦è¶…å‡ºå…ƒç´ å¤§å°æ— å…³ï¼Œåªå’Œæœ¬æ¥è®¾ç½®çš„borderä»¥åŠwidthå’Œheightæœ‰å…³ã€‚\n![](/../images/offsetHeight.png)\n\n### offsetTop å’Œ offsetLeft\nè¿™ä¸ªéœ€è¦å…ˆäº†è§£ä¸‹ `offsetParent`ï¼šç¬¬ä¸€ä¸ª position ä¸ä¸º  static çš„ çˆ¶å…ƒç´ ï¼Œä¸€å±‚å±‚å‘ä¸Šï¼ŒçŸ¥é“ bodyã€‚\nå½“å‰å…ƒç´ é¡¶éƒ¨è·ç¦»æœ€è¿‘çˆ¶å…ƒç´ `offsetParent`é¡¶éƒ¨çš„è·ç¦»,å’Œæœ‰æ²¡æœ‰æ»šåŠ¨æ¡æ²¡æœ‰å…³ç³»ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚ \nåŒç†left\n\n## Scroll\n\n### scollHeight å’Œ scrollWidth\nå› ä¸ºå­å…ƒç´ æ¯”çˆ¶å…ƒç´ é«˜ï¼Œçˆ¶å…ƒç´ ä¸æƒ³è¢«å­å…ƒç´ æ’‘çš„ä¸€æ ·é«˜å°±æ˜¾ç¤ºå‡ºäº†æ»šåŠ¨æ¡ï¼Œåœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­æœ¬å…ƒç´ æœ‰éƒ¨åˆ†è¢«éšè—äº†ï¼ŒscrollHeight ä»£è¡¨åŒ…æ‹¬å½“å‰ä¸å¯è§éƒ¨åˆ†çš„å…ƒç´ çš„é«˜åº¦ã€‚è€Œå¯è§éƒ¨åˆ†çš„é«˜åº¦å…¶å®å°±æ˜¯clientHeightï¼Œä¹Ÿå°±æ˜¯scrollHeight>=clientHeightæ’æˆç«‹ã€‚åœ¨æœ‰æ»šåŠ¨æ¡æ—¶è®¨è®ºscrollHeightæ‰æœ‰æ„ä¹‰ï¼Œåœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollHeight==clientHeightæ’æˆç«‹ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚ \n![](/../images/scollHeight.png)\n\n### scrollTop å’Œ scrollLeft\nä»£è¡¨åœ¨æœ‰æ»šåŠ¨æ¡æ—¶ï¼Œæ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨çš„è·ç¦»ä¹Ÿå°±æ˜¯å…ƒç´ é¡¶éƒ¨è¢«é®ä½éƒ¨åˆ†çš„é«˜åº¦ã€‚åœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollTop==0æ’æˆç«‹ï¼Œå•ä½pxã€‚\n![](/../images/scrollTop.png)\n\n","source":"_posts/JsWidthAndHeight.md","raw":"---\ntitle: WEBå¼€å‘ä¸­æ¶‰åŠçš„å„ç§å®½é«˜\ndate: 2019-09-09 13:56:05\ncategories: \n- JavaScript\ntags:\n- scorllTop\n- height\n- width\n---\n\n> webå¼€å‘ä¸­ç»å¸¸æ¶‰åŠå„ç§å®½é«˜å’Œåæ ‡çš„æ¦‚å¿µï¼Œç›¸å…³çš„å±æ€§å’Œæ¦‚å¿µè¾ƒå¤šï¼Œæ¯æ¬¡éƒ½å¾—æŸ¥ä¸€éï¼Œæ•…ä½œæ­¤æ•´ç†ã€‚\n\nJSä¸­Documentå¯¹è±¡çš„å®½é«˜æœ‰3ä¸ªç§ç±»ï¼š`client`, `offset` , `scroll` \n\n## Client\n\n### clientHeight å’Œ clientWidth\nè¯¥å±æ€§æŒ‡çš„æ˜¯å…ƒç´ å¯è§†éƒ¨åˆ†çš„å®½åº¦å’Œé«˜åº¦ï¼Œå³`padding+content`ï¼Œ ä¸åŒ…æ‹¬æ»šåŠ¨è½´ç­‰ã€‚\n![](/../images/clientHeight.png)\n\n### clientTop å’Œ clientLeft\nè¯¥å±æ€§æ˜¯è¯»å–å…ƒç´  `border` çš„å®½åº¦å’Œé«˜åº¦çš„ã€‚\n\n- clientTop = border-top çš„ broder-width\n- clientLeft = border-left çš„ border-width\n\n\n## Offset\n\n### offsetHeight å’Œ offsetWidth\nè¿™ä¸€å¯¹å±æ€§æŒ‡çš„æ˜¯å…ƒç´ çš„ `border+padding+content` çš„å®½åº¦å’Œé«˜åº¦ã€‚åŒ…æ‹¬paddingã€borderã€æ°´å¹³æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginçš„å…ƒç´ çš„é«˜åº¦ã€‚\nè¯¥å±æ€§å’Œå…¶å†…éƒ¨çš„å†…å®¹æ˜¯å¦è¶…å‡ºå…ƒç´ å¤§å°æ— å…³ï¼Œåªå’Œæœ¬æ¥è®¾ç½®çš„borderä»¥åŠwidthå’Œheightæœ‰å…³ã€‚\n![](/../images/offsetHeight.png)\n\n### offsetTop å’Œ offsetLeft\nè¿™ä¸ªéœ€è¦å…ˆäº†è§£ä¸‹ `offsetParent`ï¼šç¬¬ä¸€ä¸ª position ä¸ä¸º  static çš„ çˆ¶å…ƒç´ ï¼Œä¸€å±‚å±‚å‘ä¸Šï¼ŒçŸ¥é“ bodyã€‚\nå½“å‰å…ƒç´ é¡¶éƒ¨è·ç¦»æœ€è¿‘çˆ¶å…ƒç´ `offsetParent`é¡¶éƒ¨çš„è·ç¦»,å’Œæœ‰æ²¡æœ‰æ»šåŠ¨æ¡æ²¡æœ‰å…³ç³»ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚ \nåŒç†left\n\n## Scroll\n\n### scollHeight å’Œ scrollWidth\nå› ä¸ºå­å…ƒç´ æ¯”çˆ¶å…ƒç´ é«˜ï¼Œçˆ¶å…ƒç´ ä¸æƒ³è¢«å­å…ƒç´ æ’‘çš„ä¸€æ ·é«˜å°±æ˜¾ç¤ºå‡ºäº†æ»šåŠ¨æ¡ï¼Œåœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­æœ¬å…ƒç´ æœ‰éƒ¨åˆ†è¢«éšè—äº†ï¼ŒscrollHeight ä»£è¡¨åŒ…æ‹¬å½“å‰ä¸å¯è§éƒ¨åˆ†çš„å…ƒç´ çš„é«˜åº¦ã€‚è€Œå¯è§éƒ¨åˆ†çš„é«˜åº¦å…¶å®å°±æ˜¯clientHeightï¼Œä¹Ÿå°±æ˜¯scrollHeight>=clientHeightæ’æˆç«‹ã€‚åœ¨æœ‰æ»šåŠ¨æ¡æ—¶è®¨è®ºscrollHeightæ‰æœ‰æ„ä¹‰ï¼Œåœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollHeight==clientHeightæ’æˆç«‹ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚ \n![](/../images/scollHeight.png)\n\n### scrollTop å’Œ scrollLeft\nä»£è¡¨åœ¨æœ‰æ»šåŠ¨æ¡æ—¶ï¼Œæ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨çš„è·ç¦»ä¹Ÿå°±æ˜¯å…ƒç´ é¡¶éƒ¨è¢«é®ä½éƒ¨åˆ†çš„é«˜åº¦ã€‚åœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollTop==0æ’æˆç«‹ï¼Œå•ä½pxã€‚\n![](/../images/scrollTop.png)\n\n","slug":"JsWidthAndHeight","published":1,"updated":"2019-09-09T06:57:15.756Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhr10010uhoxr0jffggo","content":"<blockquote>\n<p>webå¼€å‘ä¸­ç»å¸¸æ¶‰åŠå„ç§å®½é«˜å’Œåæ ‡çš„æ¦‚å¿µï¼Œç›¸å…³çš„å±æ€§å’Œæ¦‚å¿µè¾ƒå¤šï¼Œæ¯æ¬¡éƒ½å¾—æŸ¥ä¸€éï¼Œæ•…ä½œæ­¤æ•´ç†ã€‚</p>\n</blockquote>\n<p>JSä¸­Documentå¯¹è±¡çš„å®½é«˜æœ‰3ä¸ªç§ç±»ï¼š<code>client</code>, <code>offset</code> , <code>scroll</code> </p>\n<h2 id=\"Client\"><a href=\"#Client\" class=\"headerlink\" title=\"Client\"></a>Client</h2><h3 id=\"clientHeight-å’Œ-clientWidth\"><a href=\"#clientHeight-å’Œ-clientWidth\" class=\"headerlink\" title=\"clientHeight å’Œ clientWidth\"></a>clientHeight å’Œ clientWidth</h3><p>è¯¥å±æ€§æŒ‡çš„æ˜¯å…ƒç´ å¯è§†éƒ¨åˆ†çš„å®½åº¦å’Œé«˜åº¦ï¼Œå³<code>padding+content</code>ï¼Œ ä¸åŒ…æ‹¬æ»šåŠ¨è½´ç­‰ã€‚<br><img src=\"/../images/clientHeight.png\" alt></p>\n<h3 id=\"clientTop-å’Œ-clientLeft\"><a href=\"#clientTop-å’Œ-clientLeft\" class=\"headerlink\" title=\"clientTop å’Œ clientLeft\"></a>clientTop å’Œ clientLeft</h3><p>è¯¥å±æ€§æ˜¯è¯»å–å…ƒç´  <code>border</code> çš„å®½åº¦å’Œé«˜åº¦çš„ã€‚</p>\n<ul>\n<li>clientTop = border-top çš„ broder-width</li>\n<li>clientLeft = border-left çš„ border-width</li>\n</ul>\n<h2 id=\"Offset\"><a href=\"#Offset\" class=\"headerlink\" title=\"Offset\"></a>Offset</h2><h3 id=\"offsetHeight-å’Œ-offsetWidth\"><a href=\"#offsetHeight-å’Œ-offsetWidth\" class=\"headerlink\" title=\"offsetHeight å’Œ offsetWidth\"></a>offsetHeight å’Œ offsetWidth</h3><p>è¿™ä¸€å¯¹å±æ€§æŒ‡çš„æ˜¯å…ƒç´ çš„ <code>border+padding+content</code> çš„å®½åº¦å’Œé«˜åº¦ã€‚åŒ…æ‹¬paddingã€borderã€æ°´å¹³æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginçš„å…ƒç´ çš„é«˜åº¦ã€‚<br>è¯¥å±æ€§å’Œå…¶å†…éƒ¨çš„å†…å®¹æ˜¯å¦è¶…å‡ºå…ƒç´ å¤§å°æ— å…³ï¼Œåªå’Œæœ¬æ¥è®¾ç½®çš„borderä»¥åŠwidthå’Œheightæœ‰å…³ã€‚<br><img src=\"/../images/offsetHeight.png\" alt></p>\n<h3 id=\"offsetTop-å’Œ-offsetLeft\"><a href=\"#offsetTop-å’Œ-offsetLeft\" class=\"headerlink\" title=\"offsetTop å’Œ offsetLeft\"></a>offsetTop å’Œ offsetLeft</h3><p>è¿™ä¸ªéœ€è¦å…ˆäº†è§£ä¸‹ <code>offsetParent</code>ï¼šç¬¬ä¸€ä¸ª position ä¸ä¸º  static çš„ çˆ¶å…ƒç´ ï¼Œä¸€å±‚å±‚å‘ä¸Šï¼ŒçŸ¥é“ bodyã€‚<br>å½“å‰å…ƒç´ é¡¶éƒ¨è·ç¦»æœ€è¿‘çˆ¶å…ƒç´ <code>offsetParent</code>é¡¶éƒ¨çš„è·ç¦»,å’Œæœ‰æ²¡æœ‰æ»šåŠ¨æ¡æ²¡æœ‰å…³ç³»ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚<br>åŒç†left</p>\n<h2 id=\"Scroll\"><a href=\"#Scroll\" class=\"headerlink\" title=\"Scroll\"></a>Scroll</h2><h3 id=\"scollHeight-å’Œ-scrollWidth\"><a href=\"#scollHeight-å’Œ-scrollWidth\" class=\"headerlink\" title=\"scollHeight å’Œ scrollWidth\"></a>scollHeight å’Œ scrollWidth</h3><p>å› ä¸ºå­å…ƒç´ æ¯”çˆ¶å…ƒç´ é«˜ï¼Œçˆ¶å…ƒç´ ä¸æƒ³è¢«å­å…ƒç´ æ’‘çš„ä¸€æ ·é«˜å°±æ˜¾ç¤ºå‡ºäº†æ»šåŠ¨æ¡ï¼Œåœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­æœ¬å…ƒç´ æœ‰éƒ¨åˆ†è¢«éšè—äº†ï¼ŒscrollHeight ä»£è¡¨åŒ…æ‹¬å½“å‰ä¸å¯è§éƒ¨åˆ†çš„å…ƒç´ çš„é«˜åº¦ã€‚è€Œå¯è§éƒ¨åˆ†çš„é«˜åº¦å…¶å®å°±æ˜¯clientHeightï¼Œä¹Ÿå°±æ˜¯scrollHeight&gt;=clientHeightæ’æˆç«‹ã€‚åœ¨æœ‰æ»šåŠ¨æ¡æ—¶è®¨è®ºscrollHeightæ‰æœ‰æ„ä¹‰ï¼Œåœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollHeight==clientHeightæ’æˆç«‹ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚<br><img src=\"/../images/scollHeight.png\" alt></p>\n<h3 id=\"scrollTop-å’Œ-scrollLeft\"><a href=\"#scrollTop-å’Œ-scrollLeft\" class=\"headerlink\" title=\"scrollTop å’Œ scrollLeft\"></a>scrollTop å’Œ scrollLeft</h3><p>ä»£è¡¨åœ¨æœ‰æ»šåŠ¨æ¡æ—¶ï¼Œæ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨çš„è·ç¦»ä¹Ÿå°±æ˜¯å…ƒç´ é¡¶éƒ¨è¢«é®ä½éƒ¨åˆ†çš„é«˜åº¦ã€‚åœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollTop==0æ’æˆç«‹ï¼Œå•ä½pxã€‚<br><img src=\"/../images/scrollTop.png\" alt></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>webå¼€å‘ä¸­ç»å¸¸æ¶‰åŠå„ç§å®½é«˜å’Œåæ ‡çš„æ¦‚å¿µï¼Œç›¸å…³çš„å±æ€§å’Œæ¦‚å¿µè¾ƒå¤šï¼Œæ¯æ¬¡éƒ½å¾—æŸ¥ä¸€éï¼Œæ•…ä½œæ­¤æ•´ç†ã€‚</p>\n</blockquote>\n<p>JSä¸­Documentå¯¹è±¡çš„å®½é«˜æœ‰3ä¸ªç§ç±»ï¼š<code>client</code>, <code>offset</code> , <code>scroll</code> </p>\n<h2 id=\"Client\"><a href=\"#Client\" class=\"headerlink\" title=\"Client\"></a>Client</h2><h3 id=\"clientHeight-å’Œ-clientWidth\"><a href=\"#clientHeight-å’Œ-clientWidth\" class=\"headerlink\" title=\"clientHeight å’Œ clientWidth\"></a>clientHeight å’Œ clientWidth</h3><p>è¯¥å±æ€§æŒ‡çš„æ˜¯å…ƒç´ å¯è§†éƒ¨åˆ†çš„å®½åº¦å’Œé«˜åº¦ï¼Œå³<code>padding+content</code>ï¼Œ ä¸åŒ…æ‹¬æ»šåŠ¨è½´ç­‰ã€‚<br><img src=\"/../images/clientHeight.png\" alt></p>\n<h3 id=\"clientTop-å’Œ-clientLeft\"><a href=\"#clientTop-å’Œ-clientLeft\" class=\"headerlink\" title=\"clientTop å’Œ clientLeft\"></a>clientTop å’Œ clientLeft</h3><p>è¯¥å±æ€§æ˜¯è¯»å–å…ƒç´  <code>border</code> çš„å®½åº¦å’Œé«˜åº¦çš„ã€‚</p>\n<ul>\n<li>clientTop = border-top çš„ broder-width</li>\n<li>clientLeft = border-left çš„ border-width</li>\n</ul>\n<h2 id=\"Offset\"><a href=\"#Offset\" class=\"headerlink\" title=\"Offset\"></a>Offset</h2><h3 id=\"offsetHeight-å’Œ-offsetWidth\"><a href=\"#offsetHeight-å’Œ-offsetWidth\" class=\"headerlink\" title=\"offsetHeight å’Œ offsetWidth\"></a>offsetHeight å’Œ offsetWidth</h3><p>è¿™ä¸€å¯¹å±æ€§æŒ‡çš„æ˜¯å…ƒç´ çš„ <code>border+padding+content</code> çš„å®½åº¦å’Œé«˜åº¦ã€‚åŒ…æ‹¬paddingã€borderã€æ°´å¹³æ»šåŠ¨æ¡ï¼Œä½†ä¸åŒ…æ‹¬marginçš„å…ƒç´ çš„é«˜åº¦ã€‚<br>è¯¥å±æ€§å’Œå…¶å†…éƒ¨çš„å†…å®¹æ˜¯å¦è¶…å‡ºå…ƒç´ å¤§å°æ— å…³ï¼Œåªå’Œæœ¬æ¥è®¾ç½®çš„borderä»¥åŠwidthå’Œheightæœ‰å…³ã€‚<br><img src=\"/../images/offsetHeight.png\" alt></p>\n<h3 id=\"offsetTop-å’Œ-offsetLeft\"><a href=\"#offsetTop-å’Œ-offsetLeft\" class=\"headerlink\" title=\"offsetTop å’Œ offsetLeft\"></a>offsetTop å’Œ offsetLeft</h3><p>è¿™ä¸ªéœ€è¦å…ˆäº†è§£ä¸‹ <code>offsetParent</code>ï¼šç¬¬ä¸€ä¸ª position ä¸ä¸º  static çš„ çˆ¶å…ƒç´ ï¼Œä¸€å±‚å±‚å‘ä¸Šï¼ŒçŸ¥é“ bodyã€‚<br>å½“å‰å…ƒç´ é¡¶éƒ¨è·ç¦»æœ€è¿‘çˆ¶å…ƒç´ <code>offsetParent</code>é¡¶éƒ¨çš„è·ç¦»,å’Œæœ‰æ²¡æœ‰æ»šåŠ¨æ¡æ²¡æœ‰å…³ç³»ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚<br>åŒç†left</p>\n<h2 id=\"Scroll\"><a href=\"#Scroll\" class=\"headerlink\" title=\"Scroll\"></a>Scroll</h2><h3 id=\"scollHeight-å’Œ-scrollWidth\"><a href=\"#scollHeight-å’Œ-scrollWidth\" class=\"headerlink\" title=\"scollHeight å’Œ scrollWidth\"></a>scollHeight å’Œ scrollWidth</h3><p>å› ä¸ºå­å…ƒç´ æ¯”çˆ¶å…ƒç´ é«˜ï¼Œçˆ¶å…ƒç´ ä¸æƒ³è¢«å­å…ƒç´ æ’‘çš„ä¸€æ ·é«˜å°±æ˜¾ç¤ºå‡ºäº†æ»šåŠ¨æ¡ï¼Œåœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­æœ¬å…ƒç´ æœ‰éƒ¨åˆ†è¢«éšè—äº†ï¼ŒscrollHeight ä»£è¡¨åŒ…æ‹¬å½“å‰ä¸å¯è§éƒ¨åˆ†çš„å…ƒç´ çš„é«˜åº¦ã€‚è€Œå¯è§éƒ¨åˆ†çš„é«˜åº¦å…¶å®å°±æ˜¯clientHeightï¼Œä¹Ÿå°±æ˜¯scrollHeight&gt;=clientHeightæ’æˆç«‹ã€‚åœ¨æœ‰æ»šåŠ¨æ¡æ—¶è®¨è®ºscrollHeightæ‰æœ‰æ„ä¹‰ï¼Œåœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollHeight==clientHeightæ’æˆç«‹ã€‚å•ä½pxï¼Œåªè¯»å…ƒç´ ã€‚<br><img src=\"/../images/scollHeight.png\" alt></p>\n<h3 id=\"scrollTop-å’Œ-scrollLeft\"><a href=\"#scrollTop-å’Œ-scrollLeft\" class=\"headerlink\" title=\"scrollTop å’Œ scrollLeft\"></a>scrollTop å’Œ scrollLeft</h3><p>ä»£è¡¨åœ¨æœ‰æ»šåŠ¨æ¡æ—¶ï¼Œæ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨çš„è·ç¦»ä¹Ÿå°±æ˜¯å…ƒç´ é¡¶éƒ¨è¢«é®ä½éƒ¨åˆ†çš„é«˜åº¦ã€‚åœ¨æ²¡æœ‰æ»šåŠ¨æ¡æ—¶scrollTop==0æ’æˆç«‹ï¼Œå•ä½pxã€‚<br><img src=\"/../images/scrollTop.png\" alt></p>\n"},{"title":"SSHã€SSL å’Œ HTTPS","date":"2019-09-03T02:56:46.000Z","_content":"\n> ä¸€ç›´å¯¹ SSH ã€SSL ä»¥åŠ HTTPS å’Œå®ƒä»¬äº’ç›¸ä¹‹é—´çš„å…³ç³»éƒ½äº‘é‡Œé›¾é‡Œçš„ï¼Œä¸‹é¢å‚è€ƒç½‘ä¸Šçš„æ–‡ç« å’Œè‡ªå·±çš„ç†è§£æ¢³ç†ä¸€ä¸‹ï¼Œæ™•äº†å°±å†å›æ¥çœ‹ä¸€ä¸‹ï¼Œæ€»ä¼šè®°ä½çš„ã€‚\n\n## åŠ å¯†ç®—æ³•\né¦–å…ˆå…ˆè¯´ä¸‹åŠ å¯†ç®—æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ`å¯¹ç§°åŠ å¯†` å’Œ `éå¯¹ç§°åŠ å¯†`ã€‚\n### å¯¹ç§°åŠ å¯†\né€šä¿¡åŒæ–¹çš„æ•°æ®éƒ½æ˜¯ç”¨åŒä¸€å¥—å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚\nåœ¨1976å¹´ä»¥å‰ï¼Œæ‰€æœ‰çš„åŠ å¯†éƒ½é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¦‚ä½•ç®¡ç†ç§˜é’¥ï¼Ÿæ—¢è¦ä¿è¯ç§˜é’¥ä¸æ³„éœ²ï¼ŒåŒæ—¶è¿˜è¦ä¿è¯ç§˜é’¥çš„å…±äº«æ€§ã€‚\n### éå¯¹ç§°åŠ å¯†\n1976å¹´æœ‰ä¸¤ä½æ•°å­¦å®¶æå‡ºçš„ä¸€ä¸ªæ–°çš„åŠ å¯†æ¦‚å¿µï¼š\n1. Aç”Ÿæˆä¸€å¯¹ä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚\n2. Bè·å–Aç”Ÿæˆçš„å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥å¯¹ä¿¡æ¯åŠ å¯†ã€‚\n3. Aæ”¶åˆ°Bçš„åŠ å¯†ä¿¡æ¯åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚\n\néå¯¹ç§°åŠ å¯†å¼•å…¥äº†å…¬é’¥å’Œç§é’¥çš„æ¦‚å¿µã€‚å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚å…¬é’¥æ˜¯é¢å‘æ‰€æœ‰ä½¿ç”¨è€…å…¬å¼€çš„ã€‚\nç›®å‰è®¡ç®—æœºé¢†åŸŸä½¿ç”¨æœ€å¹¿æ³›çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯[RSA](https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95)ã€‚\n\nå¯¹ç§°åŠ å¯†çœ‹èµ·æ¥å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼š\n\n- åŠ å¯†æ›´è€—æ—¶ï¼šç®—æ³•æ›´å¤æ‚ã€‚\n- å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»:å³å¦‚æœæœ‰Cå†’å……Aåˆ©ç”¨Açš„å…¬é’¥ç»™Bå‘æ¶ˆæ¯ï¼ŒBçš„æ‰€æœ‰æ¶ˆæ¯å¯¹Cå…¶å®å°±æ˜¯é€æ˜çš„äº†ã€‚\n  \né’ˆå¯¹ä¸­é—´äººæ”»å‡»ï¼Œä¸€èˆ¬å°±é‡‡ç”¨éå¯¹ç§°åŠ å¯†+æ‘˜è¦ç®—æ³•+æ•°å­—ç­¾åçš„æœºåˆ¶æ¥ç¡®ä¿ä¼ è¾“å®‰å…¨ã€‚\n### æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\nHash ç®—æ³•çš„ç‰¹ç‚¹æ˜¯å•å‘ä¸å¯é€†ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡hashå¯¹ç›®å‰ä¿¡æ¯åŠ å¯†ç”Ÿæˆç‰¹å®šé•¿åº¦ä¸”å”¯ä¸€çš„hashå€¼ï¼Œè¯¥å€¼ä¹Ÿä¸èƒ½è¢«é€†å‘ç ´è¯‘ã€‚å› æ­¤hashç®—æ³•è¿›åœºç”¨åœ¨ä¸å¯è¿˜åŸçš„å¯†ç å­˜å‚¨ã€ä¿¡æ¯å®Œæ•´æ€§æ ¡éªŒç­‰é¢†åŸŸã€‚å¸¸è§çš„hashç®—æ³•ï¼šMD2ï¼ŒMD4ï¼ŒMD5ï¼ŒSHAç­‰\n\n### æ•°å­—ç­¾å\næ•°å­—ç­¾åï¼Œæ˜¯ä¸ºäº†ä¿è¯ä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ä½¿ç”¨hashç®—æ³•ç”Ÿæˆè¦å‘é€æ˜æ–‡çš„æ‘˜è¦ï¼Œç„¶å æŠŠæ˜æ–‡å’Œæ‘˜è¦éƒ½é€šè¿‡ç§é’¥åŠ å¯†ï¼ŒåŠ å¯†åçš„æ‘˜è¦ä½œä¸º`æ•°å­—ç­¾åï¼ˆdigital signatureï¼‰`è·ŸåŠ å¯†åçš„å†…å®¹ä¸€èµ·å‘é€ç»™æ¥å—è€…ã€‚æ¥å—è€…æ”¶åˆ°æ•°æ®ä¿¡æ¯åï¼Œä½¿ç”¨å…¬é’¥åˆ†åˆ«å¯¹å†…å®¹å’Œä¿¡æ¯è§£å¯†ï¼Œå¾—åˆ°æ•°æ®å’Œå†…å®¹æ‘˜è¦ï¼Œç„¶åç”¨ä¸€æ ·çš„ç®—æ³•å¯¹å†…å®¹ç”Ÿæˆæ‘˜è¦ï¼Œæ¯”è¾ƒæ‘˜è¦æ˜¯å¦ç›¸åŒæ¥ç¡®è®¤ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚\n\n### æ•°å­—è¯ä¹¦\nä»¥ä¸Šçš„æµç¨‹è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæœ‰äººå†’å……é€šä¿¡äººå‘æ”¾å…¬é’¥ã€‚è¿™ç§åœºæ™¯çš„å‡ºç°ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸ªå…¬è¯äººäº†ï¼Œå‘Šè¯‰æˆ‘ä»¬åˆ°åº•æœ‰æ˜¯çœŸçš„æ³¨å†Œç™»è®°è¿‡çš„ã€‚è¿™ä¸ªå…¬è¯äººå°±æ˜¯è¯ä¹¦ä¸­å¿ƒï¼ˆcertificate authorityï¼‰ç®€ç§°CAã€‚\næ‰€æœ‰æƒ³å‘æ”¾å…¬é’¥çš„äººï¼Œéƒ½éœ€è¦å»CAä¸ºè‡ªå·±çš„å…¬é’¥åšè®¤è¯ã€‚è¯ä¹¦ä¸­å¿ƒä¼šç”¨è‡ªå·±ç§é’¥å’Œå…¬é’¥ä»¥åŠå…¬é’¥äººä¿¡æ¯ä¸€èµ·è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„ä¸œè¥¿å°±å«æ•°å­—è¯ä¹¦ã€‚ä»¥åæ‰€æœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œéƒ½æ˜¯ç»Ÿä¸€ç”¨CAçš„å…¬é’¥è§£å¼€æ•°å­—è¯ä¹¦ï¼Œæ‹¿åˆ°é€šä¿¡ç”¨çš„å…¬é’¥ï¼Œç„¶åè¯æ˜æ•°å­—ç­¾åç¡®å®æ˜¯æ¥è‡ªå“ªé‡Œçš„äº†ã€‚\n\nå…³äºæ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« è®²çš„ç‰¹åˆ«ç”ŸåŠ¨[blog](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)\n\n## SSH\nwikiä¸Šå¯¹SSHçš„å®šä¹‰:\n>Secure Shellï¼ˆç¼©å†™ä¸ºSSHï¼‰ï¼Œç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼›SSHä¸ºä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºä¸Šçš„Shellï¼ˆå£³å±‚ï¼‰æä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚\n>ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼Œå¦‚rshã€FTPã€POPå’ŒTelnetå…¶æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼›å› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€æ•°æ®ã€ç”¨æˆ·å¸å·å’Œç”¨æˆ·å£ä»¤ï¼Œå¾ˆå®¹æ˜“å—åˆ°ä¸­é—´äººï¼ˆman-in-the-middleï¼‰æ”»å‡»æ–¹å¼çš„æ”»å‡»ã€‚å°±æ˜¯å­˜åœ¨å¦ä¸€ä¸ª>äººæˆ–è€…ä¸€å°æœºå™¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨æ¥æ”¶ç”¨æˆ·ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶åå†å†’å……ç”¨æˆ·æŠŠæ•°æ®ä¼ ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚\n>è€ŒSSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚é€šè¿‡SSHå¯ä»¥å¯¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSæ¬ºéª—å’ŒIPæ¬ºéª—ã€‚\n>SSHä¹‹å¦ä¸€é¡¹ä¼˜ç‚¹ä¸ºå…¶ä¼ è¾“çš„æ•°æ®å¯ä»¥æ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚SSHæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå®ƒæ—¢å¯ä»¥ä»£æ›¿Telnetï¼Œåˆå¯ä»¥ä¸ºFTPã€POPã€ç”šè‡³ä¸ºPPPæä¾›ä¸€ä¸ªå®‰å…¨çš„â€œé€šé“â€ã€‚\n\nçœ‹äº†ä»¥åæ˜¾ç„¶æ›´æ™•äº†ï¼Œæ³¨æ„ä¸€ä¸‹ä»–æ˜¯ä¸€ä¸ª`SHELL`, å¯ä»¥ç†è§£ä¸º SSH æœåŠ¡å™¨ä¹‹é—´å®‰å…¨é€šä¿¡çš„ä¸€ä¸ªåè®®ï¼Œæ—¢ç„¶ç§°ä¹‹ä¸ºå®‰å…¨çš„ï¼Œæƒ³å¿…æ˜¯é€šä¿¡è¿‡ç¨‹ä½¿ç”¨äº†åŠ å¯†æ‰‹æ®µã€‚\nè¿™æ—¶å€™å°±ç”¨ä¸Šäº†æˆ‘ä»¬ä¸Šä¸€èŠ‚çš„çŸ¥è¯†äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¦åœ¨æœåŠ¡å™¨ä¹‹å‰å°±è¡Œå®‰å…¨çš„é€šä¿¡ï¼š\n1. Aã€Bä¹‹é—´å»ºç«‹TCPè¿æ¥\n2. Bç”Ÿæˆä¸€å¯¹å…¬ç§å¯†é’¥\n3. BæŠŠå…¬é’¥å‘é€ç»™A\n4. Aç”Ÿæˆä¸€ä¸ªç”¨äºåŠ å¯†æ•°æ®çš„å¯†é’¥Kï¼ˆæ—¢æˆ‘ä»¬æƒ³é€šçŸ¥ç»™å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œä¹‹åçš„æ•°æ®é€šä¿¡éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†ï¼Œè¿™ä¸ªå¯†é’¥ä¸å¯è®©ç¬¬ä¸‰æ–¹çŸ¥é“ï¼‰\n5. AæŠŠKç”¨å…¬é’¥åŠ å¯†å‘é€ç»™Bï¼ŒBè§£å¯†åï¼Œä»æ­¤Aã€Bä¹‹é—´çš„é€šä¿¡æ•°æ®éƒ½ç”¨Kå¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼ˆè½¬ä¸ºäº†å®‰å…¨çš„å¯¹ç§°åŠ å¯†æ–¹å¼ï¼‰ã€‚\n\nè¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯ä¼šæœ‰ä¸€æ ·çš„é—®é¢˜ï¼ŒåŠ å…¥ä¸­é—´æœ‰Cã€Dï¼Œå‡å†’Bå‘æ”¾å…¬é’¥ç»™Aï¼Œå¤¹åœ¨äº†Aå’ŒBä¹‹é—´ï¼Œä¸æ˜¯åˆä¸å®‰å…¨äº†å—ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜SSHåè®®é‡‡ç”¨ç”±äººå·¥åˆ¤æ–­å…¬é’¥çš„fingerprintæ˜¯å¦å¯ä¿¡çš„æ–¹å¼ï¼š\n```bash\nThe authenticity of host '172.20.7.211 (<no hostip for proxy command>)' can't be established.\nRSA key fingerprint is 23:42:c1:e4:3f:d2:cc:37:1d:89:cb:e7:5d:be:5d:53.\nAre you sure you want to continue connecting (yes/no)? \n```\nè¾“å…¥yesä¹‹åæ‰ä¼šè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿™ä¸ªä¿¡æ¯ä¼šå­˜å‚¨åˆ°ç”¨æˆ·çš„.ssh/known_hostsæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å†ç™»å½•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥known_hostæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„å…¬é’¥ä¿¡æ¯ï¼Œå°±ä¸åœ¨æç¤ºç”¨æˆ·ç¡®è®¤äº†.ç›¸å½“äºä¸­é—´åŠ äº†ä¸€æ­¥äººå·¥éªŒè¯ï¼Œç¡®å®šä¸‹è¦è¿æ¥çš„æœºå™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯ä¸€èˆ¬ä¹Ÿç¡®å®æ˜¯çŸ¥é“è‡ªå·±è¦è¿è°çš„ã€‚\nå½“ç„¶è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡:\n```bash\nssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\n```\næˆ‘ä»¬éƒ½ç”¨è¿‡`ssh-keygen` å‘½ä»¤ï¼Œä»–å°±æ˜¯ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥+ç§é’¥ï¼‰ï¼Œç”¨äºæˆ‘ä»¬æ‰€è¯´çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹\n```bash\nssh-keygen -t rsa\n#.ssh/\nid_rsa.pub       //å…¬é’¥   \nid_rsa           //å¯†é’¥\n```\nå°†id_rsa.pubçš„å†…å®¹å†™å…¥authorized_keysæ–‡ä»¶ä¸­ï¼Œè¡¨ç¤ºè¯¥æœºå™¨ç›®å‰æˆæƒçš„ä½¿ç”¨è¯¥å…¬é’¥è®¿é—®\n```bash\ncat id_rsa.pub >> authorized_keys\n```\nè¿™æ ·å°±å°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°authorized_keysä¸­äº†ï¼Œç„¶åéœ€è¦æ³¨æ„é…ç½®æƒé™äº†ï¼Œå¦åˆ™SSHä¸ä¼šå·¥ä½œï¼š\n- å°†.sshç›®å½•çš„æƒé™ä¸º700\n- å°†authorized_keysç›®å½•çš„æƒé™ä¸º600\næœ‰ä¸ª `ssh-copy-id` å·¥å…·å¾ˆå¥½ç”¨,ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å¤åˆ¶å…¬é’¥åˆ°å¯¹åº”æœåŠ¡å™¨ä¸‹çš„ authorized_keysã€‚\n```bash\nssh-copy-id -i username@remote-server\n```\n\nä¸€ä¸ªå®Œæ•´çš„SSHå®¢æˆ·ç«¯è®¤è¯æµç¨‹\nä¸€èˆ¬æˆ‘ä»¬èƒ½æ¥è§¦åˆ°çš„çš„è®¤è¯æ–¹å¼æœ‰ä¸¤ç§ï¼š\n- å¯†ç è®¤è¯\n- å¯†é’¥è®¤è¯\n\nå¯†ç è®¤è¯å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ç™»å½•è¿œç¨‹linuxæœåŠ¡å™¨çš„æ—¶å€™æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚\n\næ¯æ¬¡ç™»å½•éƒ½è¦è¾“å…¥å¯†ç å¾ˆéº»çƒ¦ï¼Œä¸”å¯†ç å¦‚æœç®€å•çš„è¯å¯èƒ½è¿˜ä¼šè¢«æš´åŠ›ç ´è§£ï¼Œè€Œä¸”å¾ˆå¤šè‡ªåŠ¨åŒ–åœºæ™¯è¦æ±‚æˆ‘ä»¬å®ç°å…å¯†ç™»å½•æœåŠ¡å™¨ã€‚å¯†é’¥è®¤è¯æä¾›äº†ä¸€ç§æ›´å®‰å…¨ä¾¿æ·çš„è®¤è¯å®¢æˆ·ç«¯çš„æ–¹å¼ã€‚è¿™ä¸ªæŠ€æœ¯ä¹Ÿç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œç”±å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§å¯†é’¥å¯¹ï¼Œç„¶åå°†å…¬é’¥ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚è®¤è¯çš„è¿‡ç¨‹å¤§ä½“å¦‚ä¸‹ï¼š\n1. å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªå…¬é’¥çš„è®¤è¯è¯·æ±‚ï¼Œå¹¶å‘é€RSA Keyçš„æ¨¡æ•°ä½œä¸ºæ ‡è¯†ç¬¦ã€‚\n2. æœåŠ¡ç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚å¸å·çš„å…¬é’¥ï¼ˆLinuxä¸­å­˜å‚¨åœ¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼‰ï¼Œä»¥åŠå…¶æ‹¥æœ‰çš„è®¿é—®æƒé™ã€‚\n3. æœåŠ¡ç«¯ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹ä¸€ä¸ªéšæœºçš„256ä½çš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯\n4. å®¢æˆ·ç«¯ä½¿ç”¨ç§é’¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£å¯†ï¼Œå¹¶å°†å…¶ç»“åˆsession idç”Ÿæˆä¸€ä¸ªMD5å€¼å‘é€ç»™æœåŠ¡ç«¯ã€‚\n5. æœåŠ¡ç«¯é‡‡ç”¨åŒæ ·çš„æ–¹å¼ç”ŸæˆMD5å€¼ä¸å®¢æˆ·ç«¯è¿”å›çš„MD5å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå®Œæˆå¯¹å®¢æˆ·ç«¯çš„è®¤è¯ã€‚\n\nç–‘ç‚¹ï¼šè¿™ä¸ªæµç¨‹ç¡®å®æ˜¯ä¸€ä¸ªå®Œæ•´çš„éå¯¹ç§°åŠ å¯†å¤„ç†çš„è®¤è¯è¿‡ç¨‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨ä¸­æˆ‘å‘ç°å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œå› ä¸ºæˆ‘æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥åˆ äº†ï¼Œæˆ–è€…åªå¤åˆ¶ç§é’¥åˆ°ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ä¸Šï¼Œæœ€ç»ˆè¿˜æ˜¯å¯ä»¥ç™»å…¥authorized_keysä¸­é…ç½®äº†å¯¹åº”å…¬é’¥çš„æœåŠ¡å™¨ã€‚\n- æ‰€ä»¥æˆ‘çŒœæµ‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡ç«¯è¿™è¾¹æ˜¯æŠŠauthorized_keysä¸­çš„é”è®©å®¢æˆ·ç«¯çš„é’¥åŒ™å¾ªç¯åŒ¹é…çš„ï¼Ÿèƒ½æ‰“å¼€å…¶ä¸­çš„ä¸€æŠŠé”å°±èƒ½ç™»å½•ï¼Œä½†æ˜¯è¿™æ ·keyå¤šçš„è¯ï¼Œå»ºç«‹è¿æ¥å°±ä¼šæœ‰æ•ˆç‡é—®é¢˜ã€‚\n- å¦ä¸€ä¸ªçŒœæµ‹ï¼Œè¿™ä¸ªå‘é€çš„RSA_KEYçš„æ¨¡æ•°æ˜¯é€šè¿‡ç§é’¥å°±èƒ½äº§ç”Ÿçš„ï¼Œå°±æ˜¯è¯´é€šè¿‡ç§é’¥æœ‰åŠæ³•ç›´æ¥å¾—åˆ°å®ƒå¯¹åº”å…¬é’¥çš„æ ‡å¿—ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¹Ÿå°±ç”¨ä¸ç€ä¸“é—¨ä¿å­˜å…¬é’¥ï¼Œä¹Ÿä¸ç”¨ç›´æ¥å‘é€çš„å…¬é’¥è¿›è¡Œè®¤è¯ã€‚\nç›®å‰æˆ‘ä¹Ÿä¸ç¡®å®šä¸ºå•¥å®¢æˆ·ç«¯æ²¡å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œæœ€åä¹Ÿèƒ½ç™»å½•çš„çœŸæ­£åŸå› ã€‚\n\n## SSL\nTLSï¼ˆTransport Layer Securityï¼šå®ƒç›¸å½“äºæ˜¯SSLåè®®çš„ä¸€ä¸ªåç»­ç‰ˆæœ¬ï¼Œä»–æ˜¯SSLç»è¿‡IETFæ ‡å‡†åŒ–ä¹‹åçš„äº§ç‰©ã€‚\nä¸Šé¢wikiä¸Šä¹Ÿæœ‰å†™ï¼ŒSSHå…¶å®æ˜¯ä¸“é—¨ä¸ºshellè®¾è®¡çš„ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå®äº†ä¸¤ä¸ªç½‘ç»œå±‚ï¼ˆä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼‰ã€‚é€šä¿—ç‚¹è®²å°±æ˜¯åªæœ‰SSHå®¢æˆ·ç«¯ï¼Œå’ŒSSHæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡æ‰èƒ½ä½¿ç”¨è¿™ä¸ªåè®®ï¼Œå…¶ä»–è½¯ä»¶æœåŠ¡æ— æ³•ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬éå¸¸éœ€è¦ä¸€ä¸ªé€šç”¨çš„ï¼Œå»ºç«‹åœ¨åº”ç”¨å±‚ä¹‹ä¸‹çš„ä¸€ä¸ªä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ç§å¯¹ä¸Šå±‚åº”ç”¨åè®®é€æ˜çš„ï¼Œä¸ç®¡æ˜¯HTTPã€FTPã€è¿˜æ˜¯ç”µå­é‚®ä»¶åè®®æˆ–å…¶ä»–ä»»ä½•åº”ç”¨å±‚åè®®éƒ½å¯ä»¥ä¾èµ–çš„åº•å±‚çš„å¯å®‰å…¨é€šä¿¡çš„ä¼ è¾“å±‚åè®®ã€‚SSLï¼ˆSecure Sockets Layerï¼‰åè®®å°±æ˜¯åœ¨æ­¤èƒŒæ™¯ä¸‹è¯ç”Ÿçš„ã€‚\n\nå¯¹äºä¸€ä¸ªé€šç”¨çš„åè®®æ¥è¯´ï¼Œç±»ä¼¼SSHä½¿ç”¨printfingeræ¥é˜²æ­¢ä¸­é—´äººæ”»å‡»ä¸ä¸€æ ·ï¼Œäº’è”ç½‘ä¸Šæ‰€æœ‰çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ˜¯ä¸å¯èƒ½è‡ªå·±åˆ¤æ–­å¯¹æ–¹æ˜¯ä¸æ˜¯å¯ä¿¡ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†æˆ‘ä»¬æ‰€è¯´çš„ `æ•°å­—è¯ä¹¦` çš„æ¦‚å¿µï¼Œåœ¨SSLä¸­å¼•å…¥äº†ä¸€ä¸ªå…¬è¯æœºå…³ï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ `CA`ã€‚æœ‰äº†æ•°å­—è¯ä¹¦ï¼Œæµè§ˆå™¨åœ¨å»ºç«‹SSLè¿æ¥ä¹‹å‰ï¼Œå¹¶ä¸åªæ˜¯ç®€å•è·å–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œè€Œä»æœåŠ¡å™¨è·å–æ•°å­—è¯ä¹¦ã€‚æœ‰äº†ä¿¡ä»»æœºåˆ¶ä¹‹åï¼Œå‰©ä¸‹çš„äº¤äº’è¿‡ç¨‹è¿˜æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹ã€‚\n![](http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092007.png)\n[å›¾è§£SSL/TLSåè®®-é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html)\n\n## HTTPS\nä¸Šé¢çš„æ¦‚å¿µæ¸…æ™°äº†ä»¥åï¼Œç†è§£HTTPSå°±ç®€å•äº†ã€‚HTTPSçš„å…¨ç¨‹æ˜¯ Hypertext Transfer Protocol Secureï¼Œå°±æ˜¯ è¿è¡Œåœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTPåè®®ã€‚\nåšä¸ºç½‘ç«™ç®¡ç†å‘˜ï¼Œå¯èƒ½ä¼šé‡åˆ°ç”³è¯·æ•°å­—è¯ä¹¦çš„ä»»åŠ¡ï¼Œç†è§£äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œç”³è¯·æ•°å­—è¯ä¹¦å°±ä¸é‚£ä¹ˆä¸€å¤´é›¾æ°´äº†ï¼Œé¦–å…ˆä½ è¦ä¸ºæœåŠ¡å™¨ç”Ÿæˆä¸€å¯¹å…¬å¸å¯†é’¥ï¼Œç„¶åæŠŠä½ ç½‘ç«™çš„ä¿¡æ¯è¿åŒä½ çš„å…¬é’¥ä¸€èµ·å‘é€ç»™æŸä¸ªæƒå¨çš„CAï¼ŒCAä¼šé€šè¿‡æŸç§æ–¹å¼è®¤è¯ç”³è¯·äººæ˜¯å¦çœŸçš„æ˜¯ç½‘ç«™çš„æ‰€æœ‰äººï¼Œæ¯”å¦‚è®©ä½ åœ¨ç½‘ç«™çš„æŒ‡å®šè·¯å¾„ä¸Šä¼ ä»–æŒ‡å®šçš„ç‰¹æ®ŠèšŠå­åºåˆ—ã€‚éªŒè¯é€šè¿‡å°±ä¼šå¾—åˆ°è¯ä¹¦äº†ã€‚\n\n\n## å‚è€ƒæ–‡çŒ®\n- http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\n- https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•\n- https://www.jianshu.com/p/5e3f9dfd2cb4\n- https://www.jianshu.com/p/b078282653b3","source":"_posts/sshLogin.md","raw":"---\ntitle: SSHã€SSL å’Œ HTTPS\ndate: 2019-09-03 10:56:46\ncategories: \n- devOps\ntags:\n- SSH\n- SSL\n- Https\n- encrypt\n---\n\n> ä¸€ç›´å¯¹ SSH ã€SSL ä»¥åŠ HTTPS å’Œå®ƒä»¬äº’ç›¸ä¹‹é—´çš„å…³ç³»éƒ½äº‘é‡Œé›¾é‡Œçš„ï¼Œä¸‹é¢å‚è€ƒç½‘ä¸Šçš„æ–‡ç« å’Œè‡ªå·±çš„ç†è§£æ¢³ç†ä¸€ä¸‹ï¼Œæ™•äº†å°±å†å›æ¥çœ‹ä¸€ä¸‹ï¼Œæ€»ä¼šè®°ä½çš„ã€‚\n\n## åŠ å¯†ç®—æ³•\né¦–å…ˆå…ˆè¯´ä¸‹åŠ å¯†ç®—æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ`å¯¹ç§°åŠ å¯†` å’Œ `éå¯¹ç§°åŠ å¯†`ã€‚\n### å¯¹ç§°åŠ å¯†\né€šä¿¡åŒæ–¹çš„æ•°æ®éƒ½æ˜¯ç”¨åŒä¸€å¥—å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚\nåœ¨1976å¹´ä»¥å‰ï¼Œæ‰€æœ‰çš„åŠ å¯†éƒ½é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¦‚ä½•ç®¡ç†ç§˜é’¥ï¼Ÿæ—¢è¦ä¿è¯ç§˜é’¥ä¸æ³„éœ²ï¼ŒåŒæ—¶è¿˜è¦ä¿è¯ç§˜é’¥çš„å…±äº«æ€§ã€‚\n### éå¯¹ç§°åŠ å¯†\n1976å¹´æœ‰ä¸¤ä½æ•°å­¦å®¶æå‡ºçš„ä¸€ä¸ªæ–°çš„åŠ å¯†æ¦‚å¿µï¼š\n1. Aç”Ÿæˆä¸€å¯¹ä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚\n2. Bè·å–Aç”Ÿæˆçš„å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥å¯¹ä¿¡æ¯åŠ å¯†ã€‚\n3. Aæ”¶åˆ°Bçš„åŠ å¯†ä¿¡æ¯åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚\n\néå¯¹ç§°åŠ å¯†å¼•å…¥äº†å…¬é’¥å’Œç§é’¥çš„æ¦‚å¿µã€‚å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚å…¬é’¥æ˜¯é¢å‘æ‰€æœ‰ä½¿ç”¨è€…å…¬å¼€çš„ã€‚\nç›®å‰è®¡ç®—æœºé¢†åŸŸä½¿ç”¨æœ€å¹¿æ³›çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯[RSA](https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95)ã€‚\n\nå¯¹ç§°åŠ å¯†çœ‹èµ·æ¥å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼š\n\n- åŠ å¯†æ›´è€—æ—¶ï¼šç®—æ³•æ›´å¤æ‚ã€‚\n- å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»:å³å¦‚æœæœ‰Cå†’å……Aåˆ©ç”¨Açš„å…¬é’¥ç»™Bå‘æ¶ˆæ¯ï¼ŒBçš„æ‰€æœ‰æ¶ˆæ¯å¯¹Cå…¶å®å°±æ˜¯é€æ˜çš„äº†ã€‚\n  \né’ˆå¯¹ä¸­é—´äººæ”»å‡»ï¼Œä¸€èˆ¬å°±é‡‡ç”¨éå¯¹ç§°åŠ å¯†+æ‘˜è¦ç®—æ³•+æ•°å­—ç­¾åçš„æœºåˆ¶æ¥ç¡®ä¿ä¼ è¾“å®‰å…¨ã€‚\n### æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\nHash ç®—æ³•çš„ç‰¹ç‚¹æ˜¯å•å‘ä¸å¯é€†ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡hashå¯¹ç›®å‰ä¿¡æ¯åŠ å¯†ç”Ÿæˆç‰¹å®šé•¿åº¦ä¸”å”¯ä¸€çš„hashå€¼ï¼Œè¯¥å€¼ä¹Ÿä¸èƒ½è¢«é€†å‘ç ´è¯‘ã€‚å› æ­¤hashç®—æ³•è¿›åœºç”¨åœ¨ä¸å¯è¿˜åŸçš„å¯†ç å­˜å‚¨ã€ä¿¡æ¯å®Œæ•´æ€§æ ¡éªŒç­‰é¢†åŸŸã€‚å¸¸è§çš„hashç®—æ³•ï¼šMD2ï¼ŒMD4ï¼ŒMD5ï¼ŒSHAç­‰\n\n### æ•°å­—ç­¾å\næ•°å­—ç­¾åï¼Œæ˜¯ä¸ºäº†ä¿è¯ä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ä½¿ç”¨hashç®—æ³•ç”Ÿæˆè¦å‘é€æ˜æ–‡çš„æ‘˜è¦ï¼Œç„¶å æŠŠæ˜æ–‡å’Œæ‘˜è¦éƒ½é€šè¿‡ç§é’¥åŠ å¯†ï¼ŒåŠ å¯†åçš„æ‘˜è¦ä½œä¸º`æ•°å­—ç­¾åï¼ˆdigital signatureï¼‰`è·ŸåŠ å¯†åçš„å†…å®¹ä¸€èµ·å‘é€ç»™æ¥å—è€…ã€‚æ¥å—è€…æ”¶åˆ°æ•°æ®ä¿¡æ¯åï¼Œä½¿ç”¨å…¬é’¥åˆ†åˆ«å¯¹å†…å®¹å’Œä¿¡æ¯è§£å¯†ï¼Œå¾—åˆ°æ•°æ®å’Œå†…å®¹æ‘˜è¦ï¼Œç„¶åç”¨ä¸€æ ·çš„ç®—æ³•å¯¹å†…å®¹ç”Ÿæˆæ‘˜è¦ï¼Œæ¯”è¾ƒæ‘˜è¦æ˜¯å¦ç›¸åŒæ¥ç¡®è®¤ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚\n\n### æ•°å­—è¯ä¹¦\nä»¥ä¸Šçš„æµç¨‹è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæœ‰äººå†’å……é€šä¿¡äººå‘æ”¾å…¬é’¥ã€‚è¿™ç§åœºæ™¯çš„å‡ºç°ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸ªå…¬è¯äººäº†ï¼Œå‘Šè¯‰æˆ‘ä»¬åˆ°åº•æœ‰æ˜¯çœŸçš„æ³¨å†Œç™»è®°è¿‡çš„ã€‚è¿™ä¸ªå…¬è¯äººå°±æ˜¯è¯ä¹¦ä¸­å¿ƒï¼ˆcertificate authorityï¼‰ç®€ç§°CAã€‚\næ‰€æœ‰æƒ³å‘æ”¾å…¬é’¥çš„äººï¼Œéƒ½éœ€è¦å»CAä¸ºè‡ªå·±çš„å…¬é’¥åšè®¤è¯ã€‚è¯ä¹¦ä¸­å¿ƒä¼šç”¨è‡ªå·±ç§é’¥å’Œå…¬é’¥ä»¥åŠå…¬é’¥äººä¿¡æ¯ä¸€èµ·è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„ä¸œè¥¿å°±å«æ•°å­—è¯ä¹¦ã€‚ä»¥åæ‰€æœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œéƒ½æ˜¯ç»Ÿä¸€ç”¨CAçš„å…¬é’¥è§£å¼€æ•°å­—è¯ä¹¦ï¼Œæ‹¿åˆ°é€šä¿¡ç”¨çš„å…¬é’¥ï¼Œç„¶åè¯æ˜æ•°å­—ç­¾åç¡®å®æ˜¯æ¥è‡ªå“ªé‡Œçš„äº†ã€‚\n\nå…³äºæ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« è®²çš„ç‰¹åˆ«ç”ŸåŠ¨[blog](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)\n\n## SSH\nwikiä¸Šå¯¹SSHçš„å®šä¹‰:\n>Secure Shellï¼ˆç¼©å†™ä¸ºSSHï¼‰ï¼Œç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼›SSHä¸ºä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºä¸Šçš„Shellï¼ˆå£³å±‚ï¼‰æä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚\n>ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼Œå¦‚rshã€FTPã€POPå’ŒTelnetå…¶æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼›å› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€æ•°æ®ã€ç”¨æˆ·å¸å·å’Œç”¨æˆ·å£ä»¤ï¼Œå¾ˆå®¹æ˜“å—åˆ°ä¸­é—´äººï¼ˆman-in-the-middleï¼‰æ”»å‡»æ–¹å¼çš„æ”»å‡»ã€‚å°±æ˜¯å­˜åœ¨å¦ä¸€ä¸ª>äººæˆ–è€…ä¸€å°æœºå™¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨æ¥æ”¶ç”¨æˆ·ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶åå†å†’å……ç”¨æˆ·æŠŠæ•°æ®ä¼ ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚\n>è€ŒSSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚é€šè¿‡SSHå¯ä»¥å¯¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSæ¬ºéª—å’ŒIPæ¬ºéª—ã€‚\n>SSHä¹‹å¦ä¸€é¡¹ä¼˜ç‚¹ä¸ºå…¶ä¼ è¾“çš„æ•°æ®å¯ä»¥æ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚SSHæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå®ƒæ—¢å¯ä»¥ä»£æ›¿Telnetï¼Œåˆå¯ä»¥ä¸ºFTPã€POPã€ç”šè‡³ä¸ºPPPæä¾›ä¸€ä¸ªå®‰å…¨çš„â€œé€šé“â€ã€‚\n\nçœ‹äº†ä»¥åæ˜¾ç„¶æ›´æ™•äº†ï¼Œæ³¨æ„ä¸€ä¸‹ä»–æ˜¯ä¸€ä¸ª`SHELL`, å¯ä»¥ç†è§£ä¸º SSH æœåŠ¡å™¨ä¹‹é—´å®‰å…¨é€šä¿¡çš„ä¸€ä¸ªåè®®ï¼Œæ—¢ç„¶ç§°ä¹‹ä¸ºå®‰å…¨çš„ï¼Œæƒ³å¿…æ˜¯é€šä¿¡è¿‡ç¨‹ä½¿ç”¨äº†åŠ å¯†æ‰‹æ®µã€‚\nè¿™æ—¶å€™å°±ç”¨ä¸Šäº†æˆ‘ä»¬ä¸Šä¸€èŠ‚çš„çŸ¥è¯†äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¦åœ¨æœåŠ¡å™¨ä¹‹å‰å°±è¡Œå®‰å…¨çš„é€šä¿¡ï¼š\n1. Aã€Bä¹‹é—´å»ºç«‹TCPè¿æ¥\n2. Bç”Ÿæˆä¸€å¯¹å…¬ç§å¯†é’¥\n3. BæŠŠå…¬é’¥å‘é€ç»™A\n4. Aç”Ÿæˆä¸€ä¸ªç”¨äºåŠ å¯†æ•°æ®çš„å¯†é’¥Kï¼ˆæ—¢æˆ‘ä»¬æƒ³é€šçŸ¥ç»™å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œä¹‹åçš„æ•°æ®é€šä¿¡éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†ï¼Œè¿™ä¸ªå¯†é’¥ä¸å¯è®©ç¬¬ä¸‰æ–¹çŸ¥é“ï¼‰\n5. AæŠŠKç”¨å…¬é’¥åŠ å¯†å‘é€ç»™Bï¼ŒBè§£å¯†åï¼Œä»æ­¤Aã€Bä¹‹é—´çš„é€šä¿¡æ•°æ®éƒ½ç”¨Kå¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼ˆè½¬ä¸ºäº†å®‰å…¨çš„å¯¹ç§°åŠ å¯†æ–¹å¼ï¼‰ã€‚\n\nè¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯ä¼šæœ‰ä¸€æ ·çš„é—®é¢˜ï¼ŒåŠ å…¥ä¸­é—´æœ‰Cã€Dï¼Œå‡å†’Bå‘æ”¾å…¬é’¥ç»™Aï¼Œå¤¹åœ¨äº†Aå’ŒBä¹‹é—´ï¼Œä¸æ˜¯åˆä¸å®‰å…¨äº†å—ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜SSHåè®®é‡‡ç”¨ç”±äººå·¥åˆ¤æ–­å…¬é’¥çš„fingerprintæ˜¯å¦å¯ä¿¡çš„æ–¹å¼ï¼š\n```bash\nThe authenticity of host '172.20.7.211 (<no hostip for proxy command>)' can't be established.\nRSA key fingerprint is 23:42:c1:e4:3f:d2:cc:37:1d:89:cb:e7:5d:be:5d:53.\nAre you sure you want to continue connecting (yes/no)? \n```\nè¾“å…¥yesä¹‹åæ‰ä¼šè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿™ä¸ªä¿¡æ¯ä¼šå­˜å‚¨åˆ°ç”¨æˆ·çš„.ssh/known_hostsæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å†ç™»å½•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥known_hostæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„å…¬é’¥ä¿¡æ¯ï¼Œå°±ä¸åœ¨æç¤ºç”¨æˆ·ç¡®è®¤äº†.ç›¸å½“äºä¸­é—´åŠ äº†ä¸€æ­¥äººå·¥éªŒè¯ï¼Œç¡®å®šä¸‹è¦è¿æ¥çš„æœºå™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯ä¸€èˆ¬ä¹Ÿç¡®å®æ˜¯çŸ¥é“è‡ªå·±è¦è¿è°çš„ã€‚\nå½“ç„¶è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡:\n```bash\nssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no\n```\næˆ‘ä»¬éƒ½ç”¨è¿‡`ssh-keygen` å‘½ä»¤ï¼Œä»–å°±æ˜¯ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥+ç§é’¥ï¼‰ï¼Œç”¨äºæˆ‘ä»¬æ‰€è¯´çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹\n```bash\nssh-keygen -t rsa\n#.ssh/\nid_rsa.pub       //å…¬é’¥   \nid_rsa           //å¯†é’¥\n```\nå°†id_rsa.pubçš„å†…å®¹å†™å…¥authorized_keysæ–‡ä»¶ä¸­ï¼Œè¡¨ç¤ºè¯¥æœºå™¨ç›®å‰æˆæƒçš„ä½¿ç”¨è¯¥å…¬é’¥è®¿é—®\n```bash\ncat id_rsa.pub >> authorized_keys\n```\nè¿™æ ·å°±å°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°authorized_keysä¸­äº†ï¼Œç„¶åéœ€è¦æ³¨æ„é…ç½®æƒé™äº†ï¼Œå¦åˆ™SSHä¸ä¼šå·¥ä½œï¼š\n- å°†.sshç›®å½•çš„æƒé™ä¸º700\n- å°†authorized_keysç›®å½•çš„æƒé™ä¸º600\næœ‰ä¸ª `ssh-copy-id` å·¥å…·å¾ˆå¥½ç”¨,ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å¤åˆ¶å…¬é’¥åˆ°å¯¹åº”æœåŠ¡å™¨ä¸‹çš„ authorized_keysã€‚\n```bash\nssh-copy-id -i username@remote-server\n```\n\nä¸€ä¸ªå®Œæ•´çš„SSHå®¢æˆ·ç«¯è®¤è¯æµç¨‹\nä¸€èˆ¬æˆ‘ä»¬èƒ½æ¥è§¦åˆ°çš„çš„è®¤è¯æ–¹å¼æœ‰ä¸¤ç§ï¼š\n- å¯†ç è®¤è¯\n- å¯†é’¥è®¤è¯\n\nå¯†ç è®¤è¯å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ç™»å½•è¿œç¨‹linuxæœåŠ¡å™¨çš„æ—¶å€™æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚\n\næ¯æ¬¡ç™»å½•éƒ½è¦è¾“å…¥å¯†ç å¾ˆéº»çƒ¦ï¼Œä¸”å¯†ç å¦‚æœç®€å•çš„è¯å¯èƒ½è¿˜ä¼šè¢«æš´åŠ›ç ´è§£ï¼Œè€Œä¸”å¾ˆå¤šè‡ªåŠ¨åŒ–åœºæ™¯è¦æ±‚æˆ‘ä»¬å®ç°å…å¯†ç™»å½•æœåŠ¡å™¨ã€‚å¯†é’¥è®¤è¯æä¾›äº†ä¸€ç§æ›´å®‰å…¨ä¾¿æ·çš„è®¤è¯å®¢æˆ·ç«¯çš„æ–¹å¼ã€‚è¿™ä¸ªæŠ€æœ¯ä¹Ÿç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œç”±å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§å¯†é’¥å¯¹ï¼Œç„¶åå°†å…¬é’¥ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚è®¤è¯çš„è¿‡ç¨‹å¤§ä½“å¦‚ä¸‹ï¼š\n1. å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªå…¬é’¥çš„è®¤è¯è¯·æ±‚ï¼Œå¹¶å‘é€RSA Keyçš„æ¨¡æ•°ä½œä¸ºæ ‡è¯†ç¬¦ã€‚\n2. æœåŠ¡ç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚å¸å·çš„å…¬é’¥ï¼ˆLinuxä¸­å­˜å‚¨åœ¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼‰ï¼Œä»¥åŠå…¶æ‹¥æœ‰çš„è®¿é—®æƒé™ã€‚\n3. æœåŠ¡ç«¯ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹ä¸€ä¸ªéšæœºçš„256ä½çš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯\n4. å®¢æˆ·ç«¯ä½¿ç”¨ç§é’¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£å¯†ï¼Œå¹¶å°†å…¶ç»“åˆsession idç”Ÿæˆä¸€ä¸ªMD5å€¼å‘é€ç»™æœåŠ¡ç«¯ã€‚\n5. æœåŠ¡ç«¯é‡‡ç”¨åŒæ ·çš„æ–¹å¼ç”ŸæˆMD5å€¼ä¸å®¢æˆ·ç«¯è¿”å›çš„MD5å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå®Œæˆå¯¹å®¢æˆ·ç«¯çš„è®¤è¯ã€‚\n\nç–‘ç‚¹ï¼šè¿™ä¸ªæµç¨‹ç¡®å®æ˜¯ä¸€ä¸ªå®Œæ•´çš„éå¯¹ç§°åŠ å¯†å¤„ç†çš„è®¤è¯è¿‡ç¨‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨ä¸­æˆ‘å‘ç°å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œå› ä¸ºæˆ‘æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥åˆ äº†ï¼Œæˆ–è€…åªå¤åˆ¶ç§é’¥åˆ°ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ä¸Šï¼Œæœ€ç»ˆè¿˜æ˜¯å¯ä»¥ç™»å…¥authorized_keysä¸­é…ç½®äº†å¯¹åº”å…¬é’¥çš„æœåŠ¡å™¨ã€‚\n- æ‰€ä»¥æˆ‘çŒœæµ‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡ç«¯è¿™è¾¹æ˜¯æŠŠauthorized_keysä¸­çš„é”è®©å®¢æˆ·ç«¯çš„é’¥åŒ™å¾ªç¯åŒ¹é…çš„ï¼Ÿèƒ½æ‰“å¼€å…¶ä¸­çš„ä¸€æŠŠé”å°±èƒ½ç™»å½•ï¼Œä½†æ˜¯è¿™æ ·keyå¤šçš„è¯ï¼Œå»ºç«‹è¿æ¥å°±ä¼šæœ‰æ•ˆç‡é—®é¢˜ã€‚\n- å¦ä¸€ä¸ªçŒœæµ‹ï¼Œè¿™ä¸ªå‘é€çš„RSA_KEYçš„æ¨¡æ•°æ˜¯é€šè¿‡ç§é’¥å°±èƒ½äº§ç”Ÿçš„ï¼Œå°±æ˜¯è¯´é€šè¿‡ç§é’¥æœ‰åŠæ³•ç›´æ¥å¾—åˆ°å®ƒå¯¹åº”å…¬é’¥çš„æ ‡å¿—ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¹Ÿå°±ç”¨ä¸ç€ä¸“é—¨ä¿å­˜å…¬é’¥ï¼Œä¹Ÿä¸ç”¨ç›´æ¥å‘é€çš„å…¬é’¥è¿›è¡Œè®¤è¯ã€‚\nç›®å‰æˆ‘ä¹Ÿä¸ç¡®å®šä¸ºå•¥å®¢æˆ·ç«¯æ²¡å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œæœ€åä¹Ÿèƒ½ç™»å½•çš„çœŸæ­£åŸå› ã€‚\n\n## SSL\nTLSï¼ˆTransport Layer Securityï¼šå®ƒç›¸å½“äºæ˜¯SSLåè®®çš„ä¸€ä¸ªåç»­ç‰ˆæœ¬ï¼Œä»–æ˜¯SSLç»è¿‡IETFæ ‡å‡†åŒ–ä¹‹åçš„äº§ç‰©ã€‚\nä¸Šé¢wikiä¸Šä¹Ÿæœ‰å†™ï¼ŒSSHå…¶å®æ˜¯ä¸“é—¨ä¸ºshellè®¾è®¡çš„ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå®äº†ä¸¤ä¸ªç½‘ç»œå±‚ï¼ˆä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼‰ã€‚é€šä¿—ç‚¹è®²å°±æ˜¯åªæœ‰SSHå®¢æˆ·ç«¯ï¼Œå’ŒSSHæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡æ‰èƒ½ä½¿ç”¨è¿™ä¸ªåè®®ï¼Œå…¶ä»–è½¯ä»¶æœåŠ¡æ— æ³•ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬éå¸¸éœ€è¦ä¸€ä¸ªé€šç”¨çš„ï¼Œå»ºç«‹åœ¨åº”ç”¨å±‚ä¹‹ä¸‹çš„ä¸€ä¸ªä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ç§å¯¹ä¸Šå±‚åº”ç”¨åè®®é€æ˜çš„ï¼Œä¸ç®¡æ˜¯HTTPã€FTPã€è¿˜æ˜¯ç”µå­é‚®ä»¶åè®®æˆ–å…¶ä»–ä»»ä½•åº”ç”¨å±‚åè®®éƒ½å¯ä»¥ä¾èµ–çš„åº•å±‚çš„å¯å®‰å…¨é€šä¿¡çš„ä¼ è¾“å±‚åè®®ã€‚SSLï¼ˆSecure Sockets Layerï¼‰åè®®å°±æ˜¯åœ¨æ­¤èƒŒæ™¯ä¸‹è¯ç”Ÿçš„ã€‚\n\nå¯¹äºä¸€ä¸ªé€šç”¨çš„åè®®æ¥è¯´ï¼Œç±»ä¼¼SSHä½¿ç”¨printfingeræ¥é˜²æ­¢ä¸­é—´äººæ”»å‡»ä¸ä¸€æ ·ï¼Œäº’è”ç½‘ä¸Šæ‰€æœ‰çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ˜¯ä¸å¯èƒ½è‡ªå·±åˆ¤æ–­å¯¹æ–¹æ˜¯ä¸æ˜¯å¯ä¿¡ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†æˆ‘ä»¬æ‰€è¯´çš„ `æ•°å­—è¯ä¹¦` çš„æ¦‚å¿µï¼Œåœ¨SSLä¸­å¼•å…¥äº†ä¸€ä¸ªå…¬è¯æœºå…³ï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ `CA`ã€‚æœ‰äº†æ•°å­—è¯ä¹¦ï¼Œæµè§ˆå™¨åœ¨å»ºç«‹SSLè¿æ¥ä¹‹å‰ï¼Œå¹¶ä¸åªæ˜¯ç®€å•è·å–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œè€Œä»æœåŠ¡å™¨è·å–æ•°å­—è¯ä¹¦ã€‚æœ‰äº†ä¿¡ä»»æœºåˆ¶ä¹‹åï¼Œå‰©ä¸‹çš„äº¤äº’è¿‡ç¨‹è¿˜æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹ã€‚\n![](http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092007.png)\n[å›¾è§£SSL/TLSåè®®-é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html)\n\n## HTTPS\nä¸Šé¢çš„æ¦‚å¿µæ¸…æ™°äº†ä»¥åï¼Œç†è§£HTTPSå°±ç®€å•äº†ã€‚HTTPSçš„å…¨ç¨‹æ˜¯ Hypertext Transfer Protocol Secureï¼Œå°±æ˜¯ è¿è¡Œåœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTPåè®®ã€‚\nåšä¸ºç½‘ç«™ç®¡ç†å‘˜ï¼Œå¯èƒ½ä¼šé‡åˆ°ç”³è¯·æ•°å­—è¯ä¹¦çš„ä»»åŠ¡ï¼Œç†è§£äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œç”³è¯·æ•°å­—è¯ä¹¦å°±ä¸é‚£ä¹ˆä¸€å¤´é›¾æ°´äº†ï¼Œé¦–å…ˆä½ è¦ä¸ºæœåŠ¡å™¨ç”Ÿæˆä¸€å¯¹å…¬å¸å¯†é’¥ï¼Œç„¶åæŠŠä½ ç½‘ç«™çš„ä¿¡æ¯è¿åŒä½ çš„å…¬é’¥ä¸€èµ·å‘é€ç»™æŸä¸ªæƒå¨çš„CAï¼ŒCAä¼šé€šè¿‡æŸç§æ–¹å¼è®¤è¯ç”³è¯·äººæ˜¯å¦çœŸçš„æ˜¯ç½‘ç«™çš„æ‰€æœ‰äººï¼Œæ¯”å¦‚è®©ä½ åœ¨ç½‘ç«™çš„æŒ‡å®šè·¯å¾„ä¸Šä¼ ä»–æŒ‡å®šçš„ç‰¹æ®ŠèšŠå­åºåˆ—ã€‚éªŒè¯é€šè¿‡å°±ä¼šå¾—åˆ°è¯ä¹¦äº†ã€‚\n\n\n## å‚è€ƒæ–‡çŒ®\n- http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\n- https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•\n- https://www.jianshu.com/p/5e3f9dfd2cb4\n- https://www.jianshu.com/p/b078282653b3","slug":"sshLogin","published":1,"updated":"2019-09-08T02:27:23.466Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhr30013uhoxw2u65v7z","content":"<blockquote>\n<p>ä¸€ç›´å¯¹ SSH ã€SSL ä»¥åŠ HTTPS å’Œå®ƒä»¬äº’ç›¸ä¹‹é—´çš„å…³ç³»éƒ½äº‘é‡Œé›¾é‡Œçš„ï¼Œä¸‹é¢å‚è€ƒç½‘ä¸Šçš„æ–‡ç« å’Œè‡ªå·±çš„ç†è§£æ¢³ç†ä¸€ä¸‹ï¼Œæ™•äº†å°±å†å›æ¥çœ‹ä¸€ä¸‹ï¼Œæ€»ä¼šè®°ä½çš„ã€‚</p>\n</blockquote>\n<h2 id=\"åŠ å¯†ç®—æ³•\"><a href=\"#åŠ å¯†ç®—æ³•\" class=\"headerlink\" title=\"åŠ å¯†ç®—æ³•\"></a>åŠ å¯†ç®—æ³•</h2><p>é¦–å…ˆå…ˆè¯´ä¸‹åŠ å¯†ç®—æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ<code>å¯¹ç§°åŠ å¯†</code> å’Œ <code>éå¯¹ç§°åŠ å¯†</code>ã€‚</p>\n<h3 id=\"å¯¹ç§°åŠ å¯†\"><a href=\"#å¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"å¯¹ç§°åŠ å¯†\"></a>å¯¹ç§°åŠ å¯†</h3><p>é€šä¿¡åŒæ–¹çš„æ•°æ®éƒ½æ˜¯ç”¨åŒä¸€å¥—å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚<br>åœ¨1976å¹´ä»¥å‰ï¼Œæ‰€æœ‰çš„åŠ å¯†éƒ½é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¦‚ä½•ç®¡ç†ç§˜é’¥ï¼Ÿæ—¢è¦ä¿è¯ç§˜é’¥ä¸æ³„éœ²ï¼ŒåŒæ—¶è¿˜è¦ä¿è¯ç§˜é’¥çš„å…±äº«æ€§ã€‚</p>\n<h3 id=\"éå¯¹ç§°åŠ å¯†\"><a href=\"#éå¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"éå¯¹ç§°åŠ å¯†\"></a>éå¯¹ç§°åŠ å¯†</h3><p>1976å¹´æœ‰ä¸¤ä½æ•°å­¦å®¶æå‡ºçš„ä¸€ä¸ªæ–°çš„åŠ å¯†æ¦‚å¿µï¼š</p>\n<ol>\n<li>Aç”Ÿæˆä¸€å¯¹ä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚</li>\n<li>Bè·å–Aç”Ÿæˆçš„å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥å¯¹ä¿¡æ¯åŠ å¯†ã€‚</li>\n<li>Aæ”¶åˆ°Bçš„åŠ å¯†ä¿¡æ¯åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</li>\n</ol>\n<p>éå¯¹ç§°åŠ å¯†å¼•å…¥äº†å…¬é’¥å’Œç§é’¥çš„æ¦‚å¿µã€‚å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚å…¬é’¥æ˜¯é¢å‘æ‰€æœ‰ä½¿ç”¨è€…å…¬å¼€çš„ã€‚<br>ç›®å‰è®¡ç®—æœºé¢†åŸŸä½¿ç”¨æœ€å¹¿æ³›çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯<a href=\"https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95\" target=\"_blank\" rel=\"noopener\">RSA</a>ã€‚</p>\n<p>å¯¹ç§°åŠ å¯†çœ‹èµ·æ¥å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>åŠ å¯†æ›´è€—æ—¶ï¼šç®—æ³•æ›´å¤æ‚ã€‚</li>\n<li>å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»:å³å¦‚æœæœ‰Cå†’å……Aåˆ©ç”¨Açš„å…¬é’¥ç»™Bå‘æ¶ˆæ¯ï¼ŒBçš„æ‰€æœ‰æ¶ˆæ¯å¯¹Cå…¶å®å°±æ˜¯é€æ˜çš„äº†ã€‚</li>\n</ul>\n<p>é’ˆå¯¹ä¸­é—´äººæ”»å‡»ï¼Œä¸€èˆ¬å°±é‡‡ç”¨éå¯¹ç§°åŠ å¯†+æ‘˜è¦ç®—æ³•+æ•°å­—ç­¾åçš„æœºåˆ¶æ¥ç¡®ä¿ä¼ è¾“å®‰å…¨ã€‚</p>\n<h3 id=\"æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\"><a href=\"#æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\" class=\"headerlink\" title=\"æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\"></a>æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰</h3><p>Hash ç®—æ³•çš„ç‰¹ç‚¹æ˜¯å•å‘ä¸å¯é€†ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡hashå¯¹ç›®å‰ä¿¡æ¯åŠ å¯†ç”Ÿæˆç‰¹å®šé•¿åº¦ä¸”å”¯ä¸€çš„hashå€¼ï¼Œè¯¥å€¼ä¹Ÿä¸èƒ½è¢«é€†å‘ç ´è¯‘ã€‚å› æ­¤hashç®—æ³•è¿›åœºç”¨åœ¨ä¸å¯è¿˜åŸçš„å¯†ç å­˜å‚¨ã€ä¿¡æ¯å®Œæ•´æ€§æ ¡éªŒç­‰é¢†åŸŸã€‚å¸¸è§çš„hashç®—æ³•ï¼šMD2ï¼ŒMD4ï¼ŒMD5ï¼ŒSHAç­‰</p>\n<h3 id=\"æ•°å­—ç­¾å\"><a href=\"#æ•°å­—ç­¾å\" class=\"headerlink\" title=\"æ•°å­—ç­¾å\"></a>æ•°å­—ç­¾å</h3><p>æ•°å­—ç­¾åï¼Œæ˜¯ä¸ºäº†ä¿è¯ä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ä½¿ç”¨hashç®—æ³•ç”Ÿæˆè¦å‘é€æ˜æ–‡çš„æ‘˜è¦ï¼Œç„¶å æŠŠæ˜æ–‡å’Œæ‘˜è¦éƒ½é€šè¿‡ç§é’¥åŠ å¯†ï¼ŒåŠ å¯†åçš„æ‘˜è¦ä½œä¸º<code>æ•°å­—ç­¾åï¼ˆdigital signatureï¼‰</code>è·ŸåŠ å¯†åçš„å†…å®¹ä¸€èµ·å‘é€ç»™æ¥å—è€…ã€‚æ¥å—è€…æ”¶åˆ°æ•°æ®ä¿¡æ¯åï¼Œä½¿ç”¨å…¬é’¥åˆ†åˆ«å¯¹å†…å®¹å’Œä¿¡æ¯è§£å¯†ï¼Œå¾—åˆ°æ•°æ®å’Œå†…å®¹æ‘˜è¦ï¼Œç„¶åç”¨ä¸€æ ·çš„ç®—æ³•å¯¹å†…å®¹ç”Ÿæˆæ‘˜è¦ï¼Œæ¯”è¾ƒæ‘˜è¦æ˜¯å¦ç›¸åŒæ¥ç¡®è®¤ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚</p>\n<h3 id=\"æ•°å­—è¯ä¹¦\"><a href=\"#æ•°å­—è¯ä¹¦\" class=\"headerlink\" title=\"æ•°å­—è¯ä¹¦\"></a>æ•°å­—è¯ä¹¦</h3><p>ä»¥ä¸Šçš„æµç¨‹è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæœ‰äººå†’å……é€šä¿¡äººå‘æ”¾å…¬é’¥ã€‚è¿™ç§åœºæ™¯çš„å‡ºç°ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸ªå…¬è¯äººäº†ï¼Œå‘Šè¯‰æˆ‘ä»¬åˆ°åº•æœ‰æ˜¯çœŸçš„æ³¨å†Œç™»è®°è¿‡çš„ã€‚è¿™ä¸ªå…¬è¯äººå°±æ˜¯è¯ä¹¦ä¸­å¿ƒï¼ˆcertificate authorityï¼‰ç®€ç§°CAã€‚<br>æ‰€æœ‰æƒ³å‘æ”¾å…¬é’¥çš„äººï¼Œéƒ½éœ€è¦å»CAä¸ºè‡ªå·±çš„å…¬é’¥åšè®¤è¯ã€‚è¯ä¹¦ä¸­å¿ƒä¼šç”¨è‡ªå·±ç§é’¥å’Œå…¬é’¥ä»¥åŠå…¬é’¥äººä¿¡æ¯ä¸€èµ·è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„ä¸œè¥¿å°±å«æ•°å­—è¯ä¹¦ã€‚ä»¥åæ‰€æœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œéƒ½æ˜¯ç»Ÿä¸€ç”¨CAçš„å…¬é’¥è§£å¼€æ•°å­—è¯ä¹¦ï¼Œæ‹¿åˆ°é€šä¿¡ç”¨çš„å…¬é’¥ï¼Œç„¶åè¯æ˜æ•°å­—ç­¾åç¡®å®æ˜¯æ¥è‡ªå“ªé‡Œçš„äº†ã€‚</p>\n<p>å…³äºæ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« è®²çš„ç‰¹åˆ«ç”ŸåŠ¨<a href=\"http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html\" target=\"_blank\" rel=\"noopener\">blog</a></p>\n<h2 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h2><p>wikiä¸Šå¯¹SSHçš„å®šä¹‰:</p>\n<blockquote>\n<p>Secure Shellï¼ˆç¼©å†™ä¸ºSSHï¼‰ï¼Œç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼›SSHä¸ºä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºä¸Šçš„Shellï¼ˆå£³å±‚ï¼‰æä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚<br>ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼Œå¦‚rshã€FTPã€POPå’ŒTelnetå…¶æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼›å› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€æ•°æ®ã€ç”¨æˆ·å¸å·å’Œç”¨æˆ·å£ä»¤ï¼Œå¾ˆå®¹æ˜“å—åˆ°ä¸­é—´äººï¼ˆman-in-the-middleï¼‰æ”»å‡»æ–¹å¼çš„æ”»å‡»ã€‚å°±æ˜¯å­˜åœ¨å¦ä¸€ä¸ª&gt;äººæˆ–è€…ä¸€å°æœºå™¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨æ¥æ”¶ç”¨æˆ·ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶åå†å†’å……ç”¨æˆ·æŠŠæ•°æ®ä¼ ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚<br>è€ŒSSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚é€šè¿‡SSHå¯ä»¥å¯¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSæ¬ºéª—å’ŒIPæ¬ºéª—ã€‚<br>SSHä¹‹å¦ä¸€é¡¹ä¼˜ç‚¹ä¸ºå…¶ä¼ è¾“çš„æ•°æ®å¯ä»¥æ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚SSHæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå®ƒæ—¢å¯ä»¥ä»£æ›¿Telnetï¼Œåˆå¯ä»¥ä¸ºFTPã€POPã€ç”šè‡³ä¸ºPPPæä¾›ä¸€ä¸ªå®‰å…¨çš„â€œé€šé“â€ã€‚</p>\n</blockquote>\n<p>çœ‹äº†ä»¥åæ˜¾ç„¶æ›´æ™•äº†ï¼Œæ³¨æ„ä¸€ä¸‹ä»–æ˜¯ä¸€ä¸ª<code>SHELL</code>, å¯ä»¥ç†è§£ä¸º SSH æœåŠ¡å™¨ä¹‹é—´å®‰å…¨é€šä¿¡çš„ä¸€ä¸ªåè®®ï¼Œæ—¢ç„¶ç§°ä¹‹ä¸ºå®‰å…¨çš„ï¼Œæƒ³å¿…æ˜¯é€šä¿¡è¿‡ç¨‹ä½¿ç”¨äº†åŠ å¯†æ‰‹æ®µã€‚<br>è¿™æ—¶å€™å°±ç”¨ä¸Šäº†æˆ‘ä»¬ä¸Šä¸€èŠ‚çš„çŸ¥è¯†äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¦åœ¨æœåŠ¡å™¨ä¹‹å‰å°±è¡Œå®‰å…¨çš„é€šä¿¡ï¼š</p>\n<ol>\n<li>Aã€Bä¹‹é—´å»ºç«‹TCPè¿æ¥</li>\n<li>Bç”Ÿæˆä¸€å¯¹å…¬ç§å¯†é’¥</li>\n<li>BæŠŠå…¬é’¥å‘é€ç»™A</li>\n<li>Aç”Ÿæˆä¸€ä¸ªç”¨äºåŠ å¯†æ•°æ®çš„å¯†é’¥Kï¼ˆæ—¢æˆ‘ä»¬æƒ³é€šçŸ¥ç»™å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œä¹‹åçš„æ•°æ®é€šä¿¡éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†ï¼Œè¿™ä¸ªå¯†é’¥ä¸å¯è®©ç¬¬ä¸‰æ–¹çŸ¥é“ï¼‰</li>\n<li>AæŠŠKç”¨å…¬é’¥åŠ å¯†å‘é€ç»™Bï¼ŒBè§£å¯†åï¼Œä»æ­¤Aã€Bä¹‹é—´çš„é€šä¿¡æ•°æ®éƒ½ç”¨Kå¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼ˆè½¬ä¸ºäº†å®‰å…¨çš„å¯¹ç§°åŠ å¯†æ–¹å¼ï¼‰ã€‚</li>\n</ol>\n<p>è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯ä¼šæœ‰ä¸€æ ·çš„é—®é¢˜ï¼ŒåŠ å…¥ä¸­é—´æœ‰Cã€Dï¼Œå‡å†’Bå‘æ”¾å…¬é’¥ç»™Aï¼Œå¤¹åœ¨äº†Aå’ŒBä¹‹é—´ï¼Œä¸æ˜¯åˆä¸å®‰å…¨äº†å—ã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜SSHåè®®é‡‡ç”¨ç”±äººå·¥åˆ¤æ–­å…¬é’¥çš„fingerprintæ˜¯å¦å¯ä¿¡çš„æ–¹å¼ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The authenticity of host <span class=\"string\">'172.20.7.211 (&lt;no hostip for proxy command&gt;)'</span> can<span class=\"string\">'t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is 23:42:c1:e4:3f:d2:cc:37:1d:89:cb:e7:5d:be:5d:53.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)?</span></span><br></pre></td></tr></table></figure>\n\n<p>è¾“å…¥yesä¹‹åæ‰ä¼šè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿™ä¸ªä¿¡æ¯ä¼šå­˜å‚¨åˆ°ç”¨æˆ·çš„.ssh/known_hostsæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å†ç™»å½•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥known_hostæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„å…¬é’¥ä¿¡æ¯ï¼Œå°±ä¸åœ¨æç¤ºç”¨æˆ·ç¡®è®¤äº†.ç›¸å½“äºä¸­é—´åŠ äº†ä¸€æ­¥äººå·¥éªŒè¯ï¼Œç¡®å®šä¸‹è¦è¿æ¥çš„æœºå™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯ä¸€èˆ¬ä¹Ÿç¡®å®æ˜¯çŸ¥é“è‡ªå·±è¦è¿è°çš„ã€‚<br>å½“ç„¶è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬éƒ½ç”¨è¿‡<code>ssh-keygen</code> å‘½ä»¤ï¼Œä»–å°±æ˜¯ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥+ç§é’¥ï¼‰ï¼Œç”¨äºæˆ‘ä»¬æ‰€è¯´çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\"><span class=\"comment\">#.ssh/</span></span><br><span class=\"line\">id_rsa.pub       //å…¬é’¥   </span><br><span class=\"line\">id_rsa           //å¯†é’¥</span><br></pre></td></tr></table></figure>\n\n<p>å°†id_rsa.pubçš„å†…å®¹å†™å…¥authorized_keysæ–‡ä»¶ä¸­ï¼Œè¡¨ç¤ºè¯¥æœºå™¨ç›®å‰æˆæƒçš„ä½¿ç”¨è¯¥å…¬é’¥è®¿é—®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·å°±å°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°authorized_keysä¸­äº†ï¼Œç„¶åéœ€è¦æ³¨æ„é…ç½®æƒé™äº†ï¼Œå¦åˆ™SSHä¸ä¼šå·¥ä½œï¼š</p>\n<ul>\n<li>å°†.sshç›®å½•çš„æƒé™ä¸º700</li>\n<li>å°†authorized_keysç›®å½•çš„æƒé™ä¸º600<br>æœ‰ä¸ª <code>ssh-copy-id</code> å·¥å…·å¾ˆå¥½ç”¨,ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å¤åˆ¶å…¬é’¥åˆ°å¯¹åº”æœåŠ¡å™¨ä¸‹çš„ authorized_keysã€‚<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id -i username@remote-server</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>ä¸€ä¸ªå®Œæ•´çš„SSHå®¢æˆ·ç«¯è®¤è¯æµç¨‹<br>ä¸€èˆ¬æˆ‘ä»¬èƒ½æ¥è§¦åˆ°çš„çš„è®¤è¯æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>\n<ul>\n<li>å¯†ç è®¤è¯</li>\n<li>å¯†é’¥è®¤è¯</li>\n</ul>\n<p>å¯†ç è®¤è¯å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ç™»å½•è¿œç¨‹linuxæœåŠ¡å™¨çš„æ—¶å€™æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚</p>\n<p>æ¯æ¬¡ç™»å½•éƒ½è¦è¾“å…¥å¯†ç å¾ˆéº»çƒ¦ï¼Œä¸”å¯†ç å¦‚æœç®€å•çš„è¯å¯èƒ½è¿˜ä¼šè¢«æš´åŠ›ç ´è§£ï¼Œè€Œä¸”å¾ˆå¤šè‡ªåŠ¨åŒ–åœºæ™¯è¦æ±‚æˆ‘ä»¬å®ç°å…å¯†ç™»å½•æœåŠ¡å™¨ã€‚å¯†é’¥è®¤è¯æä¾›äº†ä¸€ç§æ›´å®‰å…¨ä¾¿æ·çš„è®¤è¯å®¢æˆ·ç«¯çš„æ–¹å¼ã€‚è¿™ä¸ªæŠ€æœ¯ä¹Ÿç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œç”±å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§å¯†é’¥å¯¹ï¼Œç„¶åå°†å…¬é’¥ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚è®¤è¯çš„è¿‡ç¨‹å¤§ä½“å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªå…¬é’¥çš„è®¤è¯è¯·æ±‚ï¼Œå¹¶å‘é€RSA Keyçš„æ¨¡æ•°ä½œä¸ºæ ‡è¯†ç¬¦ã€‚</li>\n<li>æœåŠ¡ç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚å¸å·çš„å…¬é’¥ï¼ˆLinuxä¸­å­˜å‚¨åœ¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼‰ï¼Œä»¥åŠå…¶æ‹¥æœ‰çš„è®¿é—®æƒé™ã€‚</li>\n<li>æœåŠ¡ç«¯ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹ä¸€ä¸ªéšæœºçš„256ä½çš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯</li>\n<li>å®¢æˆ·ç«¯ä½¿ç”¨ç§é’¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£å¯†ï¼Œå¹¶å°†å…¶ç»“åˆsession idç”Ÿæˆä¸€ä¸ªMD5å€¼å‘é€ç»™æœåŠ¡ç«¯ã€‚</li>\n<li>æœåŠ¡ç«¯é‡‡ç”¨åŒæ ·çš„æ–¹å¼ç”ŸæˆMD5å€¼ä¸å®¢æˆ·ç«¯è¿”å›çš„MD5å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå®Œæˆå¯¹å®¢æˆ·ç«¯çš„è®¤è¯ã€‚</li>\n</ol>\n<p>ç–‘ç‚¹ï¼šè¿™ä¸ªæµç¨‹ç¡®å®æ˜¯ä¸€ä¸ªå®Œæ•´çš„éå¯¹ç§°åŠ å¯†å¤„ç†çš„è®¤è¯è¿‡ç¨‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨ä¸­æˆ‘å‘ç°å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œå› ä¸ºæˆ‘æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥åˆ äº†ï¼Œæˆ–è€…åªå¤åˆ¶ç§é’¥åˆ°ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ä¸Šï¼Œæœ€ç»ˆè¿˜æ˜¯å¯ä»¥ç™»å…¥authorized_keysä¸­é…ç½®äº†å¯¹åº”å…¬é’¥çš„æœåŠ¡å™¨ã€‚</p>\n<ul>\n<li>æ‰€ä»¥æˆ‘çŒœæµ‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡ç«¯è¿™è¾¹æ˜¯æŠŠauthorized_keysä¸­çš„é”è®©å®¢æˆ·ç«¯çš„é’¥åŒ™å¾ªç¯åŒ¹é…çš„ï¼Ÿèƒ½æ‰“å¼€å…¶ä¸­çš„ä¸€æŠŠé”å°±èƒ½ç™»å½•ï¼Œä½†æ˜¯è¿™æ ·keyå¤šçš„è¯ï¼Œå»ºç«‹è¿æ¥å°±ä¼šæœ‰æ•ˆç‡é—®é¢˜ã€‚</li>\n<li>å¦ä¸€ä¸ªçŒœæµ‹ï¼Œè¿™ä¸ªå‘é€çš„RSA_KEYçš„æ¨¡æ•°æ˜¯é€šè¿‡ç§é’¥å°±èƒ½äº§ç”Ÿçš„ï¼Œå°±æ˜¯è¯´é€šè¿‡ç§é’¥æœ‰åŠæ³•ç›´æ¥å¾—åˆ°å®ƒå¯¹åº”å…¬é’¥çš„æ ‡å¿—ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¹Ÿå°±ç”¨ä¸ç€ä¸“é—¨ä¿å­˜å…¬é’¥ï¼Œä¹Ÿä¸ç”¨ç›´æ¥å‘é€çš„å…¬é’¥è¿›è¡Œè®¤è¯ã€‚<br>ç›®å‰æˆ‘ä¹Ÿä¸ç¡®å®šä¸ºå•¥å®¢æˆ·ç«¯æ²¡å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œæœ€åä¹Ÿèƒ½ç™»å½•çš„çœŸæ­£åŸå› ã€‚</li>\n</ul>\n<h2 id=\"SSL\"><a href=\"#SSL\" class=\"headerlink\" title=\"SSL\"></a>SSL</h2><p>TLSï¼ˆTransport Layer Securityï¼šå®ƒç›¸å½“äºæ˜¯SSLåè®®çš„ä¸€ä¸ªåç»­ç‰ˆæœ¬ï¼Œä»–æ˜¯SSLç»è¿‡IETFæ ‡å‡†åŒ–ä¹‹åçš„äº§ç‰©ã€‚<br>ä¸Šé¢wikiä¸Šä¹Ÿæœ‰å†™ï¼ŒSSHå…¶å®æ˜¯ä¸“é—¨ä¸ºshellè®¾è®¡çš„ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå®äº†ä¸¤ä¸ªç½‘ç»œå±‚ï¼ˆä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼‰ã€‚é€šä¿—ç‚¹è®²å°±æ˜¯åªæœ‰SSHå®¢æˆ·ç«¯ï¼Œå’ŒSSHæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡æ‰èƒ½ä½¿ç”¨è¿™ä¸ªåè®®ï¼Œå…¶ä»–è½¯ä»¶æœåŠ¡æ— æ³•ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬éå¸¸éœ€è¦ä¸€ä¸ªé€šç”¨çš„ï¼Œå»ºç«‹åœ¨åº”ç”¨å±‚ä¹‹ä¸‹çš„ä¸€ä¸ªä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ç§å¯¹ä¸Šå±‚åº”ç”¨åè®®é€æ˜çš„ï¼Œä¸ç®¡æ˜¯HTTPã€FTPã€è¿˜æ˜¯ç”µå­é‚®ä»¶åè®®æˆ–å…¶ä»–ä»»ä½•åº”ç”¨å±‚åè®®éƒ½å¯ä»¥ä¾èµ–çš„åº•å±‚çš„å¯å®‰å…¨é€šä¿¡çš„ä¼ è¾“å±‚åè®®ã€‚SSLï¼ˆSecure Sockets Layerï¼‰åè®®å°±æ˜¯åœ¨æ­¤èƒŒæ™¯ä¸‹è¯ç”Ÿçš„ã€‚</p>\n<p>å¯¹äºä¸€ä¸ªé€šç”¨çš„åè®®æ¥è¯´ï¼Œç±»ä¼¼SSHä½¿ç”¨printfingeræ¥é˜²æ­¢ä¸­é—´äººæ”»å‡»ä¸ä¸€æ ·ï¼Œäº’è”ç½‘ä¸Šæ‰€æœ‰çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ˜¯ä¸å¯èƒ½è‡ªå·±åˆ¤æ–­å¯¹æ–¹æ˜¯ä¸æ˜¯å¯ä¿¡ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†æˆ‘ä»¬æ‰€è¯´çš„ <code>æ•°å­—è¯ä¹¦</code> çš„æ¦‚å¿µï¼Œåœ¨SSLä¸­å¼•å…¥äº†ä¸€ä¸ªå…¬è¯æœºå…³ï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ <code>CA</code>ã€‚æœ‰äº†æ•°å­—è¯ä¹¦ï¼Œæµè§ˆå™¨åœ¨å»ºç«‹SSLè¿æ¥ä¹‹å‰ï¼Œå¹¶ä¸åªæ˜¯ç®€å•è·å–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œè€Œä»æœåŠ¡å™¨è·å–æ•°å­—è¯ä¹¦ã€‚æœ‰äº†ä¿¡ä»»æœºåˆ¶ä¹‹åï¼Œå‰©ä¸‹çš„äº¤äº’è¿‡ç¨‹è¿˜æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹ã€‚<br><img src=\"http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092007.png\" alt><br><a href=\"http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\" target=\"_blank\" rel=\"noopener\">å›¾è§£SSL/TLSåè®®-é˜®ä¸€å³°</a></p>\n<h2 id=\"HTTPS\"><a href=\"#HTTPS\" class=\"headerlink\" title=\"HTTPS\"></a>HTTPS</h2><p>ä¸Šé¢çš„æ¦‚å¿µæ¸…æ™°äº†ä»¥åï¼Œç†è§£HTTPSå°±ç®€å•äº†ã€‚HTTPSçš„å…¨ç¨‹æ˜¯ Hypertext Transfer Protocol Secureï¼Œå°±æ˜¯ è¿è¡Œåœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTPåè®®ã€‚<br>åšä¸ºç½‘ç«™ç®¡ç†å‘˜ï¼Œå¯èƒ½ä¼šé‡åˆ°ç”³è¯·æ•°å­—è¯ä¹¦çš„ä»»åŠ¡ï¼Œç†è§£äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œç”³è¯·æ•°å­—è¯ä¹¦å°±ä¸é‚£ä¹ˆä¸€å¤´é›¾æ°´äº†ï¼Œé¦–å…ˆä½ è¦ä¸ºæœåŠ¡å™¨ç”Ÿæˆä¸€å¯¹å…¬å¸å¯†é’¥ï¼Œç„¶åæŠŠä½ ç½‘ç«™çš„ä¿¡æ¯è¿åŒä½ çš„å…¬é’¥ä¸€èµ·å‘é€ç»™æŸä¸ªæƒå¨çš„CAï¼ŒCAä¼šé€šè¿‡æŸç§æ–¹å¼è®¤è¯ç”³è¯·äººæ˜¯å¦çœŸçš„æ˜¯ç½‘ç«™çš„æ‰€æœ‰äººï¼Œæ¯”å¦‚è®©ä½ åœ¨ç½‘ç«™çš„æŒ‡å®šè·¯å¾„ä¸Šä¼ ä»–æŒ‡å®šçš„ç‰¹æ®ŠèšŠå­åºåˆ—ã€‚éªŒè¯é€šè¿‡å°±ä¼šå¾—åˆ°è¯ä¹¦äº†ã€‚</p>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•\" target=\"_blank\" rel=\"noopener\">https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•</a></li>\n<li><a href=\"https://www.jianshu.com/p/5e3f9dfd2cb4\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/5e3f9dfd2cb4</a></li>\n<li><a href=\"https://www.jianshu.com/p/b078282653b3\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/b078282653b3</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>ä¸€ç›´å¯¹ SSH ã€SSL ä»¥åŠ HTTPS å’Œå®ƒä»¬äº’ç›¸ä¹‹é—´çš„å…³ç³»éƒ½äº‘é‡Œé›¾é‡Œçš„ï¼Œä¸‹é¢å‚è€ƒç½‘ä¸Šçš„æ–‡ç« å’Œè‡ªå·±çš„ç†è§£æ¢³ç†ä¸€ä¸‹ï¼Œæ™•äº†å°±å†å›æ¥çœ‹ä¸€ä¸‹ï¼Œæ€»ä¼šè®°ä½çš„ã€‚</p>\n</blockquote>\n<h2 id=\"åŠ å¯†ç®—æ³•\"><a href=\"#åŠ å¯†ç®—æ³•\" class=\"headerlink\" title=\"åŠ å¯†ç®—æ³•\"></a>åŠ å¯†ç®—æ³•</h2><p>é¦–å…ˆå…ˆè¯´ä¸‹åŠ å¯†ç®—æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œ<code>å¯¹ç§°åŠ å¯†</code> å’Œ <code>éå¯¹ç§°åŠ å¯†</code>ã€‚</p>\n<h3 id=\"å¯¹ç§°åŠ å¯†\"><a href=\"#å¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"å¯¹ç§°åŠ å¯†\"></a>å¯¹ç§°åŠ å¯†</h3><p>é€šä¿¡åŒæ–¹çš„æ•°æ®éƒ½æ˜¯ç”¨åŒä¸€å¥—å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚<br>åœ¨1976å¹´ä»¥å‰ï¼Œæ‰€æœ‰çš„åŠ å¯†éƒ½é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¦‚ä½•ç®¡ç†ç§˜é’¥ï¼Ÿæ—¢è¦ä¿è¯ç§˜é’¥ä¸æ³„éœ²ï¼ŒåŒæ—¶è¿˜è¦ä¿è¯ç§˜é’¥çš„å…±äº«æ€§ã€‚</p>\n<h3 id=\"éå¯¹ç§°åŠ å¯†\"><a href=\"#éå¯¹ç§°åŠ å¯†\" class=\"headerlink\" title=\"éå¯¹ç§°åŠ å¯†\"></a>éå¯¹ç§°åŠ å¯†</h3><p>1976å¹´æœ‰ä¸¤ä½æ•°å­¦å®¶æå‡ºçš„ä¸€ä¸ªæ–°çš„åŠ å¯†æ¦‚å¿µï¼š</p>\n<ol>\n<li>Aç”Ÿæˆä¸€å¯¹ä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚</li>\n<li>Bè·å–Aç”Ÿæˆçš„å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥å¯¹ä¿¡æ¯åŠ å¯†ã€‚</li>\n<li>Aæ”¶åˆ°Bçš„åŠ å¯†ä¿¡æ¯åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</li>\n</ol>\n<p>éå¯¹ç§°åŠ å¯†å¼•å…¥äº†å…¬é’¥å’Œç§é’¥çš„æ¦‚å¿µã€‚å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚å…¬é’¥æ˜¯é¢å‘æ‰€æœ‰ä½¿ç”¨è€…å…¬å¼€çš„ã€‚<br>ç›®å‰è®¡ç®—æœºé¢†åŸŸä½¿ç”¨æœ€å¹¿æ³›çš„éå¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯<a href=\"https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95\" target=\"_blank\" rel=\"noopener\">RSA</a>ã€‚</p>\n<p>å¯¹ç§°åŠ å¯†çœ‹èµ·æ¥å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</p>\n<ul>\n<li>åŠ å¯†æ›´è€—æ—¶ï¼šç®—æ³•æ›´å¤æ‚ã€‚</li>\n<li>å®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»:å³å¦‚æœæœ‰Cå†’å……Aåˆ©ç”¨Açš„å…¬é’¥ç»™Bå‘æ¶ˆæ¯ï¼ŒBçš„æ‰€æœ‰æ¶ˆæ¯å¯¹Cå…¶å®å°±æ˜¯é€æ˜çš„äº†ã€‚</li>\n</ul>\n<p>é’ˆå¯¹ä¸­é—´äººæ”»å‡»ï¼Œä¸€èˆ¬å°±é‡‡ç”¨éå¯¹ç§°åŠ å¯†+æ‘˜è¦ç®—æ³•+æ•°å­—ç­¾åçš„æœºåˆ¶æ¥ç¡®ä¿ä¼ è¾“å®‰å…¨ã€‚</p>\n<h3 id=\"æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\"><a href=\"#æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\" class=\"headerlink\" title=\"æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰\"></a>æ‘˜è¦ç®—æ³•ï¼ˆhashç®—æ³•ï¼‰</h3><p>Hash ç®—æ³•çš„ç‰¹ç‚¹æ˜¯å•å‘ä¸å¯é€†ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡hashå¯¹ç›®å‰ä¿¡æ¯åŠ å¯†ç”Ÿæˆç‰¹å®šé•¿åº¦ä¸”å”¯ä¸€çš„hashå€¼ï¼Œè¯¥å€¼ä¹Ÿä¸èƒ½è¢«é€†å‘ç ´è¯‘ã€‚å› æ­¤hashç®—æ³•è¿›åœºç”¨åœ¨ä¸å¯è¿˜åŸçš„å¯†ç å­˜å‚¨ã€ä¿¡æ¯å®Œæ•´æ€§æ ¡éªŒç­‰é¢†åŸŸã€‚å¸¸è§çš„hashç®—æ³•ï¼šMD2ï¼ŒMD4ï¼ŒMD5ï¼ŒSHAç­‰</p>\n<h3 id=\"æ•°å­—ç­¾å\"><a href=\"#æ•°å­—ç­¾å\" class=\"headerlink\" title=\"æ•°å­—ç­¾å\"></a>æ•°å­—ç­¾å</h3><p>æ•°å­—ç­¾åï¼Œæ˜¯ä¸ºäº†ä¿è¯ä¿¡æ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚ä½¿ç”¨hashç®—æ³•ç”Ÿæˆè¦å‘é€æ˜æ–‡çš„æ‘˜è¦ï¼Œç„¶å æŠŠæ˜æ–‡å’Œæ‘˜è¦éƒ½é€šè¿‡ç§é’¥åŠ å¯†ï¼ŒåŠ å¯†åçš„æ‘˜è¦ä½œä¸º<code>æ•°å­—ç­¾åï¼ˆdigital signatureï¼‰</code>è·ŸåŠ å¯†åçš„å†…å®¹ä¸€èµ·å‘é€ç»™æ¥å—è€…ã€‚æ¥å—è€…æ”¶åˆ°æ•°æ®ä¿¡æ¯åï¼Œä½¿ç”¨å…¬é’¥åˆ†åˆ«å¯¹å†…å®¹å’Œä¿¡æ¯è§£å¯†ï¼Œå¾—åˆ°æ•°æ®å’Œå†…å®¹æ‘˜è¦ï¼Œç„¶åç”¨ä¸€æ ·çš„ç®—æ³•å¯¹å†…å®¹ç”Ÿæˆæ‘˜è¦ï¼Œæ¯”è¾ƒæ‘˜è¦æ˜¯å¦ç›¸åŒæ¥ç¡®è®¤ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚</p>\n<h3 id=\"æ•°å­—è¯ä¹¦\"><a href=\"#æ•°å­—è¯ä¹¦\" class=\"headerlink\" title=\"æ•°å­—è¯ä¹¦\"></a>æ•°å­—è¯ä¹¦</h3><p>ä»¥ä¸Šçš„æµç¨‹è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæœ‰äººå†’å……é€šä¿¡äººå‘æ”¾å…¬é’¥ã€‚è¿™ç§åœºæ™¯çš„å‡ºç°ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸ªå…¬è¯äººäº†ï¼Œå‘Šè¯‰æˆ‘ä»¬åˆ°åº•æœ‰æ˜¯çœŸçš„æ³¨å†Œç™»è®°è¿‡çš„ã€‚è¿™ä¸ªå…¬è¯äººå°±æ˜¯è¯ä¹¦ä¸­å¿ƒï¼ˆcertificate authorityï¼‰ç®€ç§°CAã€‚<br>æ‰€æœ‰æƒ³å‘æ”¾å…¬é’¥çš„äººï¼Œéƒ½éœ€è¦å»CAä¸ºè‡ªå·±çš„å…¬é’¥åšè®¤è¯ã€‚è¯ä¹¦ä¸­å¿ƒä¼šç”¨è‡ªå·±ç§é’¥å’Œå…¬é’¥ä»¥åŠå…¬é’¥äººä¿¡æ¯ä¸€èµ·è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„ä¸œè¥¿å°±å«æ•°å­—è¯ä¹¦ã€‚ä»¥åæ‰€æœ‰ç±»ä¼¼çš„åœºæ™¯ï¼Œéƒ½æ˜¯ç»Ÿä¸€ç”¨CAçš„å…¬é’¥è§£å¼€æ•°å­—è¯ä¹¦ï¼Œæ‹¿åˆ°é€šä¿¡ç”¨çš„å…¬é’¥ï¼Œç„¶åè¯æ˜æ•°å­—ç­¾åç¡®å®æ˜¯æ¥è‡ªå“ªé‡Œçš„äº†ã€‚</p>\n<p>å…³äºæ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ï¼Œé˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« è®²çš„ç‰¹åˆ«ç”ŸåŠ¨<a href=\"http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html\" target=\"_blank\" rel=\"noopener\">blog</a></p>\n<h2 id=\"SSH\"><a href=\"#SSH\" class=\"headerlink\" title=\"SSH\"></a>SSH</h2><p>wikiä¸Šå¯¹SSHçš„å®šä¹‰:</p>\n<blockquote>\n<p>Secure Shellï¼ˆç¼©å†™ä¸ºSSHï¼‰ï¼Œç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼›SSHä¸ºä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºä¸Šçš„Shellï¼ˆå£³å±‚ï¼‰æä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚<br>ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼Œå¦‚rshã€FTPã€POPå’ŒTelnetå…¶æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼›å› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€æ•°æ®ã€ç”¨æˆ·å¸å·å’Œç”¨æˆ·å£ä»¤ï¼Œå¾ˆå®¹æ˜“å—åˆ°ä¸­é—´äººï¼ˆman-in-the-middleï¼‰æ”»å‡»æ–¹å¼çš„æ”»å‡»ã€‚å°±æ˜¯å­˜åœ¨å¦ä¸€ä¸ª&gt;äººæˆ–è€…ä¸€å°æœºå™¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨æ¥æ”¶ç”¨æˆ·ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶åå†å†’å……ç”¨æˆ·æŠŠæ•°æ®ä¼ ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚<br>è€ŒSSHæ˜¯ç›®å‰è¾ƒå¯é ï¼Œä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®®ã€‚åˆ©ç”¨SSHåè®®å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿œç¨‹ç®¡ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚é€šè¿‡SSHå¯ä»¥å¯¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSæ¬ºéª—å’ŒIPæ¬ºéª—ã€‚<br>SSHä¹‹å¦ä¸€é¡¹ä¼˜ç‚¹ä¸ºå…¶ä¼ è¾“çš„æ•°æ®å¯ä»¥æ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚SSHæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå®ƒæ—¢å¯ä»¥ä»£æ›¿Telnetï¼Œåˆå¯ä»¥ä¸ºFTPã€POPã€ç”šè‡³ä¸ºPPPæä¾›ä¸€ä¸ªå®‰å…¨çš„â€œé€šé“â€ã€‚</p>\n</blockquote>\n<p>çœ‹äº†ä»¥åæ˜¾ç„¶æ›´æ™•äº†ï¼Œæ³¨æ„ä¸€ä¸‹ä»–æ˜¯ä¸€ä¸ª<code>SHELL</code>, å¯ä»¥ç†è§£ä¸º SSH æœåŠ¡å™¨ä¹‹é—´å®‰å…¨é€šä¿¡çš„ä¸€ä¸ªåè®®ï¼Œæ—¢ç„¶ç§°ä¹‹ä¸ºå®‰å…¨çš„ï¼Œæƒ³å¿…æ˜¯é€šä¿¡è¿‡ç¨‹ä½¿ç”¨äº†åŠ å¯†æ‰‹æ®µã€‚<br>è¿™æ—¶å€™å°±ç”¨ä¸Šäº†æˆ‘ä»¬ä¸Šä¸€èŠ‚çš„çŸ¥è¯†äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¦åœ¨æœåŠ¡å™¨ä¹‹å‰å°±è¡Œå®‰å…¨çš„é€šä¿¡ï¼š</p>\n<ol>\n<li>Aã€Bä¹‹é—´å»ºç«‹TCPè¿æ¥</li>\n<li>Bç”Ÿæˆä¸€å¯¹å…¬ç§å¯†é’¥</li>\n<li>BæŠŠå…¬é’¥å‘é€ç»™A</li>\n<li>Aç”Ÿæˆä¸€ä¸ªç”¨äºåŠ å¯†æ•°æ®çš„å¯†é’¥Kï¼ˆæ—¢æˆ‘ä»¬æƒ³é€šçŸ¥ç»™å®¢æˆ·ç«¯çš„å¯†é’¥ï¼Œä¹‹åçš„æ•°æ®é€šä¿¡éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥åŠ å¯†ï¼Œè¿™ä¸ªå¯†é’¥ä¸å¯è®©ç¬¬ä¸‰æ–¹çŸ¥é“ï¼‰</li>\n<li>AæŠŠKç”¨å…¬é’¥åŠ å¯†å‘é€ç»™Bï¼ŒBè§£å¯†åï¼Œä»æ­¤Aã€Bä¹‹é—´çš„é€šä¿¡æ•°æ®éƒ½ç”¨Kå¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼ˆè½¬ä¸ºäº†å®‰å…¨çš„å¯¹ç§°åŠ å¯†æ–¹å¼ï¼‰ã€‚</li>\n</ol>\n<p>è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯ä¼šæœ‰ä¸€æ ·çš„é—®é¢˜ï¼ŒåŠ å…¥ä¸­é—´æœ‰Cã€Dï¼Œå‡å†’Bå‘æ”¾å…¬é’¥ç»™Aï¼Œå¤¹åœ¨äº†Aå’ŒBä¹‹é—´ï¼Œä¸æ˜¯åˆä¸å®‰å…¨äº†å—ã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜SSHåè®®é‡‡ç”¨ç”±äººå·¥åˆ¤æ–­å…¬é’¥çš„fingerprintæ˜¯å¦å¯ä¿¡çš„æ–¹å¼ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The authenticity of host <span class=\"string\">'172.20.7.211 (&lt;no hostip for proxy command&gt;)'</span> can<span class=\"string\">'t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is 23:42:c1:e4:3f:d2:cc:37:1d:89:cb:e7:5d:be:5d:53.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)?</span></span><br></pre></td></tr></table></figure>\n\n<p>è¾“å…¥yesä¹‹åæ‰ä¼šè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿™ä¸ªä¿¡æ¯ä¼šå­˜å‚¨åˆ°ç”¨æˆ·çš„.ssh/known_hostsæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å†ç™»å½•çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥known_hostæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„å…¬é’¥ä¿¡æ¯ï¼Œå°±ä¸åœ¨æç¤ºç”¨æˆ·ç¡®è®¤äº†.ç›¸å½“äºä¸­é—´åŠ äº†ä¸€æ­¥äººå·¥éªŒè¯ï¼Œç¡®å®šä¸‹è¦è¿æ¥çš„æœºå™¨ï¼Œä½œä¸ºå®¢æˆ·ç«¯ä¸€èˆ¬ä¹Ÿç¡®å®æ˜¯çŸ¥é“è‡ªå·±è¦è¿è°çš„ã€‚<br>å½“ç„¶è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -o PubkeyAuthentication=yes  -o stricthostkeychecking=no</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬éƒ½ç”¨è¿‡<code>ssh-keygen</code> å‘½ä»¤ï¼Œä»–å°±æ˜¯ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ˆå…¬é’¥+ç§é’¥ï¼‰ï¼Œç”¨äºæˆ‘ä»¬æ‰€è¯´çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\"><span class=\"comment\">#.ssh/</span></span><br><span class=\"line\">id_rsa.pub       //å…¬é’¥   </span><br><span class=\"line\">id_rsa           //å¯†é’¥</span><br></pre></td></tr></table></figure>\n\n<p>å°†id_rsa.pubçš„å†…å®¹å†™å…¥authorized_keysæ–‡ä»¶ä¸­ï¼Œè¡¨ç¤ºè¯¥æœºå™¨ç›®å‰æˆæƒçš„ä½¿ç”¨è¯¥å…¬é’¥è®¿é—®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ ·å°±å°†å…¬é’¥å†…å®¹è¿½åŠ åˆ°authorized_keysä¸­äº†ï¼Œç„¶åéœ€è¦æ³¨æ„é…ç½®æƒé™äº†ï¼Œå¦åˆ™SSHä¸ä¼šå·¥ä½œï¼š</p>\n<ul>\n<li>å°†.sshç›®å½•çš„æƒé™ä¸º700</li>\n<li>å°†authorized_keysç›®å½•çš„æƒé™ä¸º600<br>æœ‰ä¸ª <code>ssh-copy-id</code> å·¥å…·å¾ˆå¥½ç”¨,ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å¤åˆ¶å…¬é’¥åˆ°å¯¹åº”æœåŠ¡å™¨ä¸‹çš„ authorized_keysã€‚<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id -i username@remote-server</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p>ä¸€ä¸ªå®Œæ•´çš„SSHå®¢æˆ·ç«¯è®¤è¯æµç¨‹<br>ä¸€èˆ¬æˆ‘ä»¬èƒ½æ¥è§¦åˆ°çš„çš„è®¤è¯æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>\n<ul>\n<li>å¯†ç è®¤è¯</li>\n<li>å¯†é’¥è®¤è¯</li>\n</ul>\n<p>å¯†ç è®¤è¯å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨ç™»å½•è¿œç¨‹linuxæœåŠ¡å™¨çš„æ—¶å€™æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚</p>\n<p>æ¯æ¬¡ç™»å½•éƒ½è¦è¾“å…¥å¯†ç å¾ˆéº»çƒ¦ï¼Œä¸”å¯†ç å¦‚æœç®€å•çš„è¯å¯èƒ½è¿˜ä¼šè¢«æš´åŠ›ç ´è§£ï¼Œè€Œä¸”å¾ˆå¤šè‡ªåŠ¨åŒ–åœºæ™¯è¦æ±‚æˆ‘ä»¬å®ç°å…å¯†ç™»å½•æœåŠ¡å™¨ã€‚å¯†é’¥è®¤è¯æä¾›äº†ä¸€ç§æ›´å®‰å…¨ä¾¿æ·çš„è®¤è¯å®¢æˆ·ç«¯çš„æ–¹å¼ã€‚è¿™ä¸ªæŠ€æœ¯ä¹Ÿç”¨åˆ°äº†éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œç”±å®¢æˆ·ç«¯ç”Ÿæˆå…¬ç§å¯†é’¥å¯¹ï¼Œç„¶åå°†å…¬é’¥ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚è®¤è¯çš„è¿‡ç¨‹å¤§ä½“å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªå…¬é’¥çš„è®¤è¯è¯·æ±‚ï¼Œå¹¶å‘é€RSA Keyçš„æ¨¡æ•°ä½œä¸ºæ ‡è¯†ç¬¦ã€‚</li>\n<li>æœåŠ¡ç«¯æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚å¸å·çš„å…¬é’¥ï¼ˆLinuxä¸­å­˜å‚¨åœ¨~/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼‰ï¼Œä»¥åŠå…¶æ‹¥æœ‰çš„è®¿é—®æƒé™ã€‚</li>\n<li>æœåŠ¡ç«¯ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹ä¸€ä¸ªéšæœºçš„256ä½çš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å‘é€ç»™å®¢æˆ·ç«¯</li>\n<li>å®¢æˆ·ç«¯ä½¿ç”¨ç§é’¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£å¯†ï¼Œå¹¶å°†å…¶ç»“åˆsession idç”Ÿæˆä¸€ä¸ªMD5å€¼å‘é€ç»™æœåŠ¡ç«¯ã€‚</li>\n<li>æœåŠ¡ç«¯é‡‡ç”¨åŒæ ·çš„æ–¹å¼ç”ŸæˆMD5å€¼ä¸å®¢æˆ·ç«¯è¿”å›çš„MD5å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå®Œæˆå¯¹å®¢æˆ·ç«¯çš„è®¤è¯ã€‚</li>\n</ol>\n<p>ç–‘ç‚¹ï¼šè¿™ä¸ªæµç¨‹ç¡®å®æ˜¯ä¸€ä¸ªå®Œæ•´çš„éå¯¹ç§°åŠ å¯†å¤„ç†çš„è®¤è¯è¿‡ç¨‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨ä¸­æˆ‘å‘ç°å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œå› ä¸ºæˆ‘æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥åˆ äº†ï¼Œæˆ–è€…åªå¤åˆ¶ç§é’¥åˆ°ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ä¸Šï¼Œæœ€ç»ˆè¿˜æ˜¯å¯ä»¥ç™»å…¥authorized_keysä¸­é…ç½®äº†å¯¹åº”å…¬é’¥çš„æœåŠ¡å™¨ã€‚</p>\n<ul>\n<li>æ‰€ä»¥æˆ‘çŒœæµ‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼ŒæœåŠ¡ç«¯è¿™è¾¹æ˜¯æŠŠauthorized_keysä¸­çš„é”è®©å®¢æˆ·ç«¯çš„é’¥åŒ™å¾ªç¯åŒ¹é…çš„ï¼Ÿèƒ½æ‰“å¼€å…¶ä¸­çš„ä¸€æŠŠé”å°±èƒ½ç™»å½•ï¼Œä½†æ˜¯è¿™æ ·keyå¤šçš„è¯ï¼Œå»ºç«‹è¿æ¥å°±ä¼šæœ‰æ•ˆç‡é—®é¢˜ã€‚</li>\n<li>å¦ä¸€ä¸ªçŒœæµ‹ï¼Œè¿™ä¸ªå‘é€çš„RSA_KEYçš„æ¨¡æ•°æ˜¯é€šè¿‡ç§é’¥å°±èƒ½äº§ç”Ÿçš„ï¼Œå°±æ˜¯è¯´é€šè¿‡ç§é’¥æœ‰åŠæ³•ç›´æ¥å¾—åˆ°å®ƒå¯¹åº”å…¬é’¥çš„æ ‡å¿—ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¹Ÿå°±ç”¨ä¸ç€ä¸“é—¨ä¿å­˜å…¬é’¥ï¼Œä¹Ÿä¸ç”¨ç›´æ¥å‘é€çš„å…¬é’¥è¿›è¡Œè®¤è¯ã€‚<br>ç›®å‰æˆ‘ä¹Ÿä¸ç¡®å®šä¸ºå•¥å®¢æˆ·ç«¯æ²¡å‘é€è‡ªå·±çš„å…¬é’¥ï¼Œæœ€åä¹Ÿèƒ½ç™»å½•çš„çœŸæ­£åŸå› ã€‚</li>\n</ul>\n<h2 id=\"SSL\"><a href=\"#SSL\" class=\"headerlink\" title=\"SSL\"></a>SSL</h2><p>TLSï¼ˆTransport Layer Securityï¼šå®ƒç›¸å½“äºæ˜¯SSLåè®®çš„ä¸€ä¸ªåç»­ç‰ˆæœ¬ï¼Œä»–æ˜¯SSLç»è¿‡IETFæ ‡å‡†åŒ–ä¹‹åçš„äº§ç‰©ã€‚<br>ä¸Šé¢wikiä¸Šä¹Ÿæœ‰å†™ï¼ŒSSHå…¶å®æ˜¯ä¸“é—¨ä¸ºshellè®¾è®¡çš„ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒå®äº†ä¸¤ä¸ªç½‘ç»œå±‚ï¼ˆä¼ è¾“å±‚å’Œåº”ç”¨å±‚ï¼‰ã€‚é€šä¿—ç‚¹è®²å°±æ˜¯åªæœ‰SSHå®¢æˆ·ç«¯ï¼Œå’ŒSSHæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡æ‰èƒ½ä½¿ç”¨è¿™ä¸ªåè®®ï¼Œå…¶ä»–è½¯ä»¶æœåŠ¡æ— æ³•ä½¿ç”¨å®ƒã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬éå¸¸éœ€è¦ä¸€ä¸ªé€šç”¨çš„ï¼Œå»ºç«‹åœ¨åº”ç”¨å±‚ä¹‹ä¸‹çš„ä¸€ä¸ªä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œå®ƒçš„ç›®æ ‡æ˜¯å»ºç«‹ä¸€ç§å¯¹ä¸Šå±‚åº”ç”¨åè®®é€æ˜çš„ï¼Œä¸ç®¡æ˜¯HTTPã€FTPã€è¿˜æ˜¯ç”µå­é‚®ä»¶åè®®æˆ–å…¶ä»–ä»»ä½•åº”ç”¨å±‚åè®®éƒ½å¯ä»¥ä¾èµ–çš„åº•å±‚çš„å¯å®‰å…¨é€šä¿¡çš„ä¼ è¾“å±‚åè®®ã€‚SSLï¼ˆSecure Sockets Layerï¼‰åè®®å°±æ˜¯åœ¨æ­¤èƒŒæ™¯ä¸‹è¯ç”Ÿçš„ã€‚</p>\n<p>å¯¹äºä¸€ä¸ªé€šç”¨çš„åè®®æ¥è¯´ï¼Œç±»ä¼¼SSHä½¿ç”¨printfingeræ¥é˜²æ­¢ä¸­é—´äººæ”»å‡»ä¸ä¸€æ ·ï¼Œäº’è”ç½‘ä¸Šæ‰€æœ‰çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ˜¯ä¸å¯èƒ½è‡ªå·±åˆ¤æ–­å¯¹æ–¹æ˜¯ä¸æ˜¯å¯ä¿¡ã€‚è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†æˆ‘ä»¬æ‰€è¯´çš„ <code>æ•°å­—è¯ä¹¦</code> çš„æ¦‚å¿µï¼Œåœ¨SSLä¸­å¼•å…¥äº†ä¸€ä¸ªå…¬è¯æœºå…³ï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ <code>CA</code>ã€‚æœ‰äº†æ•°å­—è¯ä¹¦ï¼Œæµè§ˆå™¨åœ¨å»ºç«‹SSLè¿æ¥ä¹‹å‰ï¼Œå¹¶ä¸åªæ˜¯ç®€å•è·å–æœåŠ¡å™¨çš„å…¬é’¥ï¼Œè€Œä»æœåŠ¡å™¨è·å–æ•°å­—è¯ä¹¦ã€‚æœ‰äº†ä¿¡ä»»æœºåˆ¶ä¹‹åï¼Œå‰©ä¸‹çš„äº¤äº’è¿‡ç¨‹è¿˜æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„éå¯¹ç§°åŠ å¯†è¿‡ç¨‹ã€‚<br><img src=\"http://www.ruanyifeng.com/blogimg/asset/2014/bg2014092007.png\" alt><br><a href=\"http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\" target=\"_blank\" rel=\"noopener\">å›¾è§£SSL/TLSåè®®-é˜®ä¸€å³°</a></p>\n<h2 id=\"HTTPS\"><a href=\"#HTTPS\" class=\"headerlink\" title=\"HTTPS\"></a>HTTPS</h2><p>ä¸Šé¢çš„æ¦‚å¿µæ¸…æ™°äº†ä»¥åï¼Œç†è§£HTTPSå°±ç®€å•äº†ã€‚HTTPSçš„å…¨ç¨‹æ˜¯ Hypertext Transfer Protocol Secureï¼Œå°±æ˜¯ è¿è¡Œåœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTPåè®®ã€‚<br>åšä¸ºç½‘ç«™ç®¡ç†å‘˜ï¼Œå¯èƒ½ä¼šé‡åˆ°ç”³è¯·æ•°å­—è¯ä¹¦çš„ä»»åŠ¡ï¼Œç†è§£äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œç”³è¯·æ•°å­—è¯ä¹¦å°±ä¸é‚£ä¹ˆä¸€å¤´é›¾æ°´äº†ï¼Œé¦–å…ˆä½ è¦ä¸ºæœåŠ¡å™¨ç”Ÿæˆä¸€å¯¹å…¬å¸å¯†é’¥ï¼Œç„¶åæŠŠä½ ç½‘ç«™çš„ä¿¡æ¯è¿åŒä½ çš„å…¬é’¥ä¸€èµ·å‘é€ç»™æŸä¸ªæƒå¨çš„CAï¼ŒCAä¼šé€šè¿‡æŸç§æ–¹å¼è®¤è¯ç”³è¯·äººæ˜¯å¦çœŸçš„æ˜¯ç½‘ç«™çš„æ‰€æœ‰äººï¼Œæ¯”å¦‚è®©ä½ åœ¨ç½‘ç«™çš„æŒ‡å®šè·¯å¾„ä¸Šä¼ ä»–æŒ‡å®šçš„ç‰¹æ®ŠèšŠå­åºåˆ—ã€‚éªŒè¯é€šè¿‡å°±ä¼šå¾—åˆ°è¯ä¹¦äº†ã€‚</p>\n<h2 id=\"å‚è€ƒæ–‡çŒ®\"><a href=\"#å‚è€ƒæ–‡çŒ®\" class=\"headerlink\" title=\"å‚è€ƒæ–‡çŒ®\"></a>å‚è€ƒæ–‡çŒ®</h2><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html</a></li>\n<li><a href=\"https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•\" target=\"_blank\" rel=\"noopener\">https://zh.wikipedia.org/wiki/RSAåŠ å¯†æ¼”ç®—æ³•</a></li>\n<li><a href=\"https://www.jianshu.com/p/5e3f9dfd2cb4\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/5e3f9dfd2cb4</a></li>\n<li><a href=\"https://www.jianshu.com/p/b078282653b3\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/b078282653b3</a></li>\n</ul>\n"},{"title":"Nginx é…ç½® SSL","date":"2019-08-31T02:35:31.000Z","_content":"\n> åŸŸåè²Œä¼¼å¤‡æ¡ˆæˆåŠŸäº†ï¼Œè§£æåˆ°è…¾è®¯äº‘æœåŠ¡å™¨ipåï¼Œå‘ç°ç›´æ¥è®¿é—® httpåè®® æ˜¯å¯ä»¥çš„ æ¢æˆ https ä¸è¡Œäº†ã€‚åº”è¯¥æ˜¯æ²¡æœ‰é…ç½®SSLå¯¼è‡´çš„ã€‚\n\n## ä»€ä¹ˆæ˜¯HTTPS\nhttps å…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼Œæ˜¯httpçš„å®‰å…¨ç‰ˆã€‚å³httpä¸‹åŠ å…¥SSLåè®®å±‚ï¼Œå› æ­¤httpsçš„å®‰å…¨åŸºç¡€å°±æ˜¯SSLï¼Œæ‰€ä»¥åŠ å¯†å†…å®¹éœ€è¦SSLã€‚\n\n## SSLåŸç†\n- æµè§ˆå™¨å‘é€ä¸€ä¸ªhttpsçš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼›\n- æœåŠ¡å™¨è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ï¼ŒåŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢ï¼Œè¿™å¥—è¯ä¹¦å…¶å®å°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼›\n- æœåŠ¡å™¨ä¼šæŠŠå…¬é’¥ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›\n- å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ”¶åˆ°å…¬é’¥åï¼Œä¼šéªŒè¯å…¶æ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Œæ— æ•ˆä¼šæœ‰è­¦å‘Šæé†’ï¼Œæœ‰æ•ˆåˆ™ä¼šç”Ÿæˆä¸€ä¸²éšæœºæ•°ï¼Œå¹¶ç”¨æ”¶åˆ°çš„å…¬é’¥åŠ å¯†ï¼›\n- å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„éšæœºå­—ç¬¦ä¸²ä¼ è¾“ç»™æœåŠ¡å™¨ï¼›\n- æœåŠ¡å™¨æ”¶åˆ°åŠ å¯†éšæœºå­—ç¬¦ä¸²åï¼Œå…ˆç”¨ç§é’¥è§£å¯†ï¼ˆå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼‰ï¼Œè·å–åˆ°è¿™ä¸€ä¸²éšæœºæ•°åï¼Œå†ç”¨è¿™ä¸²éšæœºå­—ç¬¦ä¸²åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼ˆè¯¥åŠ å¯†ä¸ºå¯¹ç§°åŠ å¯†ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯å°†æ•°æ®å’Œç§é’¥ä¹Ÿå°±æ˜¯è¿™ä¸ªéšæœºå­—ç¬¦ä¸²>é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éçŸ¥é“ç§é’¥ï¼Œå¦åˆ™æ— æ³•è·å–æ•°æ®å†…å®¹ï¼‰ï¼›\n- æœåŠ¡å™¨æŠŠåŠ å¯†åçš„æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›\n- å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥ä¹Ÿå°±æ˜¯é‚£ä¸ªéšæœºå­—ç¬¦ä¸²è§£å¯†ï¼›\n\n## é…ç½® with-http_ssl_module æ¨¡å—\né¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªè¯ä¹¦ï¼Œå¯ä»¥ç”³è¯·ä¸€ä¸ªå…è´¹çš„ã€‚\nå‚è€ƒä¸‹é¢çš„ `å…¶ä»–æ–¹å¼` éƒ¨åˆ†å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å‚å•†å¯è§†åŒ–ç•Œé¢ç”³è¯·å¹¶ä¸‹è½½~\nç„¶åä¼šå¾—åˆ°nginxç‰ˆæœ¬è¯ä¹¦ï¼Œä¸€ä¸ªå…¬é’¥ï¼ˆè¯ä¹¦ï¼‰ï¼Œä¸€ä¸ªç§é’¥ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚\n\nå…ˆç¡®è®¤`nginx`å®‰è£…æ—¶å·²ç¼–è¯‘`http_ssl`æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ`nginx -V`å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ `--with-http_ssl_module`ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘nginxå°†è¯¥æ¨¡å—åŠ å…¥ã€‚\nè‹¥æœ‰çš„è¯æ­¤æ­¥éª¤è·³è¿‡\nè‹¥sslæ¨¡å—æ²¡æœ‰å…ˆç¼–è¯‘ä¸€ä¸‹\n\n```bash\ncd /usr/local/src/nginx-1.12.1/  #nginxç‰ˆæœ¬å·å¯èƒ½ä¸åŒå“Ÿ\n\n./configure --help | grep -i ssl\n  --with-http_ssl_module \n  \n./configure --prefix=/usr/local/nginx --with-http_ssl_module\n\n```\n\n## ç”Ÿæˆ ssl ç§˜é’¥å¯¹\n```bash\ncd /usr/local/nginx/conf\n\nyum install -y openssl\n```\n\n### ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\n```bash\nopenssl genrsa -des3 -out tmp.key 2048\n# ç”Ÿæˆä¸€ä¸ªrsaç±»å‹çš„å¯†é’¥ï¼Œä¸”é•¿åº¦ä¸º2048ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰å‘ç°ï¼Œè®©æˆ‘ä»¬è®¾ç½®å¯†ç ï¼Œå¦‚æœæ¯æ¬¡æœ‰äººè®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œéƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œå¤ªéº»çƒ¦äº†\n```\næ‰€ä»¥æˆ‘ä»¬è¦è½¬æ¢ç§é’¥ï¼Œå–æ¶ˆå¯†ç ï¼ˆå…¶å®tmp.keyä¸zhdy.keyå¯†é’¥å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæœ‰å¯†ç ä¸€ä¸ªæ²¡æœ‰ï¼‰ï¼š\n```bash\nopenssl rsa -in tmp.key -out zhdy.key \n\nrm -f tmp.key\n```\n### åˆ›å»ºè¯ä¹¦ç”³è¯·\n```\nopenssl req -new -key zhdy.key -out zhdy.csr\n```\n\n### åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\n```bash\nopenssl x509 -req -days 365 -in zhdy.csr -signkey zhdy.key -out zhdy.crt\n```\n\n## Nginx é…ç½® ssl\n```bash\nserver\n{\n    listen 443;\n    server_name huguobo.site; # æ¢æˆä½ è‡ªå·±çš„åŸŸåæœåŠ¡å“Ÿ\n    index index.html index.php;\n    root /path/to/your/file \n    ssl on;\n    ssl_certificate zhdy.crt;\n    ssl_certificate_key zhdy.key;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n}\n\n# ssl on; ä»£è¡¨ç€æ‰“å¼€ssl\n#ssl_certificate zhdy.crt; å…¬é’¥\n# ssl_certificate_key zhdy.key; ç§é’¥\n# ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ä¸‰ç§ä¸åŒçš„åè®®\n```\n\n## æµ‹è¯•\n```bash\nnginx -t\nnginx restart\n```\n\nç”±äºå·²ç»è®¾ç½®äº†443ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨curl -x æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚\næˆ‘ä»¬ä¿®æ”¹ä¸‹/etc/hostsä¸º: `yourip www.aaa.com`\n\n```bash\ncurl https://haha.com\n```\næŠ¥é”™æ˜¾ç¤ºä¸ºâ€œæ­¤è¯ä¹¦éå®‰å…¨è¯ä¹¦â€ï¼Œä½†æ˜¯sslæ˜¯å·²ç»æˆåŠŸé…ç½®äº†\n\n## å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\nåæ¥å‘ç°å„ä¸ªå‚å•†ä¹Ÿæä¾›ç”³è¯·è¯ä¹¦çš„å…¥å£ï¼Œä¹Ÿæä¾› DNS å’Œ æ–‡ä»¶éªŒè¯ä¸¤ç§é…ç½®,å¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œå‚è€ƒé…ç½®\n[è…¾è®¯äº‘sslæ§åˆ¶å°](https://console.cloud.tencent.com/ssl)\n[nginxé…ç½®æ–‡æ¡£](https://cloud.tencent.com/document/product/400/35244)\n\nè¿™ç§ä»ä¾›åº”å•†å¤„å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°è¯ä¹¦ï¼Œç„¶ånginxçš„é…ç½®ç§˜é’¥å’Œè¯ä¹¦éƒ½åœ¨ nginx æ–‡ä»¶å¤¹ä¸‹\n\nä»å®¢æˆ·ç«¯ä¼ é€æ–‡ä»¶åˆ°äº‘ä¸»æœºï¼ˆMACï¼‰\n```bash\nscp  ./2_huguobo.site.key ./1_huguobo.site_bundle.crt  root@118.24.215.220:/usr/local/nginx/conf\n```\nç™»å½•äº‘ä¸»æœº nginx é…ç½®\n```bash\n# Settings for a TLS enabled server.\n\n    server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  huguobo.site;\n\n        ssl on;\n        ssl_certificate \"/usr/local/nginx/conf/1_huguobo.site_bundle.crt\";\n        ssl_certificate_key \"/usr/local/nginx/conf/2_huguobo.site.key\";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        ssl_prefer_server_ciphers on;\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; #è¯·æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n           root /home/hexoBlog; # your path\n           index index.html;\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n   }\n\n```\n## å¼ºåˆ¶HTTPS\næˆ‘æ²¡æœ‰åšå¼ºåˆ¶httpsã€‚ä½†æ˜¯éœ€è¦çš„è¯ï¼Œæ”¹ä¸‹ nginx é…ç½®æ–‡ä»¶å³å¯\nhttp é»˜è®¤æ˜¯`80`ç«¯å£ ï¼Œhttps æ˜¯`443`ç«¯å£\n```bash\nserver{\n      listen 80;    #è¡¨ç¤ºç›‘å¬80ç«¯å£\n      server_name huguobo.site\n      location / {    #å°†80ç«¯å£å¼ºåˆ¶è½¬ä¸ºhttps\n          rewrite (.*) https://huguobo.site$1 permanent;\n      }\n}\n```\n","source":"_posts/nginxé…ç½®ssl.md","raw":"---\ntitle: Nginx é…ç½® SSL\ndate: 2019-08-31 10:35:31\ncategories: \n- devOps\ntags:\n- nginx\n- ssl\n- Https\n---\n\n> åŸŸåè²Œä¼¼å¤‡æ¡ˆæˆåŠŸäº†ï¼Œè§£æåˆ°è…¾è®¯äº‘æœåŠ¡å™¨ipåï¼Œå‘ç°ç›´æ¥è®¿é—® httpåè®® æ˜¯å¯ä»¥çš„ æ¢æˆ https ä¸è¡Œäº†ã€‚åº”è¯¥æ˜¯æ²¡æœ‰é…ç½®SSLå¯¼è‡´çš„ã€‚\n\n## ä»€ä¹ˆæ˜¯HTTPS\nhttps å…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼Œæ˜¯httpçš„å®‰å…¨ç‰ˆã€‚å³httpä¸‹åŠ å…¥SSLåè®®å±‚ï¼Œå› æ­¤httpsçš„å®‰å…¨åŸºç¡€å°±æ˜¯SSLï¼Œæ‰€ä»¥åŠ å¯†å†…å®¹éœ€è¦SSLã€‚\n\n## SSLåŸç†\n- æµè§ˆå™¨å‘é€ä¸€ä¸ªhttpsçš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼›\n- æœåŠ¡å™¨è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ï¼ŒåŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢ï¼Œè¿™å¥—è¯ä¹¦å…¶å®å°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼›\n- æœåŠ¡å™¨ä¼šæŠŠå…¬é’¥ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›\n- å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ”¶åˆ°å…¬é’¥åï¼Œä¼šéªŒè¯å…¶æ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Œæ— æ•ˆä¼šæœ‰è­¦å‘Šæé†’ï¼Œæœ‰æ•ˆåˆ™ä¼šç”Ÿæˆä¸€ä¸²éšæœºæ•°ï¼Œå¹¶ç”¨æ”¶åˆ°çš„å…¬é’¥åŠ å¯†ï¼›\n- å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„éšæœºå­—ç¬¦ä¸²ä¼ è¾“ç»™æœåŠ¡å™¨ï¼›\n- æœåŠ¡å™¨æ”¶åˆ°åŠ å¯†éšæœºå­—ç¬¦ä¸²åï¼Œå…ˆç”¨ç§é’¥è§£å¯†ï¼ˆå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼‰ï¼Œè·å–åˆ°è¿™ä¸€ä¸²éšæœºæ•°åï¼Œå†ç”¨è¿™ä¸²éšæœºå­—ç¬¦ä¸²åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼ˆè¯¥åŠ å¯†ä¸ºå¯¹ç§°åŠ å¯†ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯å°†æ•°æ®å’Œç§é’¥ä¹Ÿå°±æ˜¯è¿™ä¸ªéšæœºå­—ç¬¦ä¸²>é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éçŸ¥é“ç§é’¥ï¼Œå¦åˆ™æ— æ³•è·å–æ•°æ®å†…å®¹ï¼‰ï¼›\n- æœåŠ¡å™¨æŠŠåŠ å¯†åçš„æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›\n- å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥ä¹Ÿå°±æ˜¯é‚£ä¸ªéšæœºå­—ç¬¦ä¸²è§£å¯†ï¼›\n\n## é…ç½® with-http_ssl_module æ¨¡å—\né¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªè¯ä¹¦ï¼Œå¯ä»¥ç”³è¯·ä¸€ä¸ªå…è´¹çš„ã€‚\nå‚è€ƒä¸‹é¢çš„ `å…¶ä»–æ–¹å¼` éƒ¨åˆ†å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å‚å•†å¯è§†åŒ–ç•Œé¢ç”³è¯·å¹¶ä¸‹è½½~\nç„¶åä¼šå¾—åˆ°nginxç‰ˆæœ¬è¯ä¹¦ï¼Œä¸€ä¸ªå…¬é’¥ï¼ˆè¯ä¹¦ï¼‰ï¼Œä¸€ä¸ªç§é’¥ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚\n\nå…ˆç¡®è®¤`nginx`å®‰è£…æ—¶å·²ç¼–è¯‘`http_ssl`æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ`nginx -V`å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ `--with-http_ssl_module`ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘nginxå°†è¯¥æ¨¡å—åŠ å…¥ã€‚\nè‹¥æœ‰çš„è¯æ­¤æ­¥éª¤è·³è¿‡\nè‹¥sslæ¨¡å—æ²¡æœ‰å…ˆç¼–è¯‘ä¸€ä¸‹\n\n```bash\ncd /usr/local/src/nginx-1.12.1/  #nginxç‰ˆæœ¬å·å¯èƒ½ä¸åŒå“Ÿ\n\n./configure --help | grep -i ssl\n  --with-http_ssl_module \n  \n./configure --prefix=/usr/local/nginx --with-http_ssl_module\n\n```\n\n## ç”Ÿæˆ ssl ç§˜é’¥å¯¹\n```bash\ncd /usr/local/nginx/conf\n\nyum install -y openssl\n```\n\n### ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\n```bash\nopenssl genrsa -des3 -out tmp.key 2048\n# ç”Ÿæˆä¸€ä¸ªrsaç±»å‹çš„å¯†é’¥ï¼Œä¸”é•¿åº¦ä¸º2048ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰å‘ç°ï¼Œè®©æˆ‘ä»¬è®¾ç½®å¯†ç ï¼Œå¦‚æœæ¯æ¬¡æœ‰äººè®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œéƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œå¤ªéº»çƒ¦äº†\n```\næ‰€ä»¥æˆ‘ä»¬è¦è½¬æ¢ç§é’¥ï¼Œå–æ¶ˆå¯†ç ï¼ˆå…¶å®tmp.keyä¸zhdy.keyå¯†é’¥å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæœ‰å¯†ç ä¸€ä¸ªæ²¡æœ‰ï¼‰ï¼š\n```bash\nopenssl rsa -in tmp.key -out zhdy.key \n\nrm -f tmp.key\n```\n### åˆ›å»ºè¯ä¹¦ç”³è¯·\n```\nopenssl req -new -key zhdy.key -out zhdy.csr\n```\n\n### åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\n```bash\nopenssl x509 -req -days 365 -in zhdy.csr -signkey zhdy.key -out zhdy.crt\n```\n\n## Nginx é…ç½® ssl\n```bash\nserver\n{\n    listen 443;\n    server_name huguobo.site; # æ¢æˆä½ è‡ªå·±çš„åŸŸåæœåŠ¡å“Ÿ\n    index index.html index.php;\n    root /path/to/your/file \n    ssl on;\n    ssl_certificate zhdy.crt;\n    ssl_certificate_key zhdy.key;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n}\n\n# ssl on; ä»£è¡¨ç€æ‰“å¼€ssl\n#ssl_certificate zhdy.crt; å…¬é’¥\n# ssl_certificate_key zhdy.key; ç§é’¥\n# ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ä¸‰ç§ä¸åŒçš„åè®®\n```\n\n## æµ‹è¯•\n```bash\nnginx -t\nnginx restart\n```\n\nç”±äºå·²ç»è®¾ç½®äº†443ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨curl -x æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚\næˆ‘ä»¬ä¿®æ”¹ä¸‹/etc/hostsä¸º: `yourip www.aaa.com`\n\n```bash\ncurl https://haha.com\n```\næŠ¥é”™æ˜¾ç¤ºä¸ºâ€œæ­¤è¯ä¹¦éå®‰å…¨è¯ä¹¦â€ï¼Œä½†æ˜¯sslæ˜¯å·²ç»æˆåŠŸé…ç½®äº†\n\n## å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\nåæ¥å‘ç°å„ä¸ªå‚å•†ä¹Ÿæä¾›ç”³è¯·è¯ä¹¦çš„å…¥å£ï¼Œä¹Ÿæä¾› DNS å’Œ æ–‡ä»¶éªŒè¯ä¸¤ç§é…ç½®,å¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œå‚è€ƒé…ç½®\n[è…¾è®¯äº‘sslæ§åˆ¶å°](https://console.cloud.tencent.com/ssl)\n[nginxé…ç½®æ–‡æ¡£](https://cloud.tencent.com/document/product/400/35244)\n\nè¿™ç§ä»ä¾›åº”å•†å¤„å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°è¯ä¹¦ï¼Œç„¶ånginxçš„é…ç½®ç§˜é’¥å’Œè¯ä¹¦éƒ½åœ¨ nginx æ–‡ä»¶å¤¹ä¸‹\n\nä»å®¢æˆ·ç«¯ä¼ é€æ–‡ä»¶åˆ°äº‘ä¸»æœºï¼ˆMACï¼‰\n```bash\nscp  ./2_huguobo.site.key ./1_huguobo.site_bundle.crt  root@118.24.215.220:/usr/local/nginx/conf\n```\nç™»å½•äº‘ä¸»æœº nginx é…ç½®\n```bash\n# Settings for a TLS enabled server.\n\n    server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  huguobo.site;\n\n        ssl on;\n        ssl_certificate \"/usr/local/nginx/conf/1_huguobo.site_bundle.crt\";\n        ssl_certificate_key \"/usr/local/nginx/conf/2_huguobo.site.key\";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        ssl_prefer_server_ciphers on;\n        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; #è¯·æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n           root /home/hexoBlog; # your path\n           index index.html;\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n   }\n\n```\n## å¼ºåˆ¶HTTPS\næˆ‘æ²¡æœ‰åšå¼ºåˆ¶httpsã€‚ä½†æ˜¯éœ€è¦çš„è¯ï¼Œæ”¹ä¸‹ nginx é…ç½®æ–‡ä»¶å³å¯\nhttp é»˜è®¤æ˜¯`80`ç«¯å£ ï¼Œhttps æ˜¯`443`ç«¯å£\n```bash\nserver{\n      listen 80;    #è¡¨ç¤ºç›‘å¬80ç«¯å£\n      server_name huguobo.site\n      location / {    #å°†80ç«¯å£å¼ºåˆ¶è½¬ä¸ºhttps\n          rewrite (.*) https://huguobo.site$1 permanent;\n      }\n}\n```\n","slug":"nginxé…ç½®ssl","published":1,"updated":"2019-09-08T02:26:35.860Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck0wfvhr50016uhoxshn903qm","content":"<blockquote>\n<p>åŸŸåè²Œä¼¼å¤‡æ¡ˆæˆåŠŸäº†ï¼Œè§£æåˆ°è…¾è®¯äº‘æœåŠ¡å™¨ipåï¼Œå‘ç°ç›´æ¥è®¿é—® httpåè®® æ˜¯å¯ä»¥çš„ æ¢æˆ https ä¸è¡Œäº†ã€‚åº”è¯¥æ˜¯æ²¡æœ‰é…ç½®SSLå¯¼è‡´çš„ã€‚</p>\n</blockquote>\n<h2 id=\"ä»€ä¹ˆæ˜¯HTTPS\"><a href=\"#ä»€ä¹ˆæ˜¯HTTPS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯HTTPS\"></a>ä»€ä¹ˆæ˜¯HTTPS</h2><p>https å…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼Œæ˜¯httpçš„å®‰å…¨ç‰ˆã€‚å³httpä¸‹åŠ å…¥SSLåè®®å±‚ï¼Œå› æ­¤httpsçš„å®‰å…¨åŸºç¡€å°±æ˜¯SSLï¼Œæ‰€ä»¥åŠ å¯†å†…å®¹éœ€è¦SSLã€‚</p>\n<h2 id=\"SSLåŸç†\"><a href=\"#SSLåŸç†\" class=\"headerlink\" title=\"SSLåŸç†\"></a>SSLåŸç†</h2><ul>\n<li>æµè§ˆå™¨å‘é€ä¸€ä¸ªhttpsçš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼›</li>\n<li>æœåŠ¡å™¨è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ï¼ŒåŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢ï¼Œè¿™å¥—è¯ä¹¦å…¶å®å°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼›</li>\n<li>æœåŠ¡å™¨ä¼šæŠŠå…¬é’¥ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›</li>\n<li>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ”¶åˆ°å…¬é’¥åï¼Œä¼šéªŒè¯å…¶æ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Œæ— æ•ˆä¼šæœ‰è­¦å‘Šæé†’ï¼Œæœ‰æ•ˆåˆ™ä¼šç”Ÿæˆä¸€ä¸²éšæœºæ•°ï¼Œå¹¶ç”¨æ”¶åˆ°çš„å…¬é’¥åŠ å¯†ï¼›</li>\n<li>å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„éšæœºå­—ç¬¦ä¸²ä¼ è¾“ç»™æœåŠ¡å™¨ï¼›</li>\n<li>æœåŠ¡å™¨æ”¶åˆ°åŠ å¯†éšæœºå­—ç¬¦ä¸²åï¼Œå…ˆç”¨ç§é’¥è§£å¯†ï¼ˆå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼‰ï¼Œè·å–åˆ°è¿™ä¸€ä¸²éšæœºæ•°åï¼Œå†ç”¨è¿™ä¸²éšæœºå­—ç¬¦ä¸²åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼ˆè¯¥åŠ å¯†ä¸ºå¯¹ç§°åŠ å¯†ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯å°†æ•°æ®å’Œç§é’¥ä¹Ÿå°±æ˜¯è¿™ä¸ªéšæœºå­—ç¬¦ä¸²&gt;é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éçŸ¥é“ç§é’¥ï¼Œå¦åˆ™æ— æ³•è·å–æ•°æ®å†…å®¹ï¼‰ï¼›</li>\n<li>æœåŠ¡å™¨æŠŠåŠ å¯†åçš„æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›</li>\n<li>å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥ä¹Ÿå°±æ˜¯é‚£ä¸ªéšæœºå­—ç¬¦ä¸²è§£å¯†ï¼›</li>\n</ul>\n<h2 id=\"é…ç½®-with-http-ssl-module-æ¨¡å—\"><a href=\"#é…ç½®-with-http-ssl-module-æ¨¡å—\" class=\"headerlink\" title=\"é…ç½® with-http_ssl_module æ¨¡å—\"></a>é…ç½® with-http_ssl_module æ¨¡å—</h2><p>é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªè¯ä¹¦ï¼Œå¯ä»¥ç”³è¯·ä¸€ä¸ªå…è´¹çš„ã€‚<br>å‚è€ƒä¸‹é¢çš„ <code>å…¶ä»–æ–¹å¼</code> éƒ¨åˆ†å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å‚å•†å¯è§†åŒ–ç•Œé¢ç”³è¯·å¹¶ä¸‹è½½~<br>ç„¶åä¼šå¾—åˆ°nginxç‰ˆæœ¬è¯ä¹¦ï¼Œä¸€ä¸ªå…¬é’¥ï¼ˆè¯ä¹¦ï¼‰ï¼Œä¸€ä¸ªç§é’¥ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>\n<p>å…ˆç¡®è®¤<code>nginx</code>å®‰è£…æ—¶å·²ç¼–è¯‘<code>http_ssl</code>æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>nginx -V</code>å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ <code>--with-http_ssl_module</code>ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘nginxå°†è¯¥æ¨¡å—åŠ å…¥ã€‚<br>è‹¥æœ‰çš„è¯æ­¤æ­¥éª¤è·³è¿‡<br>è‹¥sslæ¨¡å—æ²¡æœ‰å…ˆç¼–è¯‘ä¸€ä¸‹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/nginx-1.12.1/  <span class=\"comment\">#nginxç‰ˆæœ¬å·å¯èƒ½ä¸åŒå“Ÿ</span></span><br><span class=\"line\"></span><br><span class=\"line\">./configure --<span class=\"built_in\">help</span> | grep -i ssl</span><br><span class=\"line\">  --with-http_ssl_module </span><br><span class=\"line\">  </span><br><span class=\"line\">./configure --prefix=/usr/<span class=\"built_in\">local</span>/nginx --with-http_ssl_module</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç”Ÿæˆ-ssl-ç§˜é’¥å¯¹\"><a href=\"#ç”Ÿæˆ-ssl-ç§˜é’¥å¯¹\" class=\"headerlink\" title=\"ç”Ÿæˆ ssl ç§˜é’¥å¯¹\"></a>ç”Ÿæˆ ssl ç§˜é’¥å¯¹</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/nginx/conf</span><br><span class=\"line\"></span><br><span class=\"line\">yum install -y openssl</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\"><a href=\"#ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\" class=\"headerlink\" title=\"ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\"></a>ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl genrsa -des3 -out tmp.key 2048</span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆä¸€ä¸ªrsaç±»å‹çš„å¯†é’¥ï¼Œä¸”é•¿åº¦ä¸º2048ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰å‘ç°ï¼Œè®©æˆ‘ä»¬è®¾ç½®å¯†ç ï¼Œå¦‚æœæ¯æ¬¡æœ‰äººè®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œéƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œå¤ªéº»çƒ¦äº†</span></span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥æˆ‘ä»¬è¦è½¬æ¢ç§é’¥ï¼Œå–æ¶ˆå¯†ç ï¼ˆå…¶å®tmp.keyä¸zhdy.keyå¯†é’¥å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæœ‰å¯†ç ä¸€ä¸ªæ²¡æœ‰ï¼‰ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl rsa -<span class=\"keyword\">in</span> tmp.key -out zhdy.key </span><br><span class=\"line\"></span><br><span class=\"line\">rm -f tmp.key</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºè¯ä¹¦ç”³è¯·\"><a href=\"#åˆ›å»ºè¯ä¹¦ç”³è¯·\" class=\"headerlink\" title=\"åˆ›å»ºè¯ä¹¦ç”³è¯·\"></a>åˆ›å»ºè¯ä¹¦ç”³è¯·</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -new -key zhdy.key -out zhdy.csr</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\"><a href=\"#åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\" class=\"headerlink\" title=\"åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\"></a>åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -days 365 -<span class=\"keyword\">in</span> zhdy.csr -signkey zhdy.key -out zhdy.crt</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nginx-é…ç½®-ssl\"><a href=\"#Nginx-é…ç½®-ssl\" class=\"headerlink\" title=\"Nginx é…ç½® ssl\"></a>Nginx é…ç½® ssl</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    listen 443;</span><br><span class=\"line\">    server_name huguobo.site; <span class=\"comment\"># æ¢æˆä½ è‡ªå·±çš„åŸŸåæœåŠ¡å“Ÿ</span></span><br><span class=\"line\">    index index.html index.php;</span><br><span class=\"line\">    root /path/to/your/file </span><br><span class=\"line\">    ssl on;</span><br><span class=\"line\">    ssl_certificate zhdy.crt;</span><br><span class=\"line\">    ssl_certificate_key zhdy.key;</span><br><span class=\"line\">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ssl on; ä»£è¡¨ç€æ‰“å¼€ssl</span></span><br><span class=\"line\"><span class=\"comment\">#ssl_certificate zhdy.crt; å…¬é’¥</span></span><br><span class=\"line\"><span class=\"comment\"># ssl_certificate_key zhdy.key; ç§é’¥</span></span><br><span class=\"line\"><span class=\"comment\"># ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ä¸‰ç§ä¸åŒçš„åè®®</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -t</span><br><span class=\"line\">nginx restart</span><br></pre></td></tr></table></figure>\n\n<p>ç”±äºå·²ç»è®¾ç½®äº†443ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨curl -x æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚<br>æˆ‘ä»¬ä¿®æ”¹ä¸‹/etc/hostsä¸º: <code>yourip www.aaa.com</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https://haha.com</span><br></pre></td></tr></table></figure>\n\n<p>æŠ¥é”™æ˜¾ç¤ºä¸ºâ€œæ­¤è¯ä¹¦éå®‰å…¨è¯ä¹¦â€ï¼Œä½†æ˜¯sslæ˜¯å·²ç»æˆåŠŸé…ç½®äº†</p>\n<h2 id=\"å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\"><a href=\"#å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\" class=\"headerlink\" title=\"å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\"></a>å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰</h2><p>åæ¥å‘ç°å„ä¸ªå‚å•†ä¹Ÿæä¾›ç”³è¯·è¯ä¹¦çš„å…¥å£ï¼Œä¹Ÿæä¾› DNS å’Œ æ–‡ä»¶éªŒè¯ä¸¤ç§é…ç½®,å¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œå‚è€ƒé…ç½®<br><a href=\"https://console.cloud.tencent.com/ssl\" target=\"_blank\" rel=\"noopener\">è…¾è®¯äº‘sslæ§åˆ¶å°</a><br><a href=\"https://cloud.tencent.com/document/product/400/35244\" target=\"_blank\" rel=\"noopener\">nginxé…ç½®æ–‡æ¡£</a></p>\n<p>è¿™ç§ä»ä¾›åº”å•†å¤„å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°è¯ä¹¦ï¼Œç„¶ånginxçš„é…ç½®ç§˜é’¥å’Œè¯ä¹¦éƒ½åœ¨ nginx æ–‡ä»¶å¤¹ä¸‹</p>\n<p>ä»å®¢æˆ·ç«¯ä¼ é€æ–‡ä»¶åˆ°äº‘ä¸»æœºï¼ˆMACï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp  ./2_huguobo.site.key ./1_huguobo.site_bundle.crt  root@118.24.215.220:/usr/<span class=\"built_in\">local</span>/nginx/conf</span><br></pre></td></tr></table></figure>\n\n<p>ç™»å½•äº‘ä¸»æœº nginx é…ç½®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Settings for a TLS enabled server.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       443 ssl http2 default_server;</span><br><span class=\"line\">        listen       [::]:443 ssl http2 default_server;</span><br><span class=\"line\">        server_name  huguobo.site;</span><br><span class=\"line\"></span><br><span class=\"line\">        ssl on;</span><br><span class=\"line\">        ssl_certificate <span class=\"string\">\"/usr/local/nginx/conf/1_huguobo.site_bundle.crt\"</span>;</span><br><span class=\"line\">        ssl_certificate_key <span class=\"string\">\"/usr/local/nginx/conf/2_huguobo.site.key\"</span>;</span><br><span class=\"line\">        ssl_session_cache shared:SSL:1m;</span><br><span class=\"line\">        ssl_session_timeout  10m;</span><br><span class=\"line\">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class=\"line\">        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; <span class=\"comment\">#è¯·æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Load configuration files for the default server block.</span></span><br><span class=\"line\">        include /etc/nginx/default.d/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">           root /home/hexoBlog; <span class=\"comment\"># your path</span></span><br><span class=\"line\">           index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        error_page 404 /404.html;</span><br><span class=\"line\">            location = /40x.html &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">            location = /50x.html &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¼ºåˆ¶HTTPS\"><a href=\"#å¼ºåˆ¶HTTPS\" class=\"headerlink\" title=\"å¼ºåˆ¶HTTPS\"></a>å¼ºåˆ¶HTTPS</h2><p>æˆ‘æ²¡æœ‰åšå¼ºåˆ¶httpsã€‚ä½†æ˜¯éœ€è¦çš„è¯ï¼Œæ”¹ä¸‹ nginx é…ç½®æ–‡ä»¶å³å¯<br>http é»˜è®¤æ˜¯<code>80</code>ç«¯å£ ï¼Œhttps æ˜¯<code>443</code>ç«¯å£</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">      listen 80;    <span class=\"comment\">#è¡¨ç¤ºç›‘å¬80ç«¯å£</span></span><br><span class=\"line\">      server_name huguobo.site</span><br><span class=\"line\">      location / &#123;    <span class=\"comment\">#å°†80ç«¯å£å¼ºåˆ¶è½¬ä¸ºhttps</span></span><br><span class=\"line\">          rewrite (.*) https://huguobo.site<span class=\"variable\">$1</span> permanent;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>åŸŸåè²Œä¼¼å¤‡æ¡ˆæˆåŠŸäº†ï¼Œè§£æåˆ°è…¾è®¯äº‘æœåŠ¡å™¨ipåï¼Œå‘ç°ç›´æ¥è®¿é—® httpåè®® æ˜¯å¯ä»¥çš„ æ¢æˆ https ä¸è¡Œäº†ã€‚åº”è¯¥æ˜¯æ²¡æœ‰é…ç½®SSLå¯¼è‡´çš„ã€‚</p>\n</blockquote>\n<h2 id=\"ä»€ä¹ˆæ˜¯HTTPS\"><a href=\"#ä»€ä¹ˆæ˜¯HTTPS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯HTTPS\"></a>ä»€ä¹ˆæ˜¯HTTPS</h2><p>https å…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼Œæ˜¯httpçš„å®‰å…¨ç‰ˆã€‚å³httpä¸‹åŠ å…¥SSLåè®®å±‚ï¼Œå› æ­¤httpsçš„å®‰å…¨åŸºç¡€å°±æ˜¯SSLï¼Œæ‰€ä»¥åŠ å¯†å†…å®¹éœ€è¦SSLã€‚</p>\n<h2 id=\"SSLåŸç†\"><a href=\"#SSLåŸç†\" class=\"headerlink\" title=\"SSLåŸç†\"></a>SSLåŸç†</h2><ul>\n<li>æµè§ˆå™¨å‘é€ä¸€ä¸ªhttpsçš„è¯·æ±‚ç»™æœåŠ¡å™¨ï¼›</li>\n<li>æœåŠ¡å™¨è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ï¼ŒåŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢ï¼Œè¿™å¥—è¯ä¹¦å…¶å®å°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼›</li>\n<li>æœåŠ¡å™¨ä¼šæŠŠå…¬é’¥ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›</li>\n<li>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ”¶åˆ°å…¬é’¥åï¼Œä¼šéªŒè¯å…¶æ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Œæ— æ•ˆä¼šæœ‰è­¦å‘Šæé†’ï¼Œæœ‰æ•ˆåˆ™ä¼šç”Ÿæˆä¸€ä¸²éšæœºæ•°ï¼Œå¹¶ç”¨æ”¶åˆ°çš„å…¬é’¥åŠ å¯†ï¼›</li>\n<li>å®¢æˆ·ç«¯æŠŠåŠ å¯†åçš„éšæœºå­—ç¬¦ä¸²ä¼ è¾“ç»™æœåŠ¡å™¨ï¼›</li>\n<li>æœåŠ¡å™¨æ”¶åˆ°åŠ å¯†éšæœºå­—ç¬¦ä¸²åï¼Œå…ˆç”¨ç§é’¥è§£å¯†ï¼ˆå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼‰ï¼Œè·å–åˆ°è¿™ä¸€ä¸²éšæœºæ•°åï¼Œå†ç”¨è¿™ä¸²éšæœºå­—ç¬¦ä¸²åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼ˆè¯¥åŠ å¯†ä¸ºå¯¹ç§°åŠ å¯†ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯å°†æ•°æ®å’Œç§é’¥ä¹Ÿå°±æ˜¯è¿™ä¸ªéšæœºå­—ç¬¦ä¸²&gt;é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éçŸ¥é“ç§é’¥ï¼Œå¦åˆ™æ— æ³•è·å–æ•°æ®å†…å®¹ï¼‰ï¼›</li>\n<li>æœåŠ¡å™¨æŠŠåŠ å¯†åçš„æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯ï¼›</li>\n<li>å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥ä¹Ÿå°±æ˜¯é‚£ä¸ªéšæœºå­—ç¬¦ä¸²è§£å¯†ï¼›</li>\n</ul>\n<h2 id=\"é…ç½®-with-http-ssl-module-æ¨¡å—\"><a href=\"#é…ç½®-with-http-ssl-module-æ¨¡å—\" class=\"headerlink\" title=\"é…ç½® with-http_ssl_module æ¨¡å—\"></a>é…ç½® with-http_ssl_module æ¨¡å—</h2><p>é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªè¯ä¹¦ï¼Œå¯ä»¥ç”³è¯·ä¸€ä¸ªå…è´¹çš„ã€‚<br>å‚è€ƒä¸‹é¢çš„ <code>å…¶ä»–æ–¹å¼</code> éƒ¨åˆ†å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å‚å•†å¯è§†åŒ–ç•Œé¢ç”³è¯·å¹¶ä¸‹è½½~<br>ç„¶åä¼šå¾—åˆ°nginxç‰ˆæœ¬è¯ä¹¦ï¼Œä¸€ä¸ªå…¬é’¥ï¼ˆè¯ä¹¦ï¼‰ï¼Œä¸€ä¸ªç§é’¥ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>\n<p>å…ˆç¡®è®¤<code>nginx</code>å®‰è£…æ—¶å·²ç¼–è¯‘<code>http_ssl</code>æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>nginx -V</code>å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ <code>--with-http_ssl_module</code>ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘nginxå°†è¯¥æ¨¡å—åŠ å…¥ã€‚<br>è‹¥æœ‰çš„è¯æ­¤æ­¥éª¤è·³è¿‡<br>è‹¥sslæ¨¡å—æ²¡æœ‰å…ˆç¼–è¯‘ä¸€ä¸‹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/src/nginx-1.12.1/  <span class=\"comment\">#nginxç‰ˆæœ¬å·å¯èƒ½ä¸åŒå“Ÿ</span></span><br><span class=\"line\"></span><br><span class=\"line\">./configure --<span class=\"built_in\">help</span> | grep -i ssl</span><br><span class=\"line\">  --with-http_ssl_module </span><br><span class=\"line\">  </span><br><span class=\"line\">./configure --prefix=/usr/<span class=\"built_in\">local</span>/nginx --with-http_ssl_module</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ç”Ÿæˆ-ssl-ç§˜é’¥å¯¹\"><a href=\"#ç”Ÿæˆ-ssl-ç§˜é’¥å¯¹\" class=\"headerlink\" title=\"ç”Ÿæˆ ssl ç§˜é’¥å¯¹\"></a>ç”Ÿæˆ ssl ç§˜é’¥å¯¹</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/nginx/conf</span><br><span class=\"line\"></span><br><span class=\"line\">yum install -y openssl</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\"><a href=\"#ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\" class=\"headerlink\" title=\"ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key\"></a>ä½¿ç”¨RSAç®—æ³•ç”Ÿäº§key</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl genrsa -des3 -out tmp.key 2048</span><br><span class=\"line\"><span class=\"comment\"># ç”Ÿæˆä¸€ä¸ªrsaç±»å‹çš„å¯†é’¥ï¼Œä¸”é•¿åº¦ä¸º2048ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰å‘ç°ï¼Œè®©æˆ‘ä»¬è®¾ç½®å¯†ç ï¼Œå¦‚æœæ¯æ¬¡æœ‰äººè®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œéƒ½éœ€è¦è¾“å…¥å¯†ç ï¼Œå¤ªéº»çƒ¦äº†</span></span><br></pre></td></tr></table></figure>\n\n<p>æ‰€ä»¥æˆ‘ä»¬è¦è½¬æ¢ç§é’¥ï¼Œå–æ¶ˆå¯†ç ï¼ˆå…¶å®tmp.keyä¸zhdy.keyå¯†é’¥å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæœ‰å¯†ç ä¸€ä¸ªæ²¡æœ‰ï¼‰ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl rsa -<span class=\"keyword\">in</span> tmp.key -out zhdy.key </span><br><span class=\"line\"></span><br><span class=\"line\">rm -f tmp.key</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºè¯ä¹¦ç”³è¯·\"><a href=\"#åˆ›å»ºè¯ä¹¦ç”³è¯·\" class=\"headerlink\" title=\"åˆ›å»ºè¯ä¹¦ç”³è¯·\"></a>åˆ›å»ºè¯ä¹¦ç”³è¯·</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -new -key zhdy.key -out zhdy.csr</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\"><a href=\"#åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\" class=\"headerlink\" title=\"åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦\"></a>åˆ›å»ºè‡ªç­¾åçš„è¯ä¹¦</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl x509 -req -days 365 -<span class=\"keyword\">in</span> zhdy.csr -signkey zhdy.key -out zhdy.crt</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nginx-é…ç½®-ssl\"><a href=\"#Nginx-é…ç½®-ssl\" class=\"headerlink\" title=\"Nginx é…ç½® ssl\"></a>Nginx é…ç½® ssl</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    listen 443;</span><br><span class=\"line\">    server_name huguobo.site; <span class=\"comment\"># æ¢æˆä½ è‡ªå·±çš„åŸŸåæœåŠ¡å“Ÿ</span></span><br><span class=\"line\">    index index.html index.php;</span><br><span class=\"line\">    root /path/to/your/file </span><br><span class=\"line\">    ssl on;</span><br><span class=\"line\">    ssl_certificate zhdy.crt;</span><br><span class=\"line\">    ssl_certificate_key zhdy.key;</span><br><span class=\"line\">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ssl on; ä»£è¡¨ç€æ‰“å¼€ssl</span></span><br><span class=\"line\"><span class=\"comment\">#ssl_certificate zhdy.crt; å…¬é’¥</span></span><br><span class=\"line\"><span class=\"comment\"># ssl_certificate_key zhdy.key; ç§é’¥</span></span><br><span class=\"line\"><span class=\"comment\"># ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ä¸‰ç§ä¸åŒçš„åè®®</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -t</span><br><span class=\"line\">nginx restart</span><br></pre></td></tr></table></figure>\n\n<p>ç”±äºå·²ç»è®¾ç½®äº†443ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨curl -x æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚<br>æˆ‘ä»¬ä¿®æ”¹ä¸‹/etc/hostsä¸º: <code>yourip www.aaa.com</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https://haha.com</span><br></pre></td></tr></table></figure>\n\n<p>æŠ¥é”™æ˜¾ç¤ºä¸ºâ€œæ­¤è¯ä¹¦éå®‰å…¨è¯ä¹¦â€ï¼Œä½†æ˜¯sslæ˜¯å·²ç»æˆåŠŸé…ç½®äº†</p>\n<h2 id=\"å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\"><a href=\"#å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\" class=\"headerlink\" title=\"å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰\"></a>å…¶ä»–æ–¹å¼ï¼ˆæ›´å¿«æ·ï¼‰</h2><p>åæ¥å‘ç°å„ä¸ªå‚å•†ä¹Ÿæä¾›ç”³è¯·è¯ä¹¦çš„å…¥å£ï¼Œä¹Ÿæä¾› DNS å’Œ æ–‡ä»¶éªŒè¯ä¸¤ç§é…ç½®,å¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œå‚è€ƒé…ç½®<br><a href=\"https://console.cloud.tencent.com/ssl\" target=\"_blank\" rel=\"noopener\">è…¾è®¯äº‘sslæ§åˆ¶å°</a><br><a href=\"https://cloud.tencent.com/document/product/400/35244\" target=\"_blank\" rel=\"noopener\">nginxé…ç½®æ–‡æ¡£</a></p>\n<p>è¿™ç§ä»ä¾›åº”å•†å¤„å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°è¯ä¹¦ï¼Œç„¶ånginxçš„é…ç½®ç§˜é’¥å’Œè¯ä¹¦éƒ½åœ¨ nginx æ–‡ä»¶å¤¹ä¸‹</p>\n<p>ä»å®¢æˆ·ç«¯ä¼ é€æ–‡ä»¶åˆ°äº‘ä¸»æœºï¼ˆMACï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp  ./2_huguobo.site.key ./1_huguobo.site_bundle.crt  root@118.24.215.220:/usr/<span class=\"built_in\">local</span>/nginx/conf</span><br></pre></td></tr></table></figure>\n\n<p>ç™»å½•äº‘ä¸»æœº nginx é…ç½®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Settings for a TLS enabled server.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       443 ssl http2 default_server;</span><br><span class=\"line\">        listen       [::]:443 ssl http2 default_server;</span><br><span class=\"line\">        server_name  huguobo.site;</span><br><span class=\"line\"></span><br><span class=\"line\">        ssl on;</span><br><span class=\"line\">        ssl_certificate <span class=\"string\">\"/usr/local/nginx/conf/1_huguobo.site_bundle.crt\"</span>;</span><br><span class=\"line\">        ssl_certificate_key <span class=\"string\">\"/usr/local/nginx/conf/2_huguobo.site.key\"</span>;</span><br><span class=\"line\">        ssl_session_cache shared:SSL:1m;</span><br><span class=\"line\">        ssl_session_timeout  10m;</span><br><span class=\"line\">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class=\"line\">        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; <span class=\"comment\">#è¯·æŒ‰ç…§è¿™ä¸ªå¥—ä»¶é…ç½®ï¼Œé…ç½®åŠ å¯†å¥—ä»¶ï¼Œå†™æ³•éµå¾ª openssl æ ‡å‡†ã€‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Load configuration files for the default server block.</span></span><br><span class=\"line\">        include /etc/nginx/default.d/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">           root /home/hexoBlog; <span class=\"comment\"># your path</span></span><br><span class=\"line\">           index index.html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        error_page 404 /404.html;</span><br><span class=\"line\">            location = /40x.html &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">            location = /50x.html &#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å¼ºåˆ¶HTTPS\"><a href=\"#å¼ºåˆ¶HTTPS\" class=\"headerlink\" title=\"å¼ºåˆ¶HTTPS\"></a>å¼ºåˆ¶HTTPS</h2><p>æˆ‘æ²¡æœ‰åšå¼ºåˆ¶httpsã€‚ä½†æ˜¯éœ€è¦çš„è¯ï¼Œæ”¹ä¸‹ nginx é…ç½®æ–‡ä»¶å³å¯<br>http é»˜è®¤æ˜¯<code>80</code>ç«¯å£ ï¼Œhttps æ˜¯<code>443</code>ç«¯å£</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server&#123;</span><br><span class=\"line\">      listen 80;    <span class=\"comment\">#è¡¨ç¤ºç›‘å¬80ç«¯å£</span></span><br><span class=\"line\">      server_name huguobo.site</span><br><span class=\"line\">      location / &#123;    <span class=\"comment\">#å°†80ç«¯å£å¼ºåˆ¶è½¬ä¸ºhttps</span></span><br><span class=\"line\">          rewrite (.*) https://huguobo.site<span class=\"variable\">$1</span> permanent;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ck0wfvhpz0005uhoxl2oa99tu","category_id":"ck0wfvhpx0002uhox59huamsw","_id":"ck0wfvhq20009uhox1dond0fn"},{"post_id":"ck0wfvhps0000uhoxm4zeu14s","category_id":"ck0wfvhpx0002uhox59huamsw","_id":"ck0wfvhq3000cuhoxf00g2bih"},{"post_id":"ck0wfvhq00006uhoxjhr6uleb","category_id":"ck0wfvhpx0002uhox59huamsw","_id":"ck0wfvhq3000euhoxt456t75i"},{"post_id":"ck0wfvhpv0001uhoxds59cq9t","category_id":"ck0wfvhq10007uhox4jnzsuk8","_id":"ck0wfvhq3000huhox4vfci91s"},{"post_id":"ck0wfvhpy0004uhoxve5se6ml","category_id":"ck0wfvhq2000auhoxx391gi8r","_id":"ck0wfvhq4000iuhox1aim0144"},{"post_id":"ck0wfvhqz000yuhoxayzruv6f","category_id":"ck0wfvhpx0002uhox59huamsw","_id":"ck0wfvhr50017uhoxlfzca2m2"},{"post_id":"ck0wfvhr30013uhoxw2u65v7z","category_id":"ck0wfvhq10007uhox4jnzsuk8","_id":"ck0wfvhr70018uhox7wckdv0u"},{"post_id":"ck0wfvhr50016uhoxshn903qm","category_id":"ck0wfvhq10007uhox4jnzsuk8","_id":"ck0wfvhr7001auhox2geoi5pm"},{"post_id":"ck0wfvhr10010uhoxr0jffggo","category_id":"ck0wfvhr40014uhox3l59jkwb","_id":"ck0wfvhr7001buhox5vo2rmin"}],"PostTag":[{"post_id":"ck0wfvhps0000uhoxm4zeu14s","tag_id":"ck0wfvhpy0003uhoxbo81kvea","_id":"ck0wfvhq3000duhox1vmxy9a0"},{"post_id":"ck0wfvhps0000uhoxm4zeu14s","tag_id":"ck0wfvhq10008uhox11zbwdg9","_id":"ck0wfvhq3000fuhoxomsmy7pp"},{"post_id":"ck0wfvhpv0001uhoxds59cq9t","tag_id":"ck0wfvhq2000buhoxhzw2ufr3","_id":"ck0wfvhq5000muhox2okwc4h3"},{"post_id":"ck0wfvhpv0001uhoxds59cq9t","tag_id":"ck0wfvhq3000guhox9n40z4ry","_id":"ck0wfvhq5000nuhoxhjcabfjo"},{"post_id":"ck0wfvhpv0001uhoxds59cq9t","tag_id":"ck0wfvhq5000juhoxv8dquf40","_id":"ck0wfvhq6000puhox03q7hf7t"},{"post_id":"ck0wfvhpv0001uhoxds59cq9t","tag_id":"ck0wfvhq5000kuhox91dn832f","_id":"ck0wfvhq6000quhoxuiutm7n9"},{"post_id":"ck0wfvhpy0004uhoxve5se6ml","tag_id":"ck0wfvhq5000luhoxkg1r6so6","_id":"ck0wfvhq6000suhoxly0bgdc6"},{"post_id":"ck0wfvhpz0005uhoxl2oa99tu","tag_id":"ck0wfvhq5000ouhox1wa8v6ko","_id":"ck0wfvhq6000uuhoxjvfufawe"},{"post_id":"ck0wfvhpz0005uhoxl2oa99tu","tag_id":"ck0wfvhq6000ruhox1qnwhe4v","_id":"ck0wfvhq6000vuhoxbattrdxe"},{"post_id":"ck0wfvhq00006uhoxjhr6uleb","tag_id":"ck0wfvhpy0003uhoxbo81kvea","_id":"ck0wfvhq7000wuhox994mbnsg"},{"post_id":"ck0wfvhq00006uhoxjhr6uleb","tag_id":"ck0wfvhq6000tuhoxmv1b13lp","_id":"ck0wfvhq7000xuhoxbx8j10xb"},{"post_id":"ck0wfvhqz000yuhoxayzruv6f","tag_id":"ck0wfvhq6000tuhoxmv1b13lp","_id":"ck0wfvhr30012uhox1tdhhk0m"},{"post_id":"ck0wfvhr10010uhoxr0jffggo","tag_id":"ck0wfvhr40015uhoxbaweosa3","_id":"ck0wfvhr8001euhox9tf6518o"},{"post_id":"ck0wfvhr10010uhoxr0jffggo","tag_id":"ck0wfvhr70019uhoxe5c9hp8t","_id":"ck0wfvhra001fuhoxzzw7g9ht"},{"post_id":"ck0wfvhr10010uhoxr0jffggo","tag_id":"ck0wfvhr7001cuhoxlvj0j8j8","_id":"ck0wfvhra001huhoxuv020klg"},{"post_id":"ck0wfvhr30013uhoxw2u65v7z","tag_id":"ck0wfvhr8001duhoxp1wyqkr0","_id":"ck0wfvhrc001luhoxmmf16qqw"},{"post_id":"ck0wfvhr30013uhoxw2u65v7z","tag_id":"ck0wfvhra001guhox9ia2q3l8","_id":"ck0wfvhrc001muhoxjstjscjx"},{"post_id":"ck0wfvhr30013uhoxw2u65v7z","tag_id":"ck0wfvhrb001iuhoxcb10u40q","_id":"ck0wfvhrc001ouhoxowrmaqxj"},{"post_id":"ck0wfvhr30013uhoxw2u65v7z","tag_id":"ck0wfvhrb001juhoxxmaab1fw","_id":"ck0wfvhrc001puhoxqkw2ofiy"},{"post_id":"ck0wfvhr50016uhoxshn903qm","tag_id":"ck0wfvhrb001kuhoxs316o87u","_id":"ck0wfvhre001ruhoxgxagoxq1"},{"post_id":"ck0wfvhr50016uhoxshn903qm","tag_id":"ck0wfvhrc001nuhox9yu9f1kd","_id":"ck0wfvhre001suhox7ydtsbdr"},{"post_id":"ck0wfvhr50016uhoxshn903qm","tag_id":"ck0wfvhrb001iuhoxcb10u40q","_id":"ck0wfvhre001tuhoxm46d2cdl"}],"Tag":[{"name":"æ—¥å¸¸","_id":"ck0wfvhpy0003uhoxbo81kvea"},{"name":"æ€è€ƒ","_id":"ck0wfvhq10008uhox11zbwdg9"},{"name":"travis","_id":"ck0wfvhq2000buhoxhzw2ufr3"},{"name":"CI","_id":"ck0wfvhq3000guhox9n40z4ry"},{"name":"hexo","_id":"ck0wfvhq5000juhoxv8dquf40"},{"name":"gem","_id":"ck0wfvhq5000kuhox91dn832f"},{"name":"NODE","_id":"ck0wfvhq5000luhoxkg1r6so6"},{"name":"HHKB","_id":"ck0wfvhq5000ouhox1wa8v6ko"},{"name":"keyboard","_id":"ck0wfvhq6000ruhox1qnwhe4v"},{"name":"ç™½è¯","_id":"ck0wfvhq6000tuhoxmv1b13lp"},{"name":"scorllTop","_id":"ck0wfvhr40015uhoxbaweosa3"},{"name":"height","_id":"ck0wfvhr70019uhoxe5c9hp8t"},{"name":"width","_id":"ck0wfvhr7001cuhoxlvj0j8j8"},{"name":"SSH","_id":"ck0wfvhr8001duhoxp1wyqkr0"},{"name":"SSL","_id":"ck0wfvhra001guhox9ia2q3l8"},{"name":"Https","_id":"ck0wfvhrb001iuhoxcb10u40q"},{"name":"encrypt","_id":"ck0wfvhrb001juhoxxmaab1fw"},{"name":"nginx","_id":"ck0wfvhrb001kuhoxs316o87u"},{"name":"ssl","_id":"ck0wfvhrc001nuhox9yu9f1kd"}]}}